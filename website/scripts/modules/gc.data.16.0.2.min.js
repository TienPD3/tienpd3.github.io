/*!
 * 
 * SpreadJS Library 16.0.2
 * 
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 * 
 * Licensed under the SpreadJS Commercial License.
 * us.sales@grapecity.com
 * http://www.grapecity.com/en/licensing/grapecity/
 * 
 * 
 */
var GC="object"==typeof GC?GC:{};GC.Data=function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){var d,e;if(1&b&&(a=c(a)),8&b)return a;if(4&b&&"object"==typeof a&&a&&a.__esModule)return a;if(d=Object.create(null),c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(e in a)c.d(d,e,function(b){return a[b]}.bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function b(){return a.default}:function b(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="/assets/",c(c.s="./node_modules_local/@grapecity/js-data-manager/index.js")}({"./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js":function(a,b,c){var d="object"==typeof d?d:{};d.Data=function(a){var b={};function c(d){if(b[d])return b[d].exports;var e=b[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,c),e.l=!0,e.exports}return c.m=a,c.c=b,c.d=function(a,b,d){c.o(a,b)||Object.defineProperty(a,b,{enumerable:!0,get:d})},c.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},c.t=function(a,b){var d,e;if(1&b&&(a=c(a)),8&b)return a;if(4&b&&"object"==typeof a&&a&&a.__esModule)return a;if(d=Object.create(null),c.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&b&&"string"!=typeof a)for(e in a)c.d(d,e,function(b){return a[b]}.bind(null,e));return d},c.n=function(a){var b=a&&a.__esModule?function b(){return a.default}:function b(){return a};return c.d(b,"a",b),b},c.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},c.p="",c(c.s="./dist/src/dataManager.entry.js")}({"./dist/src/calculation/calcSource.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.DataManagerCalcSource=b.DataManagerReference=void 0,d=c("CalcEngine"),e=function(){function a(){this.row=[],this.field=[]}return a.prototype.parseRowIndex=function(a,b,c){var d=b.num;return b.relative||(b.num===-1?d=a-1:d--),c*b.relative+d},a.prototype.getValueImp=function(a){var b,c,e,f,g,h,i,j=this.table.length();if(this.field.SNJ&&this.field.SNJ[this.rowString])return this.field.SNJ[this.rowString];if(b=[],0===this.row.length)for(c=0;c<j;c++)b.push(this.field.getValue(c));for(e=0;e<this.row.length;e++)if(f=this.row[e],2===f.length)for(g=this.parseRowIndex(j,f[0],a),h=this.parseRowIndex(j,f[1],a),i=g;i<=h;i++)b.push(this.field.getValue(i));else if(f.type)if("key"===f.type)c=this.table.vQJ(f.value),b=b.concat(this.field.getValues(c));else for(i="odd"===f.type?1:0;i<j;i+=2)b.push(this.field.getValue(i));else c=this.parseRowIndex(j,f,a),b.push(this.field.getValue(c));if(1===b.length)b=b[0];else if(0===b.length)return null;return b instanceof Array&&(b=b[0]instanceof Array?new d.CalcArray(b):new d.CalcArray([b])),this.jOJ||(this.field.SNJ=this.field.SNJ||{},this.field.SNJ[this.rowString]=b),b},a.prototype.getValuesImp=function(a,b){var c=this.field.getValues(a,b);return c[0]instanceof Array?new d.CalcArray(c):new d.CalcArray([c])},a.prototype.getValue=function(a,b){return this.K4J(),a instanceof Array?this.getValuesImp(a,b):this.getValueImp(a)},a.prototype.K4J=function(){this.field=this.table.TNJ(this.HL)},a}(),b.DataManagerReference=e,f=function(a){g(b,a);function b(b,c){var d=a.call(this,b)||this;return d.sj=c,d}return b.prototype.TDJ=function(){return this._allFieldNames},b.prototype.oSJ=function(a){this.pSJ=a},b.prototype.L$a=function(a,b){this.xc=a,this.oI=b},b.prototype.getField=function(a){var b=this.xc,c=this.oI;return a.getValue(b,c)},b}(d.CalcSource),b.DataManagerCalcSource=f},"./dist/src/calculation/functions/functions.entry.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j;Object.defineProperty(b,"__esModule",{value:!0}),b.addCustomFunctions=void 0,d=c("./dist/src/calculation/functions/scope.js"),e=c("./dist/src/calculation/functions/hierarchyParent.js"),f=c("./dist/src/calculation/functions/hierarchyChildren.js"),g=c("./dist/src/calculation/functions/hierarchyOnlyChildren.js"),h=c("./dist/src/calculation/functions/hierarchyLevel.js"),i=c("./dist/src/calculation/functions/hierarchyLevelRowNumber.js"),j=c("./dist/src/calculation/functions/query.js");function k(){d.addScopeCustomFunctions(),e.addParentCustomFunctions(),f.addChildrenCustomFunctions(),g.addOnlyChildrenCustomFunctions(),h.addLevelCustomFunctions(),i.addLevelRowNumberCustomFunctions(),j.addQueryFunction()}b.addCustomFunctions=k},"./dist/src/calculation/functions/hierarchyChildren.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.addChildrenCustomFunctions=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f="CHILDREN";function g(){function a(){this.Ci=[{Hi:3,aj:["< 1","> 999"]},{Hi:5}]}a.prototype=new d.Functions.Function(f,2,2),a.prototype.isContextSensitive=function(){return!0},a.prototype.evaluate=function(a,b,c){var f,g=[],h=a.source.sj,i=a.source.xc;return h.d7J()&&(f=h.z6J(i),!e.isNullOrUndefined(f)&&b>0&&!e.isNullOrEmpty(c)&&(e.traversalTree(f,{invoking:function(a){if(b--,0===b){var d=a.mi,e=h._dataSource.J4J(d),f=h._getValueByField(c,e);return g.push(f),{cancelDeepRecursion:!0}}if(0===a.children.length)return{cancelDeepRecursion:!0}},invoked:function(){b++}}),a.source.xc=i)),new d.CalcArray([g])},d.Functions.defineGlobalCustomFunction(f,new a)}b.addChildrenCustomFunctions=g},"./dist/src/calculation/functions/hierarchyLevel.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.addLevelCustomFunctions=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f="LEVEL";function g(){function a(){}a.prototype=new d.Functions.Function(f),a.prototype.isContextSensitive=function(){return!0},a.prototype.evaluate=function(a){var b,c=a.source.sj,d=a.source.xc;if(c.d7J()&&(b=c.z6J(d),!e.isNullOrUndefined(b)))return b.level},d.Functions.defineGlobalCustomFunction(f,new a)}b.addLevelCustomFunctions=g},"./dist/src/calculation/functions/hierarchyLevelRowNumber.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.addLevelRowNumberCustomFunctions=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f="LEVELROWNUMBER";function g(){function a(){}a.prototype=new d.Functions.Function(f),a.prototype.isContextSensitive=function(){return!0},a.prototype.evaluate=function(a){var b,c=a.source.sj,d=a.source.xc;if(c.d7J()&&(b=c.z6J(d),!e.isNullOrUndefined(b)))return b.getCurrentIndex()+1},d.Functions.defineGlobalCustomFunction(f,new a)}b.addLevelRowNumberCustomFunctions=g},"./dist/src/calculation/functions/hierarchyOnlyChildren.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.addOnlyChildrenCustomFunctions=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f="ONLYCHILDREN";function g(){function a(){this.Ci=[{Hi:5}]}a.prototype=new d.Functions.Function(f,1,1),a.prototype.isContextSensitive=function(){return!0},a.prototype.evaluate=function(a,b){var c,f=[],g=a.source.sj,h=a.source.xc;return g.d7J()&&(c=g.z6J(h),e.isNullOrUndefined(c)||e.isNullOrEmpty(b)||(e.traversalTree(c,function(a){if(0===a.children.length){var c=a.mi,d=g._dataSource.J4J(c),e=g._getValueByField(b,d);f.push(e)}}),a.source.xc=h)),new d.CalcArray([f])},d.Functions.defineGlobalCustomFunction(f,new a)}b.addOnlyChildrenCustomFunctions=g},"./dist/src/calculation/functions/hierarchyParent.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.addParentCustomFunctions=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f="PARENT";function g(){function a(){this.Ci=[{Hi:3,aj:["< 1","> 999"]},{Hi:5}]}a.prototype=new d.Functions.Function(f,2,2),a.prototype.isContextSensitive=function(){return!0},a.prototype.evaluate=function(a,b,c){var d,f,g,i,j,k=a.source.sj,l=a.source.xc;if(k.d7J()&&(d=k.z6J(l),!e.isNullOrUndefined(d)&&b>0&&!e.isNullOrEmpty(c)&&(f=h(d,b),!f.isRoot)))return g=f.mi,i=k._dataSource.J4J(g),j=k._getValueByField(c,i),a.source.xc=l,j},d.Functions.defineGlobalCustomFunction(f,new a)}b.addParentCustomFunctions=g;function h(a,b){return 0===b||a.isRoot?a:h(a.parent,b-1)}},"./dist/src/calculation/functions/query.js":function(a,b,c){"use strict";var d,e;Object.defineProperty(b,"__esModule",{value:!0}),b.addQueryFunction=void 0,d=c("CalcEngine"),e="QUERY";function f(){if(!d.Functions.findGlobalFunction(e)){var a=new d.Functions.AsyncFunction(e,1,3);a.isContextSensitive=function(){return!0},a.evaluateAsync=function(a,b,c,e){var f,g=a.ctx.source.kj.parent.dataManager();function h(){var f,h,i,j;(null===(i=null===(h=null===(f=a.ctx)||void 0===f?void 0:f.gkK)||void 0===h?void 0:h.node)||void 0===i?void 0:i.Lf)?(j=g.uQJ(b,c,e),j&&(e?a.setAsyncResult(j[0]):a.setAsyncResult(new d.CalcArray(j)))):g.uQJ(b,c,e,!0)}function i(){var f=g.uQJ(b,c,e,h);f&&(e?a.setAsyncResult(f[0]):a.setAsyncResult(new d.CalcArray(f)))}f=g.M5J(b,c,e),f.table&&f.table.B9J().then(function(){i()})},a.acceptsReference=function(a){return!0},a.acceptsArray=function(a){return!0},d.Functions.defineGlobalCustomFunction(e,a)}}b.addQueryFunction=f},"./dist/src/calculation/functions/scope.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.addScopeCustomFunctions=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f="CALCULATE",g="REMOVEFILTERS";function h(){function a(){}a.prototype=new d.Functions.Function(f,2,2),a.prototype.isContextSensitive=function(){return!0},a.prototype.isReverseArgs=function(){return!0},a.prototype.evaluate=function(a,b,c){return a.source.oI=b.start,a.source.xc=b.context,c},d.Functions.defineGlobalCustomFunction(f,new a);function b(){}b.prototype=new d.Functions.Function(g,0,255),b.prototype.isContextSensitive=function(){return!0},b.prototype.evaluate=function(a){var b,c,d,e=[];for(b=1;b<arguments.length;b++)e[b-1]=arguments[b];return c={start:a.source.oI,context:a.source.xc},d=a.source.pSJ,a.source.oI=0,a.source.xc=i(d,e),c},d.Functions.defineGlobalCustomFunction(g,new b)}b.addScopeCustomFunctions=h;function i(a,b){var c=j(a.groupOptions.slice(0,a.path.length),b);return k(a.path,c)?a.entireScope:l(a.path,c)}function j(a,b){var c,d;if(b&&b.length>0){for(c=-1,a.reverse(),d=0;d<a.length;d++)if(a[d].field!==b[d]){e.isNullOrUndefined(b[d])&&b.length<=d&&(c=a.length-d-1);break}return c}return-1}function k(a,b){return b===-1||a.length-1<=b}function l(a,b){var c=a[b],d=[];return m(c,d),d}function m(a,b){var c,d,e,f,g,h,i=b.length,j=a.recordIndexes;if(j)for(c=0,d=j.length;c<d;c++)b[i+c]=j[c];else for(e=a.children,f=0,g=e;f<g.length;f++)h=g[f],m(h,b)}},"./dist/src/calculation/queryFunctionResolver.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.QueryFunctionSolver=void 0,d=c("Common"),e=null,f=d.Common.u.kb;function h(a,b,c){return function(d){var e=[];return e.push(d.xQJ(d.vQJ(a),b||d._dataSource.U,c)),e}}g=function(){function a(){}return a.parseParam=function(b,c,d,g){var i,j=Object.keys(g.tables),k=new a,l=function(a){var i,l,m,n,o=j[a];b===o?(k.getValue=function(a){return a.iNb(e,e,c,d)},k.table=g.tables[o]):f(b,o)&&(k.table=g.tables[o],i=b[o.length],l=b.substr(o.length+1),"#"===i?(m=parseInt(l,10),k.getValue=function(a){var b=[];return b.push(a.xQJ(m,c||a._dataSource.U,d)),b}):"/"===i?k.getValue=h(l,c,d):"?"===i?(n=l.split("=",2),1===n.length?k.getValue=h(l,c,d):k.getValue=function(a){return a.iNb(n[1],n[0],c,d)}):delete k.table)};for(i=0;i<j.length;i++)l(i);return k},a}(),b.QueryFunctionSolver=g},"./dist/src/calculation/tokenResolver.js":function(a,b,c){"use strict";var d,e,f,g,h,i=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.DataManagerTokenResolver=void 0,d=c("CalcEngine"),e=c("./dist/src/calculation/calcSource.js"),f=c("./dist/src/dataSource/utils.js"),g=function(a){i(b,a);function b(b){var c=a.call(this,14)||this;return c.value=b,c}return b.prototype.gmb=function(a,b){if(this.value instanceof e.DataManagerReference){var c=this.value.table;c.n_J(a,this.value.HL[0],b)}},b}(d.Expression),h=function(a){i(b,a);function b(b){return a.call(this,b)||this}return b.prototype.resolveToken=function(a,b,c,d,f){var h,i,j,k=c[d],l=k.ni,m=a.source,n=m&&m.sj;if(n&&0===k.Nc&&"["===l[0]&&"]"===l[l.length-1]){if(h=new e.DataManagerReference,i=this.UDJ(h,l,1),i===-1)return;if(h.rowString=l.substring(1,i),i=this.VDJ(h,l,i),i===-1)return;return h.table=n,h.HL=h.field,h.field=n.TNJ(h.field),j=new g(h),{expr:j,index:d+1}}},b.prototype.UDJ=function(a,b,c){var d,e,g,h,i=!1;function j(a,c){for(var d=c?a+1:a;b[d]>="0"&&b[d]<="9";)d++;for(;" "===b[d];)d++;return{value:parseInt(b.substring(a,d),10),end:d}}function k(a){for(var c=a;c<b.length&&"["!==b[c]&&"]"!==b[c]&&","!==b[c];)c++;return{type:"key",value:b.substring(a,c).trim(),end:c}}function l(a){var c,d,e=b[a],f=b[a+1];return"@"===e?(i=!0,"+"===f||"-"===f?(c=j(a+1,!0),c.end<=a+1?-1:{num:c.value,end:c.end,relative:!0}):{num:0,end:a+1,relative:!0}):"#"===e?(c=j(a+1),c.end>a+1?{num:c.value,end:c.end,relative:!1}:"last"===b.substr(a+1,4)?{num:-1,end:a+5,relative:!1}:"odd"===b.substr(a+1,3)?{type:"odd",end:a+4}:"even"===b.substr(a+1,4)?{type:"even",end:a+5}:-1):"$"===e?(d=k(a+1),d.end>=b.length?-1:d):-1}for(d=null;c<b.length&&(e=b[c],"["!==e&&"]"!==e);)if(d||"@"!==e&&"#"!==e&&"$"!==e)if(","===e&&d)d=!1,c++;else{if(" "!==e)break;c++}else{if(g=l(c),g===-1)return-1;if(":"!==b[g.end]||f.isNullOrUndefined(g.num))a.row.push(g),c=g.end;else{for(c=g.end+1;" "===b[c];)c++;if(h=l(c),h===-1||f.isNullOrUndefined(h.num))return-1;a.row.push([g,h]),c=h.end}d=!0}return a.jOJ=i,d===!1?-1:c},b.prototype.VDJ=function(a,b,c){var d,e,f;function g(a){for(var c=a;"]"!==b[c];)c++;return{str:b.substring(a,c),end:c}}function h(a){for(var c=a;"."!==b[c]&&"]"!==b[c];)c++;return{str:b.substring(a,c),end:c}}for(d=null;c<b.length;)if(e=b[c],"["!==e||d){if("]"===e)break;if(" "===e)c++;else if("."===e&&d)c++,d=!1;else{if("."===e||d)return-1;f=h(c),a.field.push(f.str),c=f.end,d=!0}}else{if(f=g(c+1),f.end<=c+1)return-1;a.field.push(f.str),c=f.end+1,d=!0}return c===b.length-1?c:-1},b.prototype.unparse=function(){return!1},b}(d.TokenResolver),b.DataManagerTokenResolver=h},"./dist/src/dataManager.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/dataSource/dataSource.entry.js"),b),e(c("./dist/src/table/table.entry.js"),b),e(c("./dist/src/viewField/viewField.entry.js"),b),e(c("./dist/src/view/view.entry.js"),b),e(c("./dist/src/interfaces/interface.js"),b),e(c("./dist/src/interfaces/styleOptions.js"),b),e(c("./dist/src/interfaces/validatorOptions.js"),b),e(c("./dist/src/interfaces/conditionalFormatOptions.js"),b),e(c("./dist/src/dataManager.js"),b)},"./dist/src/dataManager.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o;Object.defineProperty(b,"__esModule",{value:!0}),b.isView=b.DataManager=void 0,d=c("CalcEngine"),e=c("./dist/src/table/table.js"),f=c("./dist/src/view/view.js"),g=c("./dist/src/dataSource/utils.js"),h=c("./dist/src/dataSource/dataSource.js"),i=c("./dist/src/calculation/functions/functions.entry.js"),j=c("./dist/src/calculation/tokenResolver.js"),k=c("./dist/src/calculation/queryFunctionResolver.js"),l=c("./dist/src/relationship.js"),m=null,n=d.Convert.Fh,o=function(){function a(a){this.BXJ={},this.tables={},this.relationships=[],this.wQJ={},a||(a=new d.CalcService),this.updateCalcService(a),i.addCustomFunctions()}return a.prototype.addTable=function(a,b){var c=new e.Table(a,b);return this.tables[a]=c,c.ZDJ(this),c},a.prototype.removeTable=function(a){var b,c=this.tables[a],d=this.relationships;for(b=d.length-1;b>=0;b--)d[b].sourceTable!==c&&d[b].targetTable!==c||(d[b].Fb(),d.splice(b,1));c.ZDJ(m),delete this.tables[a]},a.prototype.addRelationship=function(a,b,c,d,e,f){var g=new l.Relationship(a,b,c,d,e,f);return this.relationships.push(g),g},a.prototype.removeRelationship=function(a){var b,c=this.relationships;for(b=0;b<c.length;b++)if(c[b].sourceRelationshipName===a){c[b].Fb(),c.splice(b,1);break}},a.prototype.updateCalcService=function(a){var b,c,d,e=a.getResolvers(),f=!0;for(b=0,c=e;b<c.length;b++)if(d=c[b],d instanceof j.DataManagerTokenResolver){f=!1;break}f&&a.addResolver(new j.DataManagerTokenResolver(8e3)),this.Wu=a},a.prototype.M5J=function(a,b,c){var d,e;return n(a)?a=a.getValueByIndex(0):g.isString(a)||(a=""+a),g.isString(b)?b=[b]:n(b)?b=b.toArray(0,!0):b&&b.array&&(b=b.array[0]),d=a+"-"+(b&&b.join(",")),e=this.wQJ[d],e||(e=this.wQJ[d]=k.QueryFunctionSolver.parseParam(a,b,c,this)),e},a.prototype.uQJ=function(a,b,c,d){var e,f=this.M5J(a,b,c);function g(){d()}return d===!0&&f.table._dataSource.unbind(h.ONCHANGE,g),d&&f.table&&f.table._dataSource.bind(h.ONCHANGE,g),e=f.getValue?f.getValue(f.table):[[]],0===e.length&&(e=[[]]),e},a.prototype.toJSON=function(){var a,b,c=this.tables,d=[];for(a in c)c.hasOwnProperty(a)&&d.push(c[a].toJSON());return b=this.relationships.map(function(a){return{sourceTableName:a.sourceTable.name,sourceFieldName:a.sourceFieldName,sourceRelationshipName:a.sourceRelationshipName,targetTableName:a.targetTable.name,targetFieldName:a.targetFieldName,targetRelationshipName:a.targetRelationshipName}}),{tables:d,relationships:b}},a.prototype.fromJSON=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=this.tables={},q=a.tables;for(b=0,c=q;b<c.length;b++){if(d=c[b],e=d.dataSourceOption.schema,f=e&&e.columns,f)for(g in f)f.hasOwnProperty(g)&&(h=f[g],h&&"date"===h.dataType&&Array.isArray(h.lookup)&&(h.lookup=h.lookup.map(function(a){return new Date(a)})));i=this.addTable(d.name,d.dataSourceOption),i.QWJ=!0,i.fromJSON(d)}for(this.relationships=[],j=a.relationships,k=0,l=j;k<l.length;k++)m=l[k],n=p[m.sourceTableName],o=p[m.targetTableName],this.addRelationship(n,m.sourceFieldName,m.sourceRelationshipName,o,m.targetFieldName,m.targetRelationshipName)},a}(),b.DataManager=o;function p(a){return a instanceof f.View}b.isView=p},"./dist/src/dataSource/dataReader/BasicReader.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.BasicReader=void 0,d=c("./dist/src/dataSource/utils.js"),e=void 0,f=function(){function a(a){var b,c,f,g=this;g.i6=a,d.isNullOrUndefined(a)||(g.HL=a.HL,b=a.dataPath,c=a.countPath,f=a.parse,d.isFunction(b)?g.$DJ=b:g.$DJ=function(a){return d.isString(b)&&b?d.LL(a,b):a},d.isFunction(c)?g._DJ=c:g._DJ=function(a){return d.isString(c)&&c?parseInt(d.LL(a,c),10):e},d.isFunction(f)&&(g.parse=f))}return a.prototype.parse=function(a){return this.aEJ=a,Promise.resolve(a)},a.prototype.read=function(a){return Promise.resolve(this.$DJ(a))},a.prototype.total=function(a){return this._DJ(a)},a}(),b.BasicReader=f},"./dist/src/dataSource/dataReader/ColumnJsonReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.ColumnJsonReader=void 0,d=c("./dist/src/dataSource/dataReader/BasicReader.js"),e=c("./dist/src/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this,d=c,f=b.dataPath;return e.isFunction(f)?d.$DJ=f:d.$DJ=function(a){var b,c,g,h,i,j,k,l;for(a=e.isString(f)?e.LL(a,f):a,b=d.HL=d.HL||e.keys(a),c=d.aEJ=[],g=a[b[0]].length,h=0;h<g;h++){for(i={},j=0,k=b;j<k.length;j++)l=k[j],i[l]=a[l][h];c.push(i)}return c},c}return b.prototype.parse=function(a){var b=this;return new Promise(function(c,d){var f,g;e.isNullOrUndefined(a)&&d("value cannot be null or empty"),f=b.HL=b.HL||e.keys(a),g=e.reduce(f,function(b,c){return b&&e.isArray(a[c])},!0),g||d("The value of each property in column JSON should be an array"),c(a)})},b}(d.BasicReader),b.ColumnJsonReader=f},"./dist/src/dataSource/dataReader/CsvReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CsvReader=void 0,d=c("./dist/src/dataSource/dataReader/BasicReader.js"),e=c("./dist/src/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this;return c.bEJ=b.delimiter||['"'],c.vua=b.separator||",",c}return b.prototype.parse=function(a){for(var b,c,d,f,g=this,h=g.bEJ,i=g.vua,j=a.split(""),k=0,l=j.length,m=[];k<l;){for(d=[];k<l&&"\r"!==j[k]&&"\n"!==j[k];){if(b=c=k,e.indexOf(h,j[k])>-1){for(++k,b=c=k;k<l;){if(e.indexOf(h,j[k])>-1){if(e.indexOf(h,j[k+1])===-1)break;++k,j[k]=""}++k,c=k}for(e.indexOf(h,j[k])>-1&&++k;k<l&&"\r"!==j[k]&&"\n"!==j[k]&&i!==j[k];)++k}else for(;k<l&&"\r"!==j[k]&&"\n"!==j[k]&&i!==j[k];)++k,c=k;d.push(j.slice(b,c).join("")),i===j[k]&&++k}"\r"!==j[k]&&"\n"!==j[k]||++k,d.length>0&&m.push(d)}return f=m.shift(),g.aEJ=e.isNullOrUndefined(g.HL)?e.map(m,function(a){return e.zipObject(f,a)}):e.map(m,function(a){return e.pick(e.zipObject(f,a),g.HL)}),g.HL=g.HL||f,Promise.resolve(g.aEJ)},b}(d.BasicReader),b.CsvReader=f},"./dist/src/dataSource/dataReader/JsonReader.js":function(a,b,c){"use strict";var d,e,f=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.JsonReader=void 0,d=c("./dist/src/dataSource/dataReader/BasicReader.js"),e=function(a){f(b,a);function b(b){return a.call(this,b)||this}return b}(d.BasicReader),b.JsonReader=e},"./dist/src/dataSource/dataReader/XmlReader.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.XmlReader=void 0,d=c("./dist/src/dataSource/dataReader/BasicReader.js"),e=c("./dist/src/dataSource/utils.js"),f=function(a){g(b,a);function b(b){var c=a.call(this,b)||this,d=c,f=b.dataPath;return e.isFunction(f)?d.$DJ=f:d.$DJ=function(a){if(a=e.isString(f)?e.LL(a,f):a,e.isNullOrUndefined(a))return a;var b=d.HL;return b?a=a.map(function(a){return e.pick(a,b)}):c.HL=e.keys(a[0]),a},c}return b.prototype.parse=function(a){var b=new DOMParser,c=b.parseFromString(a.trim(),"text/xml"),d=this.documentToJSObject(c);return Promise.resolve(d)},b.prototype.documentToJSObject=function(a){var b,c,d={},e=a.children;for(b=0,c=e.length;b<c;b++)this.elementToJSObject(e[b],d);return d},b.prototype.elementToJSObject=function(a,b){var c,d,e,f,g,h=a.children,i=h.length,j=a.nodeName;if(0===i)b[j]=a.textContent;else{for(c={},d=b[j],void 0!==d?Array.isArray(d)?b[j].push(c):b[j]=[d,c]:b[j]=c,e=a.attributes,f=0;f<e.length;f++)g=e[f],c[g.nodeName]=g.nodeValue;for(f=0;f<i;f++)this.elementToJSObject(h[f],c)}},b}(d.BasicReader),b.XmlReader=f},"./dist/src/dataSource/dataSource.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/dataSource/dataSource.js"),b),e(c("./dist/src/dataSource/dataSource.interface.js"),b),e(c("./dist/src/dataSource/utils.js"),b)},"./dist/src/dataSource/dataSource.interface.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0})},"./dist/src/dataSource/dataSource.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),z=this&&this.__assign||function(){return z=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},z.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.DataSource=b.HierarchyNode=b.ONCHANGE=b.DELETE=b.UPDATE=b.INSERT=b.CREATE=void 0,d=c("./dist/src/dataSource/dataTransport/localDataTransport.js"),e=c("./dist/src/dataSource/dataTransport/remoteDataTransport.js"),f=c("./dist/src/dataSource/event.js"),g=c("./dist/src/dataSource/dataReader/JsonReader.js"),h=c("./dist/src/dataSource/dataReader/ColumnJsonReader.js"),i=c("./dist/src/dataSource/dataReader/CsvReader.js"),j=c("./dist/src/dataSource/dataReader/XmlReader.js"),k=c("./dist/src/dataSource/utils.js"),l=c("Common"),m=null,n=void 0,b.CREATE="create",b.INSERT="insert",b.UPDATE="update",b.DELETE="delete",o="onBeforeSend",p="onFailed",q="onBeforeEnd",r="onReady",s="user cancel the request at step ",b.ONCHANGE="onChange",t=Number.NaN,u="__HIERARCHY__";function A(a){return""+u+a}function B(a){return"string"==typeof a&&a.indexOf(u)>-1}function C(a){return B(a)?n:a}function D(a,b){var c=b;return"odata"!==a&&"odata4"!==a||!b.value?"graphql"!==a&&"rest"!==a||!b.data||(c=b.data):c=b.value,c}function E(a,b){var c,d,e={};for(c in a)a.hasOwnProperty(c)&&(d=b[c],e[c]=k.isNullOrUndefined(d)?a[c]:d);return e}function F(a,b,c,d,e){var f,g,h,i,j,k,l;for("string"==typeof c?f=g=c:(f=c.childrenField1||"children",g=c.childrenField2||"children"),h=a[f]||[],i=b[g]||[],j=0;j<h.length;j++)k=h[j],l=i[j],d&&d(k,l,a,b),F(k,l,c,d,e),e&&e(k,l,a,b)}function G(a,b){var c,d,e,f,g;if(k.isNullOrUndefined(a)||k.isNullOrUndefined(b))return a===b;if(c=Object.keys(a),d=Object.keys(b),c.length!==d.length)return!1;for(e=0,f=c;e<f.length;e++)if(g=f[e],a[g]!==b[g])return!1;return!0}function H(a,b){var c,d,e,f=[];for(c=0;c<b;c++){d={};for(e in a)a.hasOwnProperty(e)&&(d[e]=a[e].data[c]);f[c]=d}return f}function I(a){return"xml"===a?"xml":"csv"===a?"text":"json"}function J(a){var b,c,d,e,f,g,h=null===(b=a.schema)||void 0===b?void 0:b.type,i=a.remote;h&&i&&(c=i.read,c&&"object"==typeof c&&(c.dataType=I(h)),d=i.update,d&&"object"==typeof d&&(d.dataType=I(h)),e=i.delete,e&&"object"==typeof e&&(e.dataType=I(h)),f=i.create,f&&"object"==typeof f&&(f.dataType=I(h)),g=i.batch,g&&"object"==typeof g&&(g.dataType=I(h)))}v=function(){function a(){}return a}(),w=function(a){y(b,a);function b(b){var c,d=a.call(this)||this;return d.oi=[],c=d,c._data=b.data,c.Yzc=b.isRoot,c.U5J=b.getData,c.V5J=b.getFieldData,c.W5J=b.idField,c.X5J=!k.isNullOrUndefined(b.idField),c.Y5J=b.sequenceField,c.Z5J=!k.isNullOrUndefined(b.sequenceField),Object.defineProperty(c,"data",{get:function(){return c.U5J(c.mi)}}),Object.defineProperty(c,"isRoot",{get:function(){return c.Yzc}}),Object.defineProperty(c,"id",{get:function(){if(c.X5J){var a=c.V5J(c.W5J,c.mi);return k.isNullOrUndefined(a)?a=c._id:c._id!==a&&(c._id=a),a}return c._id},set:function(a){c._id=a,k.isNullOrUndefined(c.P7J)&&(c.P7J=a)}}),Object.defineProperty(c,"parentId",{get:function(){return k.isNullOrUndefined(c.parent)?n:c.parent.id}}),Object.defineProperty(c,"parent",{get:function(){return c.hqa},set:function(a){c.setParent(a),k.isNullOrUndefined(c.Q7J)&&!k.isNullOrUndefined(a)&&(c.Q7J=a.id)}}),Object.defineProperty(c,"level",{get:function(){return c.aN},set:function(a){c.aN=a}}),Object.defineProperty(c,"children",{get:function(){return c.oi},set:function(a){c.oi=a}}),Object.defineProperty(c,"sequence",{get:function(){return c.Z5J?c.V5J(c.Y5J,c.mi):c.$5J},set:function(a){c.$5J=a,k.isNullOrUndefined(c.R7J)&&(c.R7J=a)}}),d}return b.prototype.M9J=function(){return this.$5J},b.prototype.setParent=function(a,b){var c=!k.isNullOrUndefined(this.parent);c&&this.parent.a6J(this),this.hqa=a,k.isNullOrUndefined(a)?c&&(this.level=t):(this.level=a.level+1,k.isNullOrUndefined(b)?a.b6J(this):a.c6J(this,b))},b.prototype.updateChildrenLevel=function(){var a=this.level;this.children.forEach(function(b){b.level=a+1,b.updateChildrenLevel()})},b.prototype.promote=function(a){this.setParent(a,this.parent.getCurrentIndex()+1),this.updateChildrenLevel()},b.prototype.demote=function(a,b){this.parent=a,b=b!==!1,b?this.updateChildrenLevel():this.children.forEach(function(b){b.parent=a})},b.prototype.getCurrentIndex=function(){return this.parent.children.indexOf(this)},b.prototype.getPrevSibling=function(){return this.parent.children[this.getCurrentIndex()-1]},b.prototype.getNextSibling=function(){return this.parent.children[this.getCurrentIndex()+1]},b.prototype.c6J=function(a,b){this.children.splice(b,0,a)},b.prototype.b6J=function(a){this.children.push(a)},b.prototype.a6J=function(a){var b=this.children.indexOf(a);this.children.splice(b,1)},b.prototype.getChildrenIndexes=function(a){var b=[];return k.traversalTree(this,{invoked:function(a){b.push(a.mi)}},a?function(a){return-a.sequence}:n),b},b.prototype.getFieldValue=function(a){return this.V5J(a,this.mi)},b}(v),b.HierarchyNode=w,x=function(){function a(a){this.JMJ={},this.d6J=[],this.UlK=!0;var c=this;Object.defineProperty(this,"options",{get:function(){return c.i6},set:function(a){var b,d,e,f,g,h,i,j;J(a),b=c.i6,c.i6=a,d=b&&b.remote&&b.remote.read&&b.remote.read.url,e=a&&a.remote&&a.remote.read&&a.remote.read.url,f=d!==e,c._VJ(a.remote,a.data),g=b&&b.schema,h=a&&a.schema,i=g&&h&&(g.type!==h.type||g.dataPath!==h.dataPath||g.countPath!==h.countPath),i&&c.aWJ(a.schema),j=c.FWJ,j&&(f||i)&&(c.bWJ(),c.load())}}),c._events={},c.options=z({data:m,batch:!1},a),this._VJ(a.remote,a.data),c.bind([o,q,r,b.ONCHANGE,p],a),this.aWJ(a.schema),c.bWJ()}return a.prototype._VJ=function(a,b){this.cEJ=a?new e.RemoteDataTransport(a):new d.LocalDataTransport({data:b||[]})},a.prototype.aWJ=function(a){var b,c;a=a||{},c=a.type||"json","json"===c?b=new g.JsonReader(a):"columnJson"===c?b=new h.ColumnJsonReader(a):"csv"===c?b=new i.CsvReader(a):"xml"===c&&(b=new j.XmlReader(a)),
this.dEJ=b},a.prototype.bWJ=function(){this._data={},this.FMJ=0,this.U=[]},a.prototype.GMJ=function(a,b,c){var d,e,f,g=this,h={};for(d in g._data)g._data.hasOwnProperty(d)&&(e=g._data[d],0!==b?(f=e.data.splice(a,b),h[d]={data:f}):a>=e.data.length?e.data[a]=c[d]:e.data.splice(a,0,c[d]));return g.FMJ=g.FMJ-b,c&&g.FMJ++,H(h,b)},a.prototype.HMJ=function(a,b){var c,d,e=this,f={};for(c in e._data)e._data.hasOwnProperty(c)&&(d=e._data[c],f[c]={data:d.data.slice(a,b)});return H(f,b-a)},a.prototype.IMJ=function(a,b,c){var d,e;if(!k.isNullOrUndefined(b))if(d=this,c)for(e in b)Object.prototype.hasOwnProperty.call(d._data,e)&&(d._data[e].data[a]=b[e]);else for(e in d._data)d._data.hasOwnProperty(e)&&(d._data[e].data[a]=b[e])},a.prototype.ojb=function(a){var b,c=this,d={};for(b in c._data)c._data.hasOwnProperty(b)&&(d[b]=c._data[b].data[a]);return d},a.prototype.eEJ=function(a){var b,c,d;return!(!a||!a.reload)||(b=this,c=this.fEJ,d=b.FMJ,0===d||(k.isNullOrUndefined(c)||d!==c,!1))},a.prototype.gBa=function(a,b){var c,d=this.JMJ;return d[a]||(c=void 0,b?c=l.Common.l.Qa(a,b):(c=new Date(a),isNaN(c)&&(c=new Date(a.replace(" ","T")))),d[a]=c),d[a]},a.prototype.WMJ=function(a,b){return b?0===b.split("|").indexOf(a):!!a},a.prototype.XMJ=function(a,b){return b&&(a=a.replace(b,".")),a=a.replace(/,/g,""),+a||0},a.prototype.YMJ=function(a,b,c,d){if("rowOrder"===b)return a;if(d){if(!b||"number"===b)return a;a+=""}return"date"===b?"NULL"===a||""===a?null:this.gBa(a,c):"boolean"===b?this.WMJ(a,c):"number"===b?this.XMJ(a,c):a},a.prototype.o_J=function(a,b){var c="number"==typeof a;return k.isNullOrUndefined(b)||k.isNullOrUndefined(a)||"string"!=typeof a&&!k.isNumber?a:this.YMJ(a,b.dataType,b.dataPattern,c)},a.prototype.KMJ=function(a,b){var c,d,e,f;for(c in a)if(a.hasOwnProperty(c)&&(d=a[c])){if(e=b[c],f="number"==typeof e,k.isNullOrUndefined(e)||"string"!=typeof e&&!f)continue;b[c]=this.YMJ(e,d.dataType,d.dataPattern,f)}},a.prototype.ZMJ=function(a,b,c){var d,e,f,g=this._data[a].data;for(d=0;d<g.length;d++)e=g[d],f="number"==typeof e,k.isNullOrUndefined(e)||"string"!=typeof e&&!f||(g[d]=this.YMJ(e,b,c,f));this.isHierarchy()&&"rowOrder"===b&&(this.UlK=!0)},a.prototype.f4J=function(a,b){var c,d;a===b||k.isNullOrEmpty(b)||(c=this,c._data[b]=c._data[a],delete c._data[a],d=c.b4J(a),c.c4J(a,k.isNullOrEmpty(d)?a:d,b))},a.prototype.b4J=function(a){var b=this,c=b.i6.schema,d,e,f;if(!(k.isNullOrUndefined(c)||k.isNullOrUndefined(c.columns)||(d=c.columns,e=d[a],k.isNullOrUndefined(e)||(f=e.dataName,k.isNullOrEmpty(f)))))return f},a.prototype.c4J=function(a,b,c){var d=this,e=d.i6.schema,f,g;k.isNullOrUndefined(e)&&(d.i6.schema=e={}),f=e.columns,k.isNullOrUndefined(f)&&(e.columns=f={}),g=f[a],k.isNullOrUndefined(g)&&(f[a]=g={}),k.isNullOrEmpty(g.dataName)&&(g.dataName=b),k.isNullOrEmpty(c)||(f[c]=f[a],delete f[a])},a.prototype.e6J=function(a){var b=this;return a=b.p_J(a,{isServerToClient:!0})},a.prototype.f6J=function(a){var b=this;return a=k.clone(a,!0),b.g6J(a),a=b.p_J(a)},a.prototype.p_J=function(a,b){var c,d,e,f,g,h,i;if(b=b||{},c=this,d=c.i6.schema,e=b.isServerToClient,f=b.isClone,!k.isNullOrUndefined(a)&&!k.isNullOrUndefined(d)&&!k.isNullOrUndefined(d.columns)){g=d.columns,h=[];for(i in g)k.isNullOrUndefined(g[i].dataName)||g[i].dataName===i||h.push(e?[g[i].dataName,i]:[i,g[i].dataName]);h.length>0&&(a=f?k.clone(a,!0):a,k.isArray(a)?a.forEach(function(a){c.q_J(h,a)}):k.isObject(a)&&c.q_J(h,a))}return a},a.prototype.q_J=function(a,b){a.forEach(function(a){var c=a[0],d=a[1];b[d]=b[c],delete b[c]})},a.prototype.r_J=function(){var a,b,c,d,e=this,f=e.i6.schema;if(!k.isNullOrUndefined(f)&&!k.isNullOrUndefined(f.columns)){a=f.columns,b={},c={};for(d in a)a.hasOwnProperty(d)&&(k.isNullOrUndefined(a[d].dataName)||(b[a[d].dataName]=d),(a[d].dataType||a[d].dataPattern)&&(c[d]={dataType:a[d].dataType,dataPattern:a[d].dataPattern}));return[b,c]}return[{},{}]},a.prototype.h6J=function(){var a,b,c,d=this,e=d.i6.schema,f=[];if(!k.isNullOrUndefined(e)&&!k.isNullOrUndefined(e.columns)){a=e.columns;for(b in a)a.hasOwnProperty(b)&&(c=a[b],c.isPrimaryKey&&f.push(b))}return f},a.prototype.g6J=function(a){var b,c,d,e=this;!k.isNullOrUndefined(a)&&e.isHierarchy()&&"Level"===e.i6J()&&(b=e.j6J(),k.isNumber(b)&&(c=e.k6J(),d=a[c],a[c]=d-b))},a.prototype.l6J=function(a){var b=this,c=b.d6J;return c.map(function(b,c){b.mi=c,a||(b.sequence=c+1);var d=b._data;return b._data=n,d})},a.prototype.m6J=function(a){var b=this,c=b.n6J,d=b.d6J=[];return k.traversalTree(c,function(a){a.level=a.parent.level+1,d.push(a)},a?{isOrderChildren:!0,getValue:function(a){return a.$5J}}:n),b.l6J(a)},a.prototype.o6J=function(a,b,c,d,e){var f,g,h,i,j,l,m,n,o=this,p=!k.isNullOrEmpty(d),q=b,r=d;for(b=o.p6J(b),c=o.p6J(c),d=o.p6J(d),f={},g=0;g<a.length;g++)h=a[g],i=new w(o.q6J({data:h,idField:q,sequenceField:r})),j=h[b],i.id=j,f[j]=i,p&&(i.sequence=h[d]);for(l=new w({isRoot:!0}),l.level=e-1,g=0;g<a.length;g++)j=a[g][b],m=a[g][c],i=f[j],n=f[m],k.isNullOrUndefined(n)?(l.id=m,i.parent=l):i.parent=n;return o.n6J=l,o.m6J(p)},a.prototype.r6J=function(a,b,c,d,e){var f,g,h,i,j,l,m,o,p,q=this,r=!k.isNullOrEmpty(d),s=b,t=d;for(b=q.p6J(b),c=q.p6J(c),d=q.p6J(d),f=n,g=0;g<a.length;g++)h=a[g][c],(h<f||f===n)&&(f=h);for(i=q.n6J=new w({isRoot:!0}),i.level=f+e-1,j=[i],g=0;g<a.length;g++){for(l=a[g],m=new w(q.q6J({data:l,idField:s,sequenceField:t})),o=k.isNullOrEmpty(b)?A(g):l[b],h=l[c]+e,m.id=o,r&&(m.sequence=l[d]),p=j[j.length-1];p.level>=h;)p=j.pop().parent;m.parent=p,j.push(m)}return q.m6J(r)},a.prototype.s6J=function(a,b,c,d,e){var f,g,h,i=this,j=i.d6J=[],l=!k.isNullOrEmpty(d),m=b,o=d;return b=i.p6J(b),c=i.p6J(c),d=i.p6J(d),g=i.n6J=new w({isRoot:!0}),g.level=e-1,h=[g],k.traversalTree((f={},f[c]=a,f),{invoking:function(a){var c=new w(i.q6J({data:a,idField:m,sequenceField:o}));c.id=k.isNullOrEmpty(b)?A(j.length):a[b],l&&(c.sequence=a[d]),c.parent=h[h.length-1],j.push(c),h.push(c)},invoked:function(){h.pop()}},l?d:n,c),i.l6J(l)},a.prototype.t6J=function(a,b,c,d,e,f){var g,h,i,j,l,m,n,o,p,q=this,r=!k.isNullOrEmpty(e),s=b,t=e;for(b=q.p6J(b),c=q.p6J(c),e=q.p6J(e),g={},h=0;h<a.length;h++)i=a[h],j=new w(q.q6J({data:i,idField:s,sequenceField:t})),l=i[c],j.id=k.isNullOrEmpty(b)?A(h):i[b],g[l]=j,r&&(j.sequence=i[e]);for(m=q.r_J(),n=new w({isRoot:!0}),n.level=f-1,h=0;h<a.length;h++)l=a[h][c],j=g[l],o=d(q.S7J(a[h],m,h)),p=g[o],k.isNullOrUndefined(p)?j.parent=n:j.parent=p;return q.n6J=n,q.m6J(r)},a.prototype.S7J=function(a,b,c){var d=this,e={index:c};return Object.defineProperty(e,"data",{get:function(){var c,e=b[0],f=b[1],g={},h=function(b){var c,h;a.hasOwnProperty(b)&&(c=a[b],h=e[b]||b,Object.defineProperty(g,h,{get:function(){return d.o_J(c,f[h])}}))};for(c in a)h(c);return g}}),e},a.prototype.q6J=function(a){var b=this;return{data:a.data,idField:a.idField,sequenceField:a.sequenceField,getData:b.ojb.bind(b),getFieldData:b.u6J.bind(b)}},a.prototype.v6J=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=n.i6.schema;return n.isHierarchy()&&(c=o.hierarchy.type.trim(),d=null===(b=o.hierarchy.column)||void 0===b?void 0:b.trim(),e=o.hierarchy.levelOffset||0,f=n.h6J(),g=n.w6J(a),"Parent"===c?(h=f[0],i=d,a=n.o6J(a,h,i,g,e)):"Level"===c?(h=f[0],j=d,a=n.r6J(a,h,j,g,e)):"ChildrenPath"===c?(h=f[0],k=d,a=n.s6J(a,h,k,g,e)):"Custom"===c&&(h=f[0],l=d,m=o.hierarchy.parse,a=n.t6J(a,h,l,m,g,e)),n.N9J(),n.UlK=!1),a},a.prototype.N9J=function(){var a,b,c=this,d=c.w6J(),e=c.d6J.slice();for(k.isNullOrEmpty(d)||e.sort(function(a,b){return a.M9J()-b.M9J()}),a=0;a<e.length;a++)b=e[a],b.prev=e[a-1],b.next=e[a+1]},a.prototype.w6J=function(a){var b,c,d,e=this,f=e.i6.schema;if(!k.isNullOrUndefined(f)&&!k.isNullOrUndefined(f.columns)){b=f.columns;for(c in b)if(Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],"rowOrder"===d.dataType&&(d.EhK||e.FhK(c,a))))return d.EhK=!0,c}},a.prototype.FhK=function(a,b){var c,d,e;if(!k.isNullOrUndefined(a)&&k.isArray(b)){if(0===b.length)return!0;for(c=this,a=c.p6J(a),d=0;d<b.length;d++)if(e=b[d][a],!k.isNullOrUndefined(e))return k.isNumber(e)}},a.prototype.C7J=function(){var a=this;return!!a.isHierarchy()&&("Parent"!==a.i6J()||!k.isNullOrUndefined(a.w6J()))},a.prototype.AaK=function(){return this.options.schema.hierarchy.summaryFields},a.prototype.j6J=function(){return this.options.schema.hierarchy.levelOffset},a.prototype.x6J=function(){return this.options.schema.hierarchy.unparse},a.prototype.k6J=function(){return this.options.schema.hierarchy.column},a.prototype.i6J=function(){return this.options.schema.hierarchy.type},a.prototype.y6J=function(){var a=this.h6J(),b=a[0];return b},a.prototype.isHierarchy=function(){var a,b,c=this.options.schema;return!k.isNullOrUndefined(c)&&!k.isNullOrUndefined(c.hierarchy)&&!k.isNullOrUndefined(null===(a=c.hierarchy.type)||void 0===a?void 0:a.trim())&&!k.isNullOrUndefined(null===(b=c.hierarchy.column)||void 0===b?void 0:b.trim())&&("Custom"!==c.hierarchy.type||k.isFunction(c.hierarchy.parse)&&k.isFunction(c.hierarchy.unparse))},a.prototype.VlK=function(){return this.UlK},a.prototype.WlK=function(){this.UlK=!0},a.prototype.z6J=function(a){var b=this;return a=b.lEJ(a),b.A6J(a)},a.prototype.A6J=function(a){var b=this,c=b.d6J;return c[a]},a.prototype.B6J=function(){return this.n6J},a.prototype.BaK=function(a){var b=this,c=b.AaK();if(!k.isNullOrUndefined(c))return c[a]},a.prototype.CaK=function(a,b){var c,d=this,e=d.BaK(a);if(!k.isNullOrEmpty(e)&&(c=d.z6J(b),!k.isNullOrUndefined(c)&&c.children.length>0))return e},a.prototype.p6J=function(a){var b,c,d=this,e=d.i6.schema;if(!k.isNullOrUndefined(e)&&!k.isNullOrUndefined(e.columns)){b=e.columns;for(c in b)if(c===a)return b[c].dataName||a}return a},a.prototype.C6J=function(a,b,c){var d=this;return d.D6J(c,k.isNumber(a)?d.lEJ(a):a,d.lEJ(b))},a.prototype.D6J=function(a,b,c){var d=this,e=d.d6J,f=d.w6J(),g,h=function(a){return d.isHierarchy()?d.d6J[a].sequence:d._data[f].data[a]};return a?(b=e[c].next&&e[c].next.mi,k.isNullOrUndefined(b)?(g=h(c),Math.floor(g)===g?g+=.5:g=(g+Math.ceil(g))/2):g=(h(c)+h(b))/2):(b=e[c].prev&&e[c].prev.mi,k.isNullOrUndefined(b)?(g=h(c),g=g<=1?g/2:g-.5):g=(h(b)+h(c))/2),g},a.prototype.E6J=function(a,b,c,d){var e,f,g,h,i,j,l,m,o,p,q,r,s,t,u=this,v=u.w6J(),w=u.isHierarchy();if(k.isNullOrUndefined(v)&&!w||b===c||k.isNullOrUndefined(b)||k.isNullOrUndefined(c))return!1;if(c=u.lEJ(c),d=k.isNumber(d)?u.lEJ(d):d,h=u.lEJ(b),i=u.d6J,j=i[h],l=i[c],w){if(l.parent!==j.parent)return!1;m=j.parent.children,o=m.indexOf(j),p=m.indexOf(l),q=0,a=o<p,a?(q=null===(f=j.getNextSibling())||void 0===f?void 0:f.mi,m.splice(p+1,0,j),m.splice(o,1)):(q=h,m.splice(o,1),m.splice(p,0,j)),"Custom"===u.i6J()&&u.H6J(q),k.isNullOrUndefined(d)||(r=i[d],s=j.parent===r,t=j.parent.parent===r.parent,(s||t)&&(d=n))}return g=u.D6J(a,d,c),w&&k.isNullOrUndefined(v)&&(j.sequence=g),u.O9J(a,c,h),u.T7J(h,(e={},e[v]=g,e)),!0},a.prototype.O9J=function(a,b,c){var d,e,f=this,g=f.isHierarchy();g&&(d=f.A6J(k.isNumber(c)?c:f.d6J.length-1),e=f.A6J(b),k.isNullOrUndefined(d.prev)||(d.prev.next=d.next),k.isNullOrUndefined(d.next)||(d.next.prev=d.prev),a?(d.prev=e,d.next=e.next,k.isNullOrUndefined(e.next)||(e.next.prev=d),e.next=d):(d.next=e,d.prev=e.prev,k.isNullOrUndefined(e.prev)||(e.prev.next=d),e.prev=d))},a.prototype.MaK=function(a,b){var c,d=this,e=d.isHierarchy();if(e)for(b=b||1,c=0;c<b;c++)d.NaK(c+a)},a.prototype.NaK=function(a){var b=this,c=b.A6J(a);k.isNullOrUndefined(c.prev)||(c.prev.next=c.next),k.isNullOrUndefined(c.next)||(c.next.prev=c.prev)},a.prototype.F6J=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(this.isHierarchy()&&(e=this,f=e.d6J,g=e.k6J(),a=e.lEJ(a),h=f[a],!h.parent.isRoot)){for(i=e.i6J(),j=h.parent.children.slice(h.getCurrentIndex()+1),k=h.parent.parent,h.promote(k),"Parent"===i?e.T7J(a,(b={},b[g]=C(h.parentId),b)):"Level"===i&&e.G6J(a),l=0,m=j;l<m.length;l++)n=m[l],n.parent=h,o=n.mi,"Parent"===i?e.T7J(o,(c={},c[g]=h.id,c)):"Level"===i&&e.T7J(o,(d={},d[g]=n.level,d));"Custom"===i&&e.H6J(a)}},a.prototype.I6J=function(a,b){this.LaK(a,b)},a.prototype.LaK=function(a,b,c){var d,e,f,g,h,i,j,l,m,n;this.isHierarchy()&&(b=b!==!1,g=this,h=g.d6J,i=g.k6J(),a=c?a:g.lEJ(a),j=h[a],l=j.getPrevSibling(),k.isNullOrUndefined(l)||(m=j.children.slice(),j.demote(l,b),n=g.i6J(),b?"Parent"===n?g.T7J(a,(d={},d[i]=C(j.parentId),d)):"Level"===n?g.G6J(a):"Custom"===n&&g.H6J(a):"Parent"===n?(g.T7J(a,(e={},e[i]=C(j.parentId),e)),m.forEach(function(a){var b;g.T7J(a.mi,(b={},b[i]=C(j.parentId),b))})):"Level"===n?g.T7J(a,(f={},f[i]=h[a].level,f)):"Custom"===n&&g.H6J(a)))},a.prototype.T7J=function(a,b,c,d){this.U7J(a,b,c,d)},a.prototype.U7J=function(a,c,d,e){var f=this;f.aMJ({action:b.UPDATE,index:a,item:c,t_J:!0,V7J:!0}),d&&d({type:b.UPDATE,success:!0})},a.prototype.G6J=function(a,b,c){var d,e,f,g=this,h=g.d6J,i=g.k6J(),j=h[a].getChildrenIndexes().concat(a);for(e=0;e<j.length;e++)f=j[e],g.T7J(f,(d={},d[i]=h[f].level,d),b,c)},a.prototype.H6J=function(a,b,c){var d=this,e=!1,f=d.k6J();k.traversalTree(d.n6J,function(g){var h,i,j,l;a===g.mi&&(e=!0),e&&(i=g,j=g.mi,l=d.J6J(i),k.isNullOrUndefined(l)||d.T7J(j,(h={},h[f]=l,h),b,c))})},a.prototype.J6J=function(a){var b=this,c=b.k6J(),d=b.x6J(),e=a.data,f=e[c],g=d(b.W7J(a));if(f!==g)return g},a.prototype.W7J=function(a){var b={};return Object.defineProperty(b,"data",{get:function(){return a.data}}),Object.defineProperty(b,"index",{get:function(){return a.getCurrentIndex()}}),Object.defineProperty(b,"parentData",{get:function(){return a.parent.isRoot?m:a.parent.data}}),b},a.prototype.K6J=function(a,b,c){var d=this,e=d.A6J(a);return d.L6J(e.parent,b?e.getCurrentIndex():e.getCurrentIndex()+1,c)},a.prototype.M6J=function(a){var b=this,c=b.A6J(a),d=c.getPrevSibling(),e;return e=k.isNullOrUndefined(d)?b.D6J(!1,n,c.mi):b.D6J(!1,d.mi,c.mi),{sequence:e,offset:0}},a.prototype.N6J=function(a,b){var c,d,e=this;return a=e.lEJ(a),c=e.M6J(a).sequence,d=e.K6J(a,!0,b),d.sequence=c,e.O9J(!1,a),d},a.prototype.O6J=function(a){var b=this,c=b.A6J(a),d=c.getNextSibling(),e;return e=k.isNullOrUndefined(d)?b.D6J(!0,n,c.mi):b.D6J(!0,d.mi,c.mi),{sequence:e,offset:b.P6J(c)}},a.prototype.Q6J=function(a,b){var c,d,e=this;return a=e.lEJ(a),c=e.O6J(a).sequence,d=e.K6J(a,!1,b),d.sequence=c,e.O9J(!0,a),d},a.prototype.R6J=function(a,b){var c,d,e=this;return a=e.lEJ(a),c=e.M6J(a).sequence,d=e.K6J(a,!0,b),d.sequence=c,e.LaK(a,!0,!0),e.O9J(!1,a),d},a.prototype.S6J=function(a){var b,c,d,e=this,f=e.A6J(a),g=f.children;return g.length>0?(d=g[g.length-1],b=e.D6J(!0,n,d.mi),c=e.P6J(f)):(b=e.D6J(!0,n,f.mi),c=1),{sequence:b,offset:c}},a.prototype.T6J=function(a,b){var c,d,e=this;return a=e.lEJ(a),c=e.S6J(a).sequence,d=e.K6J(a,!1,b),d.sequence=c,e.P9J(e.d6J.length-1),e.O9J(!0,a),d},a.prototype.P9J=function(a){var b=this,c=b.A6J(a),d=c.getPrevSibling();k.isNullOrUndefined(d)||c.demote(d)},a.prototype.L6J=function(a,b,c){var d=this,e=d.d6J,f=d.y6J(),g=d.w6J(),h=new w(d.q6J({idField:f,sequenceField:g})),i=d.FMJ+1;return k.isNullOrUndefined(c)||k.isNullOrUndefined(c[f])?h.id=A(i):h.id=c[f],h.mi=i-1,h.setParent(a,b),e.push(h),h},a.prototype.Q9J=function(a){var b,c,d,e,f,g=this,h=g.w6J(),i=g.k6J(),j=g.i6J();return"Parent"===j?(b={},b[i]=C(a.parentId),e=b):"Level"===j?(c={},c[i]=a.level,e=c):"Custom"===j&&(f=g.J6J(a),k.isNullOrUndefined(f)||(d={},d[i]=f,e=d)),k.isNullOrEmpty(h)||(e=e||{},e[h]=a.M9J()),e},a.prototype.V6J=function(a,b,c){var d,e,f=this,g=f.z6J(a);return b?(e=g.getNextSibling(),k.isNullOrUndefined(e)||(d=c===!1?e:g)):d=c===!1?g:g.getPrevSibling(),f.P6J(d)},a.prototype.P6J=function(a){var b,c=1,d=function(a){return a.children.reduce(function(a,b){return a+d(b)},a.children.length)};return k.isNullOrUndefined(a)?0:(b=d(a),b+c)},a.prototype.W6J=function(a){var b=this,c=b.z6J(a);return b.P6J(c)},a.prototype.X6J=function(a){var b,c,d=this;d.isHierarchy()&&(b=d.y6J(),!k.isNullOrUndefined(b)&&B(a[b])&&(a[b]=n),"Parent"===d.i6J()&&(c=d.k6J(),B(a[c])&&(a[c]=n)))},a.prototype.Y6J=function(a){var b,c,d,e,f,g=this;g.isHierarchy()&&"Parent"===g.i6J()&&(b=g.y6J(),k.isNullOrUndefined(b)||(c=g.A6J(a),d=c.children,e=c.id=c.P7J=g.u6J(b,a),f=g.k6J(),d.forEach(function(a){var b;a.Q7J=e,g.updateItemValues(a.mi,(b={},b[f]=e,b))})))},a.prototype.load=function(a){var c=this,d=c.options.remote,e=c.gEJ(a);return c.eEJ(e)?(c.FWJ=!0,c.Vpb(e).then(function(a){var b={type:"read",data:d&&d.read&&!k.isFunction(d.read)?D(d.read.adapter,a):a};return c.Wq(q,b)?Promise.reject({cancel:!0,type:"read",step:o}):c.dEJ.parse(b.data)}).then(function(a){return c.fEJ=c.dEJ.total(a),c.dEJ.read(a)}).then(function(a){var d,f,g,h,i,j,l,m;if(c._data=c._data||{},c.FMJ=c.FMJ||0,c.U=c.U||[],a){for(a=k.isArray(a)?a:[a],a=c.v6J(a),d=0,f=c.r_J(),g=f[0],h=f[1],i=0,j=a.length;i<j;i++)for(l in a[i])m=a[i][l],l=g[l]||l,c._data[l]||(c._data[l]={data:[]},c.U.push(l)),c._data[l].data[d+i]=c.o_J(m,h[l]);c.FMJ=d+a.length,a=c.iEJ(e).data,c.Wq(b.ONCHANGE,{action:b.INSERT,index:d,items:a})}return c.fEJ=c.FMJ,c.Wq(r,{type:"read",success:!0,items:a}),a}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:c.jEJ(a);return c.Wq(r,{type:"read",success:!1,reason:b}),Promise.reject(b)})):Promise.resolve(c.iEJ(e).data)},a.prototype.length=function(){return"number"==typeof this.fEJ?this.fEJ:this.FMJ},a.prototype.setLength=function(a){var b=this,c=b._data,d=b.fEJ;d?this.fEJ=a:c&&(this.FMJ=a)},a.prototype.iEJ=function(a){var b,c=this,d=c.kEJ(),e=0,f=c.FMJ,g=d?c.lEJ(e):0,h=c.mEJ||[];for(d||(h=[]),b=[];f>0&&g<c.FMJ;)h[g]||(b.push(c.ojb(g)),f--),g++;return{data:b}},a.prototype.WNJ=function(a,b){var c,d,e=this,f=e.kEJ(),g=0,h=e.FMJ,i=f?e.lEJ(g):0,j=e.mEJ||[];for(f||(j=[]),c=[],d=0;h>0&&i<e.FMJ;)j[i]||(a.indexOf(d)>-1&&(c[d]=e.ojb(i)),d++,h--),i++;return{data:c}},a.prototype.nEJ=function(a){return a?this.WNJ(a).data:this.iEJ().data},a.prototype.lmK=function(a,b){var c,d,e,f,g,h,i,j=this,l=j.i6J(),m=[];if(k.isNullOrUndefined(b)||a.length!==b.length)return m;if("Level"===l)for(f=0;f<a.length;f++)g=a[f],m.push(E(g,b[f]));else"ChildrenPath"===l&&(h=j.p6J(j.k6J()),i=[(c={},c[h]=m,c)],F((d={},d[h]=a,d),(e={},e[h]=b,e),h,function(a,b){var c,d=E(a,b);delete d[h],c=i[i.length-1],k.isArray(c[h])||(c[h]=[]),c[h].push(d),i.push(d)},function(){i.pop()}));return m},a.prototype.mmK=function(a){var b,c,d,e,f,g,h,i,j,l,m,n,o,p,q,r=this,s=r.i6J();if(!k.isNullOrUndefined(a)){if(e=r.B6J(),h=r.k6J(),"Level"===s){for(f="children",j=r.p6J(h),b={},b[f]=[],b.data={},g=b,l=[g],m=0;m<a.length;m++){for(n=a[m],o=n[j],p=l[l.length-1];p.data.level>=o;)l.pop(),p=l[l.length-1];c={data:n},c[f]=[],q=c,p[f].push(q),l.push(q)}i=function(a){return a.data}}else"ChildrenPath"===s&&(f=h,d={},d[f]=a,g=d,i=function(a){return a});F(e,g,{childrenField2:f},function(a,b){r.e6J(i(b)),r.IMJ(a.mi,i(b))})}},a.prototype.Z6J=function(a,b,c,d){var e=this;return e.qEJ({body:a},b).then(function(d){var f,g="batch"===b,h={type:b,batch:g,data:e.lmK(a,d)};return e.Wq(q,h)?Promise.reject({cancel:!0,type:b,batch:g,step:q}):(a=h.data,e.mmK(a),f={type:b,success:!0,batch:g,items:k.isArray(a)?a:[a]},delete e.pEJ,delete e.mEJ,delete e.oEJ,delete e.w9J,c&&c(f),e.Wq(r,f),g?Promise.resolve(e.iEJ()):n)}).catch(function(a){var c=a&&a.cancel===!0?s+a.step:e.jEJ(a),f={type:b,success:!1,reason:c};e.Wq(p,{type:f}),d&&d(f)})},a.prototype.$6J=function(){var a,b=this;if(b.isHierarchy())return a=b.i6J(),"Level"===a||"ChildrenPath"===a},a.prototype._6J=function(a,b,c,d){var e,f,g,h,i,j,l,m=this,n=m.i6J();return b=b||m.mEJ||[],"Level"===n?(f=m.B6J(),g=[],k.traversalTree(f,function(c){var d,e=c.mi;b[e]||(d=m.ojb(e),("create"===a||"batch"===a&&m.isInserted(e,!0))&&m.X6J(d),d=m.f6J(d),g.push(d))}),m.Z6J(g,a,c,d)):"ChildrenPath"===n?(f=m.B6J(),h=m.k6J(),i=m.p6J(h),j=[],l=[(e={},e[i]=j,e)],k.traversalTree(f,{invoking:function(c){var d,e,f=c.mi;b[f]||(d=m.ojb(f),("create"===a||"batch"===a&&m.isInserted(f,!0))&&m.X6J(d),delete d[h],d=m.f6J(d),l.length>0&&(e=l[l.length-1],k.isArray(e[i])||(e[i]=[]),e[i].push(d)),l.push(d))},invoked:function(a){b[a.mi]||l.pop()}}),m.Z6J(j,a,c,d)):Promise.resolve(void 0)},a.prototype.a7J=function(){var a,b,c,d,e,f,g,h,i,j,l,o=this;if(o.isHierarchy()){for(b=o.d6J,c=o.B6J(),d=b.reduce(function(a,b){return a[b.P7J]=b,b.id=b.P7J,b.sequence=b.R7J,b.parent=m,a},(a={},a[c.P7J]=c,a)),e=0;e<b.length;e++)o.isInserted(e,!0)||(f=b[e],f.parent=d[f.Q7J]);if(g=o.options.schema.hierarchy.levelOffset||0,c.level=g-1,"Level"===o.i6J()){for(h=o.k6J(),i=n,e=0;e<b.length;e++)o.isInserted(e,!0)||(j=o.AWJ(e)[h],k.isNumber(j)||(j=o.u6J(h,e)),(j<i||i===n)&&(i=j));c.level=i+g-1}o.d6J=[],l=!k.isNullOrEmpty(o.w6J()),o.m6J(l)}},a.prototype.cancelChanges=function(){var a,c,d,e,f=this,g=f.getHeldActions();g&&0!==g.length&&(f.a7J(),a=f.oEJ,c=f.mEJ||[],d=f.pEJ||[],e=[],k.forEach(g,function(g){var h=g.sourceIndex,i=g.type;i===b.UPDATE?(f.IMJ(h,a[h]),d[h]=[!!d[h]&&d[h][0],!1]):i===b.DELETE?(c[h]=n,d[h]&&d[h][0]?e.push(h):d[h]&&d[h][1]&&(f.IMJ(h,a[h]),d[h]=[!1,!1]),k.isNullOrUndefined(f.fEJ)||(f.fEJ+=1)):i===b.INSERT&&e.push(h)}),k.forEachRight(e,function(a){f.GMJ(a,1),d.splice(a,1),k.isNullOrUndefined(f.fEJ)||(f.fEJ-=1)}),f.clearBatchCache_())},a.prototype.getChanges=function(){return this.I4J(!1)},a.prototype.isDataLengthChanged=function(){return this.getChanges().some(function(a){return"delete"===a.type||"insert"===a.type})},a.prototype.submitChanges=function(a){var c,d,e,f,g,h,i,j=this;return j.hasCachedActions()?j.$6J()?(c=(j.mEJ||[]).slice(),j._6J("batch",n,function(){for(var a=j.FMJ-1;a>=0;a--)c[a]===!0&&(j.GMJ(a,1),j.d6J[a].parent=m,j.d6J.splice(a,1));j.d6J.forEach(function(a,b){a.mi=b})})):(d=j.oEJ,e=j.mEJ||[],f=j.pEJ||[],g=j.getHeldActions(),h=[],i=b.UPDATE,k.isNullOrUndefined(g)||g.forEach(function(a){a.dataItem=j.f6J(a.dataItem),a.oldDataItem=j.f6J(a.oldDataItem)}),j.qEJ({body:g},"batch").then(function(c){var l,o,r,s={type:i,batch:!0,data:c};return j.Wq(q,s)?Promise.reject({cancel:!0,type:i,batch:!0,step:q}):(l=s.data,(l||[]).forEach(function(a){a.succeed&&a.data&&j.e6J(a.data)}),l.length!==g.length,o=[],k.forEach(g,function(a,c){var e=l[c];e.succeed?a.type===b.UPDATE?(d&&(d[a.sourceIndex]=n),f[a.sourceIndex][1]=n):a.type===b.INSERT?(f[a.sourceIndex]=[],d[a.sourceIndex]=n,e.data&&(j.IMJ(a.sourceIndex,e.data),j.Y6J(a.sourceIndex))):a.type===b.DELETE&&h.push(a.sourceIndex):o.push({localAction:a,response:e})}),k.forEachRight(h,function(a){e.splice(a,1),j.GMJ(a,1),d&&d.splice(a,1),f.splice(a,1),j.isHierarchy()&&(j.d6J[a].parent=m,j.d6J.splice(a,1))}),j.isHierarchy()&&j.d6J.forEach(function(a,b){a.mi=b}),o.length>0?(r={type:i,errorData:o},j.Wq(p,{type:r})||(j.w9J=[],k.forEach(o,function(c,d){var f=c.response,g=c.localAction,h=g.sourceIndex;g.type===b.DELETE&&(e[h]=n),j.x9J(h,{type:g.type,success:!1,reason:f.reason}),a(h,f.reason,g.type)}))):delete j.w9J,Promise.resolve(j.iEJ()))}).catch(function(a){var b=a&&a.cancel===!0?s+a.step:j.jEJ(a),c={type:i,reason:b};j.Wq(p,{type:c})})):Promise.resolve(void 0)},a.prototype.getHeldActions=function(){var a=this;return a.hasCachedActions()?a.I4J(!0):m},a.prototype.I4J=function(a){var c,d,e,f,g,h,i=this,j=[],k=i.pEJ||[],l=i.mEJ||[],m=i.oEJ;for(e=0;e<i.FMJ;e++){if(c=k[e],d=null,l[e]===!0)d={type:b.DELETE,dataItem:i.ojb(e)};else if(c&&c[0])d={type:b.INSERT,dataItem:i.ojb(e)},a&&i.isHierarchy()&&i.X6J(d.dataItem);else if(c&&c[1]){if(f=m[e],g=i.ojb(e),!a){f=z({},f);for(h in f)f.hasOwnProperty(h)&&f[h]===g[h]&&(delete f[h],delete g[h])}d={type:b.UPDATE,dataItem:g,oldDataItem:f}}d&&(a?d.sourceIndex=e:d.index=this.J4J(e),j.push(d))}return j},a.prototype.clearBatchCache_=function(){var a=this;delete a.mEJ,delete a.oEJ,delete a.w9J},a.prototype.hasCachedActions=function(){var a,b,c,d,e,f,g,h,i=this;if(!i.kEJ())return!1;if(a=i.pEJ,b=i.mEJ,!a&&!b)return!1;if(b)for(c=0,d=b;c<d.length;c++)if(e=d[c])return!0;if(a)for(f=0,g=a;f<g.length;f++)if(h=g[f],h&&(h[0]===!0||h[1]===!0))return!0;return!1},a.prototype.bind=function(a,b){var c,d,e,g,h,i,j=this;if(b)for(c=k.isArray(a)?a:[a],d=0,e=c;d<e.length;d++)g=e[d],h=k.isFunction(b)?b:b[g],h&&(i=j._events[g]=j._events[g]||new f.Event,i.addHandler(h,j))},a.prototype.unbind=function(a,b){var c,d=this;return k.isNullOrUndefined(a)?(k.forEach(d._events,function(a){a.removeAllHandlers()}),void(d._events={})):(c=d._events[a],void(c&&(b?c.removeHandler(b,d):c.removeAllHandlers())))},a.prototype.Wq=function(a,b){var c=this,d=c._events[a];return!!d&&(b=b||{},b.cancel=!1,b.eventName=a,d.raise(c,b),b.cancel)},a.prototype.s_J=function(a){var b=this;return b._events.hasOwnProperty(a)&&b._events[a].hasHandlers},a.prototype.gEJ=function(a){return a=z({},a)},a.prototype.rEJ=function(a){return a},a.prototype.getDirtyIndexes=function(){var a=this,b=a.pEJ||[];return Object.keys(b).map(function(a){return parseInt(a,10)})},a.prototype._LJ=function(a,b){var c=this,d=c.pEJ||[];return a=b?a:c.lEJ(a),d[a]||[]},a.prototype.isInserted=function(a,b){return this._LJ(a,b)[0]},a.prototype.isUpdated=function(a){return this._LJ(a)[1]},a.prototype.getErrorInfo=function(a){var b=this,c=b.w9J;if(!k.isNullOrUndefined(c))return a=b.lEJ(a),c[a]},a.prototype.x9J=function(a,b){var c=this,d=c.w9J=c.w9J||[];d[a]=b},a.prototype.o5J=function(){this.pEJ=n,this.mEJ=n,this.oEJ=n,this.w9J=n},a.prototype.AWJ=function(a){var b=this,c=b.oEJ=b.oEJ||[];return c[a]},a.prototype.insertItem=function(a,c,d,e){var f=this;a=f.lEJ(a),f.aMJ({action:b.INSERT,index:a,item:c,V7J:!0}),f.isHierarchy()&&"Custom"===f.i6J()&&f.H6J(a),d&&d({type:b.CREATE,success:!0})},a.prototype.updateItem=function(a,c,d,e){var f=this;f.aMJ({action:b.UPDATE,index:a,item:c}),d&&d({type:b.UPDATE,success:!0})},a.prototype.updateItemValues=function(a,c,d,e){var f=this;f.aMJ({action:b.UPDATE,index:a,item:c,t_J:!0}),d&&d({type:b.UPDATE,success:!0})},a.prototype.resetItem=function(a,c,d){var e,f=this,g=f.oEJ=f.oEJ||[];a=f.lEJ(a),e=g[a],f.isHierarchy()&&(e=f.X7J(a,e)),f.IMJ(a,e),f.clearChangedStatus(a),f.x9J(a),c&&c({type:b.UPDATE,success:!0})},a.prototype.X7J=function(a,b){var c,d,e,f,g,h=this,i=h.isHierarchy();return i?(c=h.ojb(a),d=h.i6J(),e=h.k6J(),f=h.w6J(),g=z({},b),"Parent"!==d&&"Level"!==d&&"Custom"!==d||(g[e]=c[e]),k.isNullOrEmpty(f)||(g[f]=c[f]),g):b},a.prototype.saveItem=function(a,c,d){var e,f,g,h,i,j,k,l=this;if(a=l.lEJ(a),e=l.pEJ||[],f=e[a]||[],g=f[0],h=f[1],f.length>0&&(g||h)){if(l.isHierarchy()&&(i=l.d6J,j=i[a].parent,k=!j.isRoot&&e[j.mi]&&e[j.mi][0],k))return void(d&&d({type:b.CREATE,success:!1}));l.gMJ(a,l.ojb(a),g?b.INSERT:b.UPDATE,c,d)}},a.prototype.gMJ=function(a,c,d,e,f){var g=this,h=d===b.INSERT,i=h?b.CREATE:b.UPDATE,j=g.kEJ(),k=g.tEJ(i),l=g.hEJ();return j||!k||l?void(l&&(g.pEJ[a]=[],g.oEJ[a]=n,e&&e({type:i,success:!0}))):g.$6J()?void g._6J(h?b.CREATE:b.UPDATE,n,e,f):(h&&g.X6J(c),c=g.f6J(c),void g.qEJ({body:c},h?b.CREATE:b.UPDATE).then(function(d){var f,h={type:i,data:E(c,d)};return g.Wq(q,h)?Promise.reject({cancel:!0,type:i,step:q}):(g.e6J(h.data),g.IMJ(a,h.data),g.pEJ[a]=[],g.oEJ[a]=n,g.x9J(a),f={type:i,success:!0,items:[h.data]},i===b.CREATE&&g.Y6J(a),e&&e(f),g.Wq(r,f),n)}).catch(function(b){var c=b&&b.cancel===!0?s+b.step:g.jEJ(b),d={type:i,success:!1,reason:c};g.x9J(a,d),g.Wq(p,{type:d}),f(d)}))},a.prototype.aMJ=function(a){var c,d,e,f,g,h,i,j,l,m=this,o=m.kEJ(),p=m.oEJ=m.oEJ||[];o&&(c=m.mEJ=m.mEJ||[]),d=a.action,e=a.index,f=a.item,g=a.t_J,h=a.V7J,e=h?e:m.lEJ(e),m.pEJ=m.pEJ||[],i=m.pEJ,d===b.INSERT?(0===m.FMJ&&0===m.U.length&&m.mXJ(),m.FMJ<e&&(m.FMJ=e),j=e,k.isNullOrUndefined(j)&&(j=m.FMJ),m.GMJ(j,0,f),p.length>=e?p.splice(e,0,z({},f)):p[e]=z({},f),o&&(c.length>=e?c.splice(e,0,n):c[e]=n),i.length>=e?i.splice(e,0,[!0]):i[e]=[!0],k.isNullOrUndefined(m.fEJ)||(m.fEJ+=1),m.Wq(b.ONCHANGE,{action:d,index:e,items:[a.item]})):d===b.UPDATE&&(l=m.ojb(e),p[e]||(p[e]=z({},l)),m.IMJ(e,f,g),m.pEJ[e]?m.pEJ[e]=[m.pEJ[e][0],!0]:m.pEJ[e]=[!1,!0],G(f,p[e])&&m.clearChangedStatus(e),m.Wq(b.ONCHANGE,{action:d,index:e,items:[a.item],oldItems:[l]}))},a.prototype.clearChangedStatus=function(a){var b=this;b.pEJ[a][1]=!1,b.pEJ[a][0]!==!0&&(b.oEJ[a]=n)},a.prototype.get=function(a){var b,c,d,e,f=this,g=f._data;if(a=f.lEJ(a),g&&a<f.FMJ){for(b={},c=0,d=f.U;c<d.length;c++)e=d[c],b[e]=g[e].data[a];return b}return n},a.prototype.u6J=function(a,b){var c=this,d=c._data;return d&&d[a]&&b<c.FMJ?d[a].data[b]:n},a.prototype.getFieldValue=function(a,b){var c=this,d=c._data;return b=c.lEJ(b),d&&d[a]&&b<c.FMJ?d[a].data[b]:n},a.prototype.getFieldOriginalValue=function(a,b){var c,d=this,e=d._data;return b=d.lEJ(b),e&&e[a]&&b<d.FMJ?(c=d.AWJ(b),k.isNullOrUndefined(c)?e[a].data[b]:c[a]):n},a.prototype.b7J=function(a,c,d){var e,f,g,h,i,j,l=this,m=l.kEJ()||!l.tEJ(b.DELETE)||l.hEJ()||l.isInserted(a);return!m&&l.$6J()?(a=l.lEJ(a),e=l.A6J(a),f=e.getChildrenIndexes(!0).concat(a),g=f.reduce(function(a,b){return a[b]=!0,a},[]),h=function(){f.forEach(function(a){l.aW(a,1,!1)}),l.d6J.forEach(function(a,b){a.mi=b})},l.bind(q,h),void l._6J(b.DELETE,g,function(a){l.unbind(q,h),a.removedCount=f.length,c&&c(a)},function(a){l.unbind(q,h),d&&d(a)})):void(l.isHierarchy()&&(a=l.lEJ(a),e=l.A6J(a),i=e.getChildrenIndexes(!0).concat(a),j=i.map(function(a){return function(b,c){l.Ola(a,1,b,c)}}),k.promiseSerialExecute(j).then(function(b){l.kEJ()||(i.sort(function(a,b){return b-a}),i.forEach(function(a){l.aW(a,1,!1)}),l.d6J.forEach(function(a,b){a.mi=b})),"Custom"===l.i6J()&&l.H6J(a+(l.kEJ()?i.length:0));var d=b[b.length-1];d.removedCount=i.length,c&&c(d)}).catch(function(a){d&&d(a)})))},a.prototype.remove=function(a,b,c,d){var e=this;e.isHierarchy()?e.b7J(a,c,d):e.Ola(a,b,c,d)},a.prototype.Ola=function(a,c,d,e){var f,g,h,i=this;a<0||a>=i.length()||(f=b.DELETE,i.kEJ()||!i.tEJ(b.DELETE)||i.hEJ()||i.isInserted(a)?(!i.kEJ()&&i.isHierarchy()||i.aW(a,c),g={type:f,success:!0},d&&d(g)):(h=i.HMJ(a,a+c),i.p_J(h),i.qEJ({body:h},b.DELETE).then(function(b){if(i.Wq(q,{type:f,data:h}))return Promise.reject({cancel:!0,type:f,step:q});i.isHierarchy()||i.aW(a,c),i.p_J(h,{isServerToClient:!0}),i.x9J(a);var e={type:f,success:!0,items:[h]};return d&&d(e),i.Wq(r,e),n}).catch(function(b){var c=b&&b.cancel===!0?s+b.step:i.jEJ(b),d={type:f,success:!1,reason:c};i.x9J(a,d),i.Wq(p,{type:d}),e(d)})))},a.prototype.aW=function(a,c,d){var e,f,g,h,i,j,l,n,o=this,p=o.kEJ(),q=o.pEJ||[],r=o.oEJ||[];if(p){for(f=void 0,g=o.mEJ=o.mEJ||[],h=c,i=[],e=[],f=o.lEJ(a),o.isHierarchy()&&(j=o.d6J,j[f].parent=m,o.MaK(a,c)),l=f;l<o.FMJ&&(g[l]!==!0&&e.length<c&&(e.push(o.ojb(l)),i.push(l),g[l]=!0,h-=1),0!==h);l++);k.forEachRight(i,function(a){q[a]&&q[a][0]&&(g.splice(a,1),q.splice(a,1),r.splice(a,1),o.GMJ(a,1))})}else e=o.GMJ(a,c),q.splice(a,c),r.splice(a,c),o.isHierarchy()&&(j=o.d6J,j[a].parent=m,o.MaK(a,c),j.splice(a,c),d!==!1&&j.forEach(function(a,b){a.mi=b}));n=e.length,k.isNullOrUndefined(o.fEJ)||(o.fEJ-=n,o.fEJ=Math.max(o.fEJ,0)),o.Wq(b.ONCHANGE,{action:b.DELETE,items:e})},a.prototype.mXJ=function(){var a,b,c=this,d=null===(a=c.options.schema)||void 0===a?void 0:a.columns;if(d)for(b in d)Object.prototype.hasOwnProperty.call(d,b)&&(c._data[b]={data:[]},c.U.push(b))},a.prototype.hEJ=function(){return k.isNullOrUndefined(this.options.remote)},a.prototype.kEJ=function(){var a=this.options;return(a.batch||!1)&&!this.hEJ()},a.prototype.tEJ=function(a){var b=this,c=b.options,d=b.cEJ;return!!c.autoSync&&!k.isNullOrUndefined(d.i6[a])},a.prototype.qEJ=function(a,c){var d=this,e=c||b.UPDATE;return a=d.cEJ.setupRequestOptions(a,c||b.UPDATE),a?d.Wq(o,{type:e,requestParams:a})?Promise.reject({cancel:!0,type:e,step:o}):d.cEJ.postData(a):Promise.reject({cancel:!0,type:e,step:o})},a.prototype.Vpb=function(a){var b=this;return a=b.rEJ(a),a=b.cEJ.setupRequestOptions(a,"read"),a?b.Wq(o,{type:"read",requestParams:a})?Promise.reject({cancel:!0,type:"read",step:o}):b.cEJ.getData(a):Promise.reject({cancel:!0,type:"read",step:o})},a.prototype.jEJ=function(a){return k.isString(a)?a:a instanceof Error?a.message:"some error happened"},a.prototype.lEJ=function(a){var b,c,d,e,f=this.mEJ;if(k.isNullOrUndefined(f)||0===f.length)return a;for(b=0,c=0,d=0,e=f.length;d<=e;d++)if(f[d])c+=1;else{if(b===a)break;b+=1}return a+c},a.prototype.J4J=function(a){var b,c,d=this.mEJ;if(k.isNullOrUndefined(d)||0===d.length)return a;for(b=0,c=Math.min(d.length,a);b<=c;b++)d[b]&&(a-=1);return a},a}(),b.DataSource=x},"./dist/src/dataSource/dataTransport/localDataTransport.js":function(a,b,c){"use strict";
var d,e=this&&this.__assign||function(){return e=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},e.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.LocalDataTransport=void 0,d=function(){function a(a){a&&(this._data=a.data,this.i6=e({},a))}return a.prototype.getData=function(a){var b=this;return Promise.resolve(b._data)},a.prototype.postData=function(a){var b=this;return Promise.resolve(b._data)},a.prototype.setupRequestOptions=function(a,b){return{}},a}(),b.LocalDataTransport=d},"./dist/src/dataSource/dataTransport/remoteDataTransport.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__assign||function(){return o=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},o.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.RemoteDataTransport=void 0,c("./node_modules/whatwg-fetch/fetch.js"),d=c("./node_modules/fetch-jsonp/build/fetch-jsonp.js"),e=c("./dist/src/dataSource/utils.js"),f=null,g=void 0,h="jsonp",i="read",j="create",k="update",l="delete",m="Content-Type",n=function(){function a(a){var b=this;b.i6=o({},a)}return a.prototype.getData=function(a){var b=this,c=this,f=c.i6[a.requestType],i=a.dataType,j=i===h?d:fetch;return a.requestData=g,a.requestType=g,e.isFunction(f)?f(a):j(a.url,a).then(function(a){if(!a.ok)throw a;return b.uEJ(i)?a.json():a.text()})},a.prototype.postData=function(a){var b=this,c=this,d=c.i6[a.requestType],f=a.dataType,h=a.requestData;return a.requestData=g,a.requestType=g,e.isFunction(d)?d(h,a):fetch(a.url,a).then(function(a){if(!a.ok)throw a;return b.uEJ(f)?a.json():a.text()})},a.prototype.uEJ=function(a){return void 0===a||"json"===a||a===h},a.prototype.setupRequestOptions=function(a,b){var c,d,e,f,g,n,p;if(a=a||{},c=this,d=c.i6[b],d)return e=d.body,f=a.body,f?(a.headers=a.headers||{},c.i6.dataConverter?(a.body=f=c.i6.dataConverter(f,b||i),a.headers[m]="application/plain;"):(a.body="string"==typeof f?f:JSON.stringify(f),a.headers[m]="application/json; charset=utf-8")):e&&(a.body="string"==typeof e?e:JSON.stringify(e),a.headers={},a.headers[m]="application/json; charset=utf-8"),p=d.method,b===i?(d.dataType===h&&(g={mode:"no-cors"}),n={method:p||"GET"}):b===j||b===k||"batch"===b?n={method:p||"POST"}:b===l&&(n={method:p||"DELETE"}),o(o(o(o(o({},d),n),g),a),{requestType:b,requestData:f})},a}(),b.RemoteDataTransport=n},"./dist/src/dataSource/event.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.Event=b.EventHandler=void 0,d=function(){function a(a,b,c){var d=this;d.handler=a,d.owner=b,d.priority=c}return a}(),b.EventHandler=d,e=null,f=function(){function a(){this.qwa=[]}return Object.defineProperty(a.prototype,"hasHandlers",{get:function(){return this.qwa.length>0},enumerable:!1,configurable:!0}),a.prototype.addHandler=function(a,b,c){void 0===c&&(c=1);var e=this,f=new d(a,b,c);e.qwa.push(f),e.sortHandlers()},a.prototype.removeHandler=function(a,b){var c,d,e=this,f=e.qwa,g=f.length;for(c=0;c<g;c++)if(d=f[c],d.handler===a&&d.owner===b){e.qwa.splice(c,1);break}},a.prototype.sortHandlers=function(){this.qwa.sort(function(a,b){var c=a.priority,d=b.priority;return c<d?1:c>d?-1:0})},a.prototype.removeHandlersByPriority=function(a){var b,c,d=this,f=d.qwa,g=f.length,h=e,i=e;for(b=0;b<g;b++)if(c=f[b],c.priority===a)h===e&&(h=b),i=b;else if(h!==e)break;h!==e&&i!==e&&d.qwa.splice(h,i-h+1)},a.prototype.removeAllHandlers=function(){this.qwa.length=0},a.prototype.raise=function(a,b){var c,d,f,g,h,i=!1,j=function(){i=!0};for(b===e?b={stopPropagation:j}:b.stopPropagation=j,c=this,d=c.qwa.length,f=c.qwa.slice(0,d),g=0;g<d&&!i;g++)h=f[g],h.handler.call(h.owner,a,b)},a}(),b.Event=f},"./dist/src/dataSource/utils.js":function(a,b,c){"use strict";var d,e,f,g,h,i=this&&this.__spreadArrays||function(){var a,b,c,d,e,f,g,h;for(a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(d=Array(a),e=0,b=0;b<c;b++)for(f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d};Object.defineProperty(b,"__esModule",{value:!0}),b.getUniqueArray=b.LL=b.format=b.promiseAllSerial=b.promiseSerialExecute=b.traversalTree=b.bubbleTree=b.swapArrayItems=b.getActualType=b.isNullOrEmpty=b.isNullOrUndefined=b.isNull=b.isUndefined=b.map=b.pick=b.isString=b.zipObject=b.clone=b.findIndex=b.indexOf=b.reduce=b.keys=b.forEachRight=b.forEach=b.isBoolean=b.isNumber=b.isFunction=b.isObject=b.isArray=void 0,d=c("Common"),e=c("CalcEngine"),f=d.Common.CultureManager,g=d.Common.o,h=d.Common.l,b.isArray=Array.isArray;function j(a){return a&&!b.isArray(a)&&"object"==typeof a}b.isObject=j;function k(a){return"function"==typeof a}b.isFunction=k;function l(a){return"number"==typeof a}b.isNumber=l;function m(a){return"boolean"==typeof a}b.isBoolean=m;function n(a,c){var d,e,f,g,h;if(b.isArray(a))for(d=0;d<a.length;d++)c(a[d],d,a);else for(e=Object.keys(a),f=0,g=e;f<g.length;f++)h=g[f],c(a[h],h,a)}b.forEach=n;function o(a,c){var d,e,f,g,h;if(b.isArray(a))for(d=a.length-1;d>=0;d--)c(a[d],d,a);else for(e=Object.keys(a),e.reverse(),f=0,g=e;f<g.length;f++)h=g[f],c(a[h],h,a)}b.forEachRight=o;function p(a){return Object.keys(a)}b.keys=p;function q(a,c,d){if(b.isArray(a))return a.reduce(c,d);throw Error("NOT SUPPORT")}b.reduce=q;function r(a,b,c){return void 0===c&&(c=0),a.indexOf(b,c)}b.indexOf=r;function s(a,b){for(var c=0,d=a.length;c<d;c++)if(b(a[c],c,a))return c;return-1}b.findIndex=s;function t(a,b){var c,d,e,f,g,h,i;if(void 0===b&&(b=!1),A(a)||"object"!=typeof a)return a;if(a&&a instanceof Array)return a.map(function(a){return t(a,b)});if(a&&"object"==typeof a){for(c={},d=p(a),e=0,f=d;e<f.length;e++)g=f[e],h=a[g],b?(i=C(h),"object"===i||"array"===i?c[g]=t(h,b):c[g]=h):c[g]=h;return c}return a}b.clone=t;function u(a,b){var c,d,e;for(void 0===a&&(a=[]),void 0===b&&(b=[]),c={},d=Math.min(a.length,b.length),e=0;e<d;e++)c[a[e]]=b[e];return c}b.zipObject=u;function v(a){return"string"==typeof a}b.isString=v;function w(a,b){var c,d,e,f;if(v(b))return a[b];for(c={},d=0,e=b;d<e.length;d++)f=e[d],c[f]=a[f];return c}b.pick=w;function x(a,c){if(b.isArray(a))return a.map(c);throw Error("NOT SUPPORT")}b.map=x;function y(a){return void 0===a}b.isUndefined=y;function z(a){return null===a}b.isNull=z;function A(a){return y(a)||z(a)}b.isNullOrUndefined=A;function B(a){return""===a||A(a)}b.isNullOrEmpty=B;function C(a){var b=Object.prototype.toString.call(a);return b.match(/\[\w+\s(\w+)\]/)[1].toLowerCase()}b.getActualType=C;function D(a,b,c,d){b<0||b>a.length||c<0||c>a.length||b===c||d<=0||a.splice.apply(a,i([c-(b<c?d-1:0),0],a.splice(b,d)))}b.swapArrayItems=D;function E(a,b){var c=a.parent;c&&(b(c),E(c,b))}b.bubbleTree=E;function F(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o=a[d||"children"]||[];for(B(c)?e=o.slice():(h=void 0,i=void 0,"string"==typeof c?f=c:"function"==typeof c?g=c:"object"==typeof c&&(f=c.field,g=c.getValue,h=c.compareFn,i=c.isOrderChildren),e=i?o:o.slice(),f?e.sort(function(a,b){return a[f]-b[f]}):g?e.sort(function(a,b){return g(a)-g(b)}):h&&e.sort(h)),j=b,"object"==typeof b&&(j=b.invoking,k=b.invoked),m=0;m<e.length;m++){if(n=e[m],j&&(l=j(n,a),l&&l.cancel))return l;if(l&&l.cancelDeepRecursion||(l=F(n,b,c,d)),l&&l.cancel)return l;if(k&&(l=k(n,a),l&&l.cancel))return l}}b.traversalTree=F;function G(a){return a}function H(a){return void 0===a&&(a=0),new Promise(function(b,c){setTimeout(function(){b("timeout")},a)})}function I(a){var b=a.callback,c=a.timeout,d=void 0===c?5e3:c,e=a.retryCount,f=void 0===e?1:e;return Promise.race([b(),H(d)]).then(function(a){if("timeout"===a){if(f>0)return--f,I({callback:b,retryCount:f});throw"timeout"}return Promise.resolve(a)})}function J(a,b){return K(a.map(function(a){return function(){return new Promise(a)}}),b)}b.promiseSerialExecute=J;function K(a,b){var c=[];return a.reduce(function(a,d){return a.then(function(a){return c.push(Promise.resolve(a)),G(b?I({callback:d,timeout:b.timeout,retryCount:b.retryCount}):d())})},Promise.resolve({})).then(function(a){return c.shift(),c.push(Promise.resolve(a)),Promise.all(c)})}b.promiseAllSerial=K;function L(a){return"string"==typeof a&&("="===a.charAt(0)||a.indexOf("{{")>=0&&a.indexOf("}}")>=0)}function M(a,b){var c,i,j,k,l;if(A(a)||""===a)return"";if(c=L(b),!b||"General"===b||c)return"boolean"==typeof a||a instanceof Boolean?(e&&(a=a?e.getBoolean().boolean_true:e.getBoolean().boolean_false),(""+a).toUpperCase()):a instanceof Date?(i=f.q4(f.culture()).DateTimeFormat,j=i.shortDatePattern,0===a.getHours()&&0===a.getMinutes()&&0===a.getSeconds()&&0===a.getMilliseconds()||(j=i.defaultDatePattern),h.Vb(a,j)):("number"==typeof a&&(a=g.nb(""+a)),""+a);try{return k=d.Formatter&&d.Formatter.GeneralFormatter,k?(l=null,l="string"==typeof b?new k(b):b,l.format(a,{})):""+a}catch(b){return""+a}}b.format=M;function N(a,b){var c,d;if(A(a)||A(b))return a;for(c=b.split(".");c.length>0;)d=c.shift(),a=a[d];return a}b.LL=N;function O(a){var b,c,d,e,f;if(a&&a.length>0){for(b={},c=[],d=0,e=a;d<e.length;d++)f=e[d],b[f]||(b[f]=!0,c.push(f));return c}return a}b.getUniqueArray=O},"./dist/src/interfaces/conditionalFormatOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.c=void 0,b.c=0},"./dist/src/interfaces/interface.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.RelationshipMap=b.RowColumnStates=b.StateRuleDirection=b.DEFAULT_VIEW_NAME=void 0,b.DEFAULT_VIEW_NAME="defaultView",function(a){a[a.none=0]="none",a[a.row=1]="row",a[a.column=2]="column",a[a.both=3]="both"}(d=b.StateRuleDirection||(b.StateRuleDirection={})),function(a){a[a.hover=1]="hover",a[a.readonly=4]="readonly",a[a.active=16]="active",a[a.selected=32]="selected",a[a.dirty=64]="dirty",a[a.inserted=128]="inserted",a[a.updated=256]="updated"}(e=b.RowColumnStates||(b.RowColumnStates={})),function(a){a[a.OneToOne=0]="OneToOne",a[a.OneToMany=1]="OneToMany"}(f=b.RelationshipMap||(b.RelationshipMap={}))},"./dist/src/interfaces/styleOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.s=void 0,b.s=0},"./dist/src/interfaces/validatorOptions.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.v=void 0,b.v=0},"./dist/src/relationship.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.Relationship=void 0,d=c("./dist/src/interfaces/interface.js"),e=c("./dist/src/dataSource/utils.js"),f=void 0,g=function(){function a(a,b,c,d,e,f){this.sourceTable=a,this.sourceFieldName=b,this.sourceRelationshipName=c,this.targetTable=d,this.targetFieldName=e,this.targetRelationshipName=f,c&&(this.sourceField=a.WDJ(b,c,d,e,this)),f&&(this.targetField=d.WDJ(e,f,a,b,this))}return a.prototype.u_J=function(a){return a===this.targetRelationshipName},a.prototype.Fb=function(){this.sourceTable&&this.sourceTable.QJJ(this),this.targetTable&&this.targetTable.QJJ(this)},a.prototype.v_J=function(a){return this.relationshipMap===d.RelationshipMap.OneToMany&&a===this.sourceRelationshipName?d.RelationshipMap.OneToOne:this.relationshipMap},a.prototype.w_J=function(){var a=this.sourceTable,b=this.sourceFieldName;if(a.x_J())return a.PEJ(b)&&!a.y_J()?d.RelationshipMap.OneToOne:d.RelationshipMap.OneToMany},a.prototype.z_J=function(a){var b=this.relationshipMap;return e.isNullOrUndefined(b)&&(b=this.relationshipMap=this.w_J()),e.isNullOrUndefined(b)?a:b===d.RelationshipMap.OneToOne?{Nc:"object"}:{Nc:"array"}},a.prototype.XDJ=function(){var a,b,c,d,f,g,h,i,j;function k(a,b,c){a[b]?(a[b].push(c),a.Nc="array"):a[b]=[c]}for(a=this.sourceField.YDJ={Nc:"object"},b=this.targetField.YDJ=this.z_J({}),c=this.z_J({Nc:"object"}),d=this.sourceTable.getDataSync(),f=this.targetTable.getDataSync(),g=0;g<d.length;g++)h=d[g][this.sourceFieldName],e.isNullOrUndefined(h)||k(c,h,g);for(i=function(d){var g=f[d][j.targetFieldName];e.isNullOrUndefined(g)||c[g]&&(b[d]=c[g],c[g].forEach(function(b){k(a,b,d)}))},j=this,g=0;g<f.length;g++)i(g);this.targetField.type=c.Nc,this.sourceField.type=a.Nc},a.prototype.Nm=function(){this.sourceField.YDJ=f,this.targetField.YDJ=f,this.targetTable.IWJ(),this.sourceTable.IWJ()},a}(),b.Relationship=g},"./dist/src/table/calcField.js":function(a,b,c){"use strict";var d,e,f,g=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CalcField=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f=function(a){g(b,a);function b(b,c){var d,e=a.call(this)||this;e.calcSource=c.vDJ,e.calcService=e.calcSource.getCalcService(),e.rOa=b;try{d=e.expression=e.calcService.parse(e.calcSource,b,0,0),e.calcService&&d&&(e.ah=e.calcService.getGlobalSourceModel(),e.ah.Ig(e,0,0,d,d,!0))}catch(a){}return e.Xm=[],e}return b.prototype.getKey=function(){var a=this;return"T:"+a.calcSource.sj.name+":"+a.rOa},b.prototype.fh=function(){this.ZAb().pg(this,3)},b.prototype.ZAb=function(){return this.calcService},b.prototype.Ik=function(){this.QV()},b.prototype.QV=function(){this.Xm=[]},b.prototype.getValue=function(a){if(!this.expression)return"Invalid Formula";var b=this.Xm[a];return e.isUndefined(b)?(this.calcSource.L$a(a),b=this.Xm[a]=this.calcService.evaluateExpression(this.calcSource,this.expression,{row:a,col:0})):b},b.prototype.getValues=function(a,b){var c,d,e=[];for(b=b||0,c=b,d=a.length;c<d;c++)e.push(this.getValue(a[c]));return e},b}(d.BaseCalc),b.CalcField=f},"./dist/src/table/hierarchyField.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.HierarchyField=void 0,d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/table/calcField.js"),f=c("./dist/src/table/tableField.js"),g=function(){function a(a,b){this.rOa=a,this.sj=b,this.DaK=new e.CalcField(this.BaK(),b),this.EaK=new f.TableField(a,b)}return a.prototype.getKey=function(){return this.DaK.getKey()},a.prototype.fh=function(){this.DaK.fh()},a.prototype.ZAb=function(){return this.DaK.ZAb()},a.prototype.Ik=function(){this.QV()},a.prototype.BaK=function(){return this.sj.isHierarchy()?this.sj._dataSource.BaK(this.rOa):void 0},a.prototype.QV=function(){var a=this.BaK();d.isNullOrEmpty(a)?this.DaK=null:d.isNullOrUndefined(this.DaK)||a!==this.DaK.rOa?this.DaK=new e.CalcField(a,this.sj):this.DaK.QV(),this.EaK=new f.TableField(this.rOa,this.sj)},a.prototype.FaK=function(a){var b,c=this.sj;if(c.isHierarchy())return b=c.z6J(a),!d.isNullOrUndefined(b)&&b.children.length>0},a.prototype.getValue=function(a){return!d.isNullOrUndefined(this.DaK)&&this.FaK(a)?this.DaK.getValue(a):this.EaK.getValue(a)},a.prototype.getValues=function(a,b){var c,d,e=[];for(b=b||0,c=b,d=a.length;c<d;c++)e.push(this.getValue(a[c]));return e},a.prototype.setValue=function(a,b){return this.EaK.setValue(a,b)},a.prototype.setItemValue=function(a,b,c,d){this.EaK.setItemValue(a,b,c,d)},a.prototype.hasItem=function(a){this.EaK.hasItem(a)},a.prototype.insertItem=function(a,b){this.EaK.insertItem(a,b)},a.prototype.getOriginalValue=function(a){return this.EaK.getOriginalValue(a)},a.prototype.getRelatedTable=function(){return this.EaK.getRelatedTable()},a.prototype.getRelationMaps=function(){return this.EaK.getRelationMaps()},a.prototype.getHostTableIndexes=function(a){return this.EaK.getHostTableIndexes(a)},a}(),b.HierarchyField=g},"./dist/src/table/table.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/table/tableEvents.js"),b),e(c("./dist/src/table/table.js"),b)},"./dist/src/table/table.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o;Object.defineProperty(b,"__esModule",{value:!0}),b.Table=b.updateFilterIndexesCacheOnRemove=b.updateFilterIndexesCacheOnUpdate=b.updateFilterIndexesCacheOnInsert=b.generateFilterIndexCache=void 0,d=c("./dist/src/dataSource/dataSource.js"),e=c("./dist/src/calculation/calcSource.js"),f=c("./dist/src/dataSource/utils.js"),g=c("./dist/src/view/view.js"),h=c("./dist/src/interfaces/interface.js"),i=c("./dist/src/table/tableEvents.js"),j=c("./dist/src/table/calcField.js"),k=c("./dist/src/table/tableField.js"),l=c("./dist/src/table/hierarchyField.js"),m=null,n=void 0;function p(a,b,c){var d={syncDone:!1,asyncCount:0,args:void 0,succeededArgs:void 0,failedArgs:void 0,onSucceeded:a,onFailed:b,onEnd:c,invoke:function a(){0===d.asyncCount&&d.syncDone&&(d.failedArgs?d.onFailed&&d.onFailed(d.failedArgs):d.onSucceeded&&d.onSucceeded(d.succeededArgs),d.onEnd&&d.onEnd(d.succeededArgs||d.failedArgs))},execute:function a(b){b&&(d.onEnd=b),d.syncDone=!0,d.invoke()},suspend:function a(){return d.asyncCount++,{succeed:function a(b){d.succeededArgs=b,d.resume()},fail:function a(b){d.failedArgs=b,d.resume()}}},resume:function a(){d.asyncCount--,d.invoke()}};return d}function q(a,b){var c,d,e,f;for(c in a)if(a.hasOwnProperty(c)){d=a[c];for(e in b)if(b.hasOwnProperty(e)&&(f=b[e],d===f&&d.OG))return!0}}function r(a,b){return q(b.views,a.A_J)}function s(a,b,c,d){var e,g,h,i,j,k,l;if(0!==b){for(h=c&&c.dataType,i=c&&c.dataMap,j=!!h,k=0;k<b;k++)l=d(k),i&&!f.isNullOrUndefined(i[l])&&(l=i[l]),j||f.isNullOrUndefined(l)||(g=l,j=!0),l instanceof Date&&(l=l.toISOString()),e||(e={}),e[l]||(e[l]=[]),e[l]&&e[l].push(k);return h?e.CL=h:e.CL=j?typeof g:"object",e}}b.generateFilterIndexCache=s;function t(a,b,c,d){var e,g,h,i,j;for(e in a)a.hasOwnProperty(e)&&(g=a[e],h=d&&d[e],i=h&&h.dataMap,g&&(j=c[e],i&&!f.isNullOrUndefined(i[j])&&(j=i[j]),j instanceof Date&&(j=j.toISOString()),g[j]?g[j].push(b):g[j]=[b]))}b.updateFilterIndexesCacheOnInsert=t;function u(a,b,c,d,e,g){var h,i=a[c],j=g&&g.dataMap;i&&e!==d&&(j&&(f.isNullOrUndefined(j[d])||(d=j[d]),f.isNullOrUndefined(j[e])||(e=j[e])),d instanceof Date&&(d=d.toISOString()),e instanceof Date&&(e=e.toISOString()),h=i[d],h&&(h.length>1?h.splice(h.indexOf(b),1):delete i[d],i[e]?i[e].push(b):i[e]=[b]))}b.updateFilterIndexesCacheOnUpdate=u;function v(a,b,c){var d,e,g,h,i;for(d in a)if(a.hasOwnProperty(d)&&(e=a[d]))for(g in e)if(e.hasOwnProperty(g)&&f.isArray(e[g])&&(h=e[g],f.isArray(h))){for(i=0;i<h.length;i++)h[i]>=b+c?h[i]-=c:h[i]>=b&&h[i]<b+c&&(h.splice(i,1),i--);0===h.length&&delete e[g]}}b.updateFilterIndexesCacheOnRemove=v,o=function(){function a(a,b){this.AEJ={},this.GNJ={},this.B_J=0,Object.defineProperty(this,"name",{get:function(){return this.Cj},set:function(a){var b,c,d,e,f=this.Cj;if(this.Cj=a,b=this.EEJ){for(c in this.A_J)this.A_J.hasOwnProperty(c)&&(d=this.A_J[c],d.C_J(f,a));e=b.tables,delete e[f],e[a]=this}}}),Object.defineProperty(this,"options",{get:function(){return this._dataSource.options},set:function(a){this.DEJ=!0,this._dataSource.options=a}}),this.name=a;var c;c=b instanceof d.DataSource?b:new d.DataSource(b),this._dataSource=c,this.views={},this.A_J={},this.HL=[],this.BEJ={},this.CEJ=[],this.DEJ=!0,this.Ze={}}return a.prototype.n_J=function(a,b,c){var d,e,g;(f.isNullOrUndefined(b)||""===b)&&(b="*"),"="===b[0]?(d=this.TNJ(b),d.gmb(0,a,c)):(e=this.Ze[b],e||(e=this.Ze[b]={}),g=a.getKey(),c?e[g]=a:delete e[g])},a.prototype.Bg=function(a){var b,c,d;a.indexOf(".")>-1&&(a=a.split(".")[0]),b=this.Ze[a];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],d.fh());b=this.Ze["*"];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],d.fh())},a.prototype.ZDJ=function(a){var b,c;if(this.EEJ=a,a)this.vDJ=new e.DataManagerCalcSource(a.Wu,this);else{this.vDJ=m;for(b in this.A_J)this.A_J.hasOwnProperty(b)&&(c=this.A_J[b],c.D_J(this))}},a.prototype.F4J=function(a,b,c){var d=this.vDJ;return d.getCalcService().parse(d,a,b||0,c||0)},a.prototype.G4J=function(a,b,c){var d=this.vDJ;return d.L$a(b),d.getCalcService().evaluateExpression(d,a,{row:b||0,col:c||0})},a.prototype.getDataSync=function(a){return this._dataSource.nEJ(a)},a.prototype.B9J=function(a,b){var c,d,e,f,g,h=this;if(a){if(a.indexOf(h)>=0)return m}else{if(h.N5J)return h.N5J;c=!0,a=[],b=[]}for(a.push(h),b.push(new Promise(function(a){return h.DEJ?h.fetch().then(a):void a(null)})),d=h.HL,e=0;e<d.length;e++)f=d[e],g=f.targetTable,g&&g.B9J(a,b);if(c)return h.N5J=Promise.all(b),h.N5J},a.prototype.fetch=function(a){var b,c,d=this;return d.QWJ&&(b=d.columns),c=d.length(),d._dataSource.load({reload:a}).then(function(e){var g,h,i,j,k,l,m,o,p,q=d._dataSource.options.schema;if(d.DEJ&&(g=d.get(0),f.isNullOrUndefined(g)&&q&&q.columns&&(g=q.columns),g&&(h=f.keys(g),i=d.columns={},j=d.HL,h.forEach(function(a){var c=b&&b[a];i[a]=d.$MJ(a,c),j.push({name:a})})),d.DEJ=!1),q&&q.columns){k=q.columns,l=[];for(m in k)k[m]&&k[m].indexed&&l.push(m);d.TOJ(l)}if(d.createIndexes(d.CEJ),d.QWJ=!1,a){if(c!==d.length()){o=d.views;for(p in o)o.hasOwnProperty(p)&&(o[p].fFJ=n)}d._dataSource.o5J(),d.Nm()}return Promise.resolve(e)})},a.prototype.$MJ=function(a,b){var c,d,e=this,g={name:a,value:a};if(!f.isNullOrUndefined(b)){b.value=void 0,b.name=void 0;for(d in b)b.hasOwnProperty(d)&&!f.isNullOrUndefined(b[d])&&(g[d]=b[d]);c=b.ny,delete b.ny}return Object.defineProperty(g,"dataType",{get:function(){return c},set:function(a){if(c!==a){"rowOrder"!==c&&"rowOrder"!==a||!e.isHierarchy()||e.setHierarchyOptionChanged(),c=a,e._dataSource.ZMJ(this.name,this.dataType,this.dataPattern);var b=this.value;e.Nm(b),e.FPJ(b)}}}),Object.defineProperty(g,"mappedName",{get:function(){return this.value},set:function(a){if(this.value!==a&&!f.isNullOrEmpty(a)){var b=this.value;e._dataSource.f4J(b,a),e.Nm(b),e.FPJ(a),e.d4J(b,a),e.e4J(b,a),e.HL.forEach(function(c){c.name===b&&(c.name=a)}),e.CEJ=e.CEJ.map(function(c){return c===b?a:c}),e.columns[a]=e.columns[b],delete e.columns[b],this.name=this.value=a}}}),Object.defineProperty(g,"relationship",{get:function(){var a,b,c,d=e.EEJ.relationships;for(a=0,b=d;a<b.length;a++){if(c=b[a],c.sourceTable===e&&c.sourceFieldName===this.value)return{table:c.targetTable,field:c.targetFieldName,sourceName:c.sourceRelationshipName,targetName:c.targetRelationshipName};if(c.targetTable===e&&c.targetFieldName===this.value)return{table:c.sourceTable,field:c.sourceFieldName,sourceName:c.sourceRelationshipName,targetName:c.targetRelationshipName}}},set:function(a){var b,c,d,f=e.EEJ.relationships;for(b=0,c=f;b<c.length;b++)if(d=c[b],d.sourceRelationshipName===a.sourceName){e.EEJ.removeRelationship(d.sourceRelationshipName);break}a.table&&a.field&&e.EEJ.addRelationship(e,this.value,a.sourceName,a.table,a.field,a.targetName)}}),g},a.prototype.length=function(){return this._dataSource.length()},a.prototype.getDirtyIndexes=function(){return this._dataSource.getDirtyIndexes()},a.prototype.isInserted=function(a){return this._dataSource.isInserted(a)},a.prototype.isUpdated=function(a){return this._dataSource.isUpdated(a)||this.E_J(a)},a.prototype.getErrorInfo=function(a){return this._dataSource.getErrorInfo(a)},a.prototype.E_J=function(a){var b,c,d,e,f,g,h,i=this,j=i.HL;for(i.B_J++,b=0;b<j.length;b++)if(c=j[b],d=c.targetTable,e=c.YDJ,d&&r(d,i)&&e&&e[a]&&!d.B_J)for(f=0,g=e[a];f<g.length;f++)if(h=g[f],d.isUpdated(h))return i.B_J--,!0;i.B_J--},a.prototype.insertItem=function(a,b,c,d){var e=this,f={index:a,data:b};this.Wq(i.Events.ItemInserting,f),this._dataSource.insertItem(a,b,function(d){e.HEJ(a,b),e.KNJ(a,b),e.Nm(),e.Wq(i.Events.ItemInserted,f),c&&c(d)},d)},a.prototype.updateItem=function(a,b,c,d){this._dataSource.updateItem(a,b,c,d)},a.prototype.jkK=function(a,b,c,d,e,f){var g=this;return function(h){g.NEJ(a,b,c),g.LNJ(a,d,b,c),g.Nm(),g.Wq(i.Events.ItemUpdated,e),f&&f(h)}},a.prototype.eBc=function(a,b,c,d,e,f){var g=b[c],h={index:a,data:b,field:c,originalValue:d,newValue:g};this.Wq(i.Events.ItemUpdating,h),this._dataSource.updateItem(a,b,this.jkK(a,d,g,c,h,e),f)},a.prototype.updateItemValue=function(a,b,c,d,e){var f,g,h=this._getValueByField(b,a),j=this.wEJ(a);j[b]=c,g={index:a,data:j,field:b,originalValue:h,newValue:c},this.Wq(i.Events.ItemUpdating,g),this._dataSource.updateItemValues(a,(f={},f[b]=c,f),this.jkK(a,h,c,b,g,d),e)},a.prototype.resetItem=function(a,b,c){var d,e,f,g,h,j=this,k=p(b,c);this.F_J(a,k.suspend),this._dataSource.isUpdated(a)&&(d=k.suspend(),e=d.succeed,f=d.fail,g=this.wEJ(a),h=this.BWJ(a),this.Wq(i.Events.ItemResetting,{index:a}),this._dataSource.resetItem(a,function(b){j.CWJ(a,g,h),j.Nm(),j.Wq(i.Events.ItemReset,{index:a,originalData:g,dataBeforeChanged:h}),e(b)},f)),k.execute()},a.prototype.CWJ=function(a,b,c){var d,e,g,h=this,i=h.columns;if(!f.isNullOrUndefined(b)&&!f.isNullOrUndefined(c))for(d in i)i.hasOwnProperty(d)&&(e=i[d],g=e.value instanceof Function?e.value.name:e.value,h.LNJ(a,g,b[g],c[g]))},a.prototype.F_J=function(a,b){var c,d,e=this,f=e.HL;for(e.B_J++,c=function(c){var d,g,h,i,j,k,l,m=f[c],n=m.targetTable,o=m.YDJ;if(n&&r(n,e)&&o&&o[a]&&!n.B_J){for(d=[],g=0,h=o[a];g<h.length;g++)i=h[g],n.isInserted(i)?d.push(i):n.isUpdated(i)&&(j=b(),k=j.succeed,l=j.fail,n.resetItem(i,k,l));d.length>0&&(d.sort(function(a,b){return b-a}),d.forEach(function(a){var c=b(),d=c.succeed,e=c.fail;n.Hzb(a,1,d,e)}))}},d=0;d<f.length;d++)c(d);e.B_J--},a.prototype.saveItem=function(a,b,c){var d,e,f,g=this,h=p(b,c),j=h.suspend(),k=j.succeed,l=j.fail;this.G_J(a,k,l),(this._dataSource.isUpdated(a)||this._dataSource.isInserted(a))&&(d=h.suspend(),e=d.succeed,f=d.fail,this.Wq(i.Events.ItemSaving,{index:a}),this._dataSource.saveItem(a,function(b){g.Nm(),g.Wq(i.Events.ItemSaved,{index:a}),e(b)},f)),h.execute()},a.prototype.G_J=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n=p(b,c),o=n.suspend,q=this,s=q.HL;for(q.B_J++,d=0;d<s.length;d++)if(e=s[d],f=e.targetTable,g=e.YDJ,f&&r(f,q)&&g&&g[a]&&!f.B_J)for(h=0,i=g[a];h<i.length;h++)j=i[h],(f.isUpdated(j)||f.isInserted(j))&&(k=o(),l=k.succeed,m=k.fail,f.saveItem(j,l,m));n.execute(function(){return q.B_J--})},a.prototype.get=function(a){return this._dataSource.get(a)},a.prototype.remove=function(a,b,c,d){var e,f,g,h,i=this;void 0===b&&(b=1),e=p(function(){i.Hzb(a,b,c,d)},d),f=e.suspend(),g=f.succeed,h=f.fail,this.H_J(a,b,g,h),e.execute()},a.prototype.Hzb=function(a,b,c,d){var e=this,f={index:a,count:b};this.Wq(i.Events.ItemRemoving,f),this._dataSource.remove(a,b,function(d){e.IEJ(),e.MNJ(a,b),e.Wq(i.Events.ItemRemoved,f),c&&c(d)},d)},a.prototype.H_J=function(a,b,c,d){var e,g,h=p(c,d),i=h.suspend,j=this,k=j.HL;for(j.B_J++,e=function(c){var d,e,g,h,j,l,m,n=k[c],o=n.targetTable,p=n.vEJ,q=n.YDJ;if(o&&p.u_J(n.name)&&q&&q[a]&&!o.B_J){for(d=i(),e=d.succeed,g=d.fail,h=[],j=void 0,l=function(b){var c=q[a+b];h=h.concat(Object.keys(c).map(function(a){return c[a]}))},m=0;m<b;m++)l(m);h.sort(function(a,b){return b-a}),j=h.map(function(a){return function(b,c){o.remove(a,1,b,c)}}),f.promiseSerialExecute(j).then(e).catch(g)}},g=0;g<k.length;g++)e(g);h.execute(function(){return j.B_J--})},a.prototype.getChanges=function(){return this._dataSource.getChanges()},a.prototype.isDataLengthChanged=function(){return this._dataSource.isDataLengthChanged()},a.prototype.submitChanges=function(a,b,c){var d=this;return new Promise(function(e,f){d.I_J(a,function(a){e(a),b&&b(a)},function(a){f(a),c&&c(a)})})},a.prototype.I_J=function(a,b,c){var d=this,e=p(function(){d.IEJ(),d.Wq(i.Events.ChangesSubmitting,n),d._dataSource.submitChanges(function(b,c,e){a?a(b,c,e):d.Wq(i.Events.ChangesSubmittedRowFailed,{index:b,reason:c,type:e})}).then(function(a){d.Wq(i.Events.ChangesSubmitted,a),b(a)}).catch(function(a){c(a)})}),f=e.suspend(),g=f.succeed,h=f.fail;this.J_J(g,h),e.execute()},a.prototype.J_J=function(a,b){var c,d,e,f,g,h,i,j=p(a,b),k=j.suspend,l=this,m=l.HL;for(l.B_J++,c=0;c<m.length;c++)d=m[c],e=d.targetTable,f=d.YDJ,e&&f&&!e.B_J&&(g=k(),h=g.succeed,i=g.fail,e.submitChanges(n,h,i));j.execute(function(){return l.B_J--})},a.prototype.cancelChanges=function(a,b){var c=this,d=p(function(){var b={isDataLengthChanged:c.isDataLengthChanged()};c.Wq(i.Events.ChangesCancelling,n),c._dataSource.cancelChanges(),c.IEJ(),c.PNJ(),c.Wq(i.Events.ChangesCancelled,b),a&&a(n)});this.K_J(d.suspend),d.execute()},a.prototype.K_J=function(a){var b,c,d,e,f,g,h,i=this,j=i.HL;for(i.B_J++,b=0;b<j.length;b++)c=j[b],d=c.targetTable,e=c.YDJ,d&&e&&!d.B_J&&(f=a(),g=f.succeed,h=f.fail,d.cancelChanges(g,h));i.B_J--},a.prototype.ehK=function(a){return a instanceof j.CalcField||a instanceof l.HierarchyField},a.prototype.fhK=function(){var a,b,c,d,e=this.options.schema.hierarchy.column,f=[RegExp("(\\[@)("+e+")\\]|(PARENT)|(CHILDREN)|(ONLYCHILDREN)|(LEVEL)|(LEVELROWNUMBER)")];for(a in this.BEJ)Object.prototype.hasOwnProperty.call(this.BEJ,a)&&(b=this.BEJ[a],b instanceof l.HierarchyField&&(b.QV(),f.push(RegExp("(\\[@)("+b.rOa+")\\]"))));c=function(a){if(Object.prototype.hasOwnProperty.call(d.BEJ,a)){var b=d.BEJ[a];b instanceof j.CalcField&&f.some(function(a){return a.test(b.rOa)})&&b.QV()}},d=this;for(a in this.BEJ)c(a)},a.prototype.IWJ=function(){var a,b;for(a in this.BEJ)Object.prototype.hasOwnProperty.call(this.BEJ,a)&&(b=this.BEJ[a],this.ehK(b)?b.QV():this.BEJ[a]=n)},a.prototype.Nm=function(a,b){var c,d,e;if(a){for(c=this.BEJ[a],this.ehK(c)?c.QV():this.BEJ[a]=n,d=0;d<this.HL.length;d++)if(e=this.HL[d],a===e.name||a===e.sourceField)return void(e.YDJ&&e.vEJ.Nm())}else for(this.IWJ(),d=0;d<this.HL.length;d++)e=this.HL[d],e.vEJ&&e.vEJ.Nm()},a.prototype.primaryKey=function(a){var b,c,d,e,g,h,i,j;if(0===arguments.length){if(0===this.CEJ.length){for(b in this.columns)this.columns[b].isPrimaryKey&&this.CEJ.push(b);this.createIndexes(this.CEJ)}return this.CEJ.join(",")}if(!f.isNullOrUndefined(a)&&(this.CEJ=this.CEJ.concat(a.split(",")),c=this._dataSource.options.schema,!f.isNullOrUndefined(c))){d=c.columns=c.columns||{},e=[];for(b in d)Object.prototype.hasOwnProperty.call(d,b)&&(g=d[b],g.isPrimaryKey&&e.push(b));if(0===e.length)this.CEJ.forEach(function(a){d[a]=d[a]||{},d[a].isPrimaryKey=!0});else for(h=this.CEJ.slice().sort(),e.sort(),i=e,j=0;j<h.length||j<i.length;j++)if(h[j]!==i[j])return void(this.CEJ=i)}},a.prototype.getIndexes=function(){return f.keys(this.AEJ)},a.prototype.NNJ=function(){return f.keys(this.GNJ)},a.prototype.createIndexes=function(a){var b,c,d,e=this.AEJ;for(b=0,c=a;b<c.length;b++)d=c[b],e[d]||(e[d]=this.JEJ(d))},a.prototype.TOJ=function(a,b){var c,d,e,f=this.GNJ;for(c=0,d=a;c<d.length;c++)e=d[c],f[e]&&!b||(f[e]=this.ONJ(e))},a.prototype.dropIndexes=function(a){var b,c,d,e=this.AEJ;for(b=0,c=a;b<c.length;b++)d=c[b],e[d]&&delete e[d]},a.prototype.clearIndexes=function(){this.AEJ={}},a.prototype.d4J=function(a,b){var c=this.AEJ;f.isNullOrUndefined(c[a])||(c[b]=c[a],delete c[a])},a.prototype.PNJ=function(){this.GNJ={}},a.prototype.e4J=function(a,b){var c=this.GNJ;f.isNullOrUndefined(c[a])||(c[b]=c[a],delete c[a])},a.prototype.IEJ=function(){this.Nm();var a=this.getIndexes();this.clearIndexes(),this.createIndexes(a)},a.prototype.QNJ=function(){var a=this.NNJ();this.PNJ(),this.TOJ(a)},a.prototype.JEJ=function(a){var b,c,d,e,f=this.length();for(c=0;c<f;c++)d=this.get(c),e=d[a],"string"!=typeof e&&(e+=""),b||(b={}),b[e]||(b[e]=[]),b[e]&&b[e].push(c);return b},a.prototype.ONJ=function(a){var b=this;return s(a,this.length(),this.GWJ(a),function(c){return b._getValueByField(a,c)})},a.prototype.KEJ=function(a){return!!this.AEJ[a]},a.prototype.search=function(a,b){if(!f.isNullOrUndefined(a)&&!f.isNullOrUndefined(b))return f.isString(a)||(a+=""),this.KEJ(b)?this.LEJ(a,b):this.MEJ(a,b)},a.prototype.vQJ=function(a){var b,c,d,e,f,g=this.primaryKey().split(",");if(0===g.length||!this.AEJ[g[0]])return[];if(1===g.length)return this.AEJ[g[0]][a];if(a=a.split("|"),a.length!==g.length)return[];for(b=0;b<a.length;b++)a[b]=a[b].trim();for(c={},d={},this.AEJ[g[0]][a[0]].forEach(function(a){
c[a]=1}),e=function(b){f.AEJ[g[b]]&&f.AEJ[g[b]][a[b]].forEach(function(a){c[a]===b&&(d[a]=b)}),c=d,d={}},f=this,b=1;b<a.length;b++)e(b);return Object.keys(c)},a.prototype.xQJ=function(a,b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q,r;if(c){for(d={},e=0;e<b.length;e++)g=b[e],h=this._dataSource._data[g],d[g]=h&&h.data[a];for(i=this.EEJ.relationships,j=0,k=i;j<k.length;j++)if(l=k[j],l.sourceTable===this&&l.targetTable!==this){for(m={},n=l.sourceRelationshipName+".",o=f.keys(l.targetTable.columns),p=0,q=o;p<q.length;p++)r=q[p],m[r]=l.sourceTable._getValueByField(n+r,a);d[l.sourceRelationshipName]=m}return d}for(d=[],e=0;e<b.length;e++)h=this._dataSource._data[b[e]],d.push(h&&h.data[a]);return d},a.prototype.iNb=function(a,b,c,d){var e,f,g=[],h=this.length();for(e=0;e<h;e++)f=b&&this._dataSource._data[b].data[e],b!==m&&f!==a&&f+""!==a||g.push(this.xQJ(e,c||this._dataSource.U,d));return g},a.prototype.MEJ=function(a,b){var c,d,e,f=[],g=this.length();for(c=0;c<g;c++)d=this.get(c),e=d[b],e!==a&&e+""!==a||f.push(d);return f},a.prototype.LEJ=function(a,b){var c,d,e,f=this.AEJ,g=f[b],h=g[a],i=[];if(h)for(c=0,d=h;c<d.length;c++)e=d[c],i.push(this.get(e));return i},a.prototype.HEJ=function(a,b){var c,d,e,f=this.AEJ;for(c in f)f.hasOwnProperty(c)&&(d=f[c],d&&(e=b[c],d[e]?d[e].push(a):d[e]=[a]))},a.prototype.KNJ=function(a,b){var c=this._dataSource.options.schema;t(this.GNJ,a,b,c&&c.columns)},a.prototype.NEJ=function(a,b,c){var d,e,f,g=this.AEJ;for(d in g)g.hasOwnProperty(d)&&(e=g[d],e&&c!==b&&(f=e[b],f&&f.length>1?f.splice(f.indexOf(a),1):delete e[b],e[c]?e[c].push(a):e[c]=[a]))},a.prototype.LNJ=function(a,b,c,d){u(this.GNJ,a,b,c,d,this.GWJ(b))},a.prototype.MNJ=function(a,b){v(this.GNJ,a,b)},a.prototype.L_J=function(a,b){var c,d,e=this.GNJ,g=e&&e[a];if(g)for(c in g)if(g.hasOwnProperty(c)&&(d=g[c],f.isArray(d)&&d.some(function(a){return a===b})))return c},a.prototype.PEJ=function(a){return this.CEJ.indexOf(a)>=0},a.prototype.y_J=function(){return this.CEJ.length>1},a.prototype.x_J=function(){return this.CEJ.length>0},a.prototype.defaultView=function(){var a=this;return a.QEJ?Promise.resolve(a.QEJ):new Promise(function(b,c){a.fetch().then(function(c){var d=a.get(0),e=f.keys(d),g=a.addView(h.DEFAULT_VIEW_NAME,e);a.QEJ=g,b(g)})})},a.prototype.addView=function(a,b,c,d){var e=new g.View(a,b,c,d);return e.REJ(this),this.views[a]=e,e},a.prototype.AXJ=function(a,b){var c=new g.View(a,b);return c.REJ(this),this.EEJ.BXJ[a]=c,c},a.prototype.removeView=function(a){var b=this.views;b[a].REJ(m),delete b[a],this.M_J(a)},a.prototype.M_J=function(a){var b,c,d=this.EEJ.tables;for(b in d)d.hasOwnProperty(b)&&(c=d[b],delete c.A_J[a])},a.prototype.SEJ=function(a){return this.views[a]},a.prototype.LSb=function(a){var b,c;for(b=0;b<this.HL.length;b++)if(c=this.HL[b],c.name===a)return c;return null},a.prototype.yEJ=function(a){var b,c=this.getDataSync(a),d=[];if(a)for(b=0;b<a.length;b++)d.push(c[a[b]]);else for(b=0;b<c.length;b++)d.push(c[b]);return d},a.prototype.wEJ=function(a){return this.yEJ([a])[0]},a.prototype.BWJ=function(a){return this._dataSource.AWJ(a)},a.prototype.zEJ=function(a,b){var c,d=[];for(c=0;c<b.length;c++)d.push(this._getValueByField(a,b[c]));return d},a.prototype.TNJ=function(a){return this.BEJ[a]||!this.d7J()||f.isNullOrEmpty(this._dataSource.BaK(a))||(this.BEJ[a]=new l.HierarchyField(a,this)),this.BEJ[a]||(this.BEJ[a]="="===a[0]?new j.CalcField(a,this):new k.TableField(a,this)),this.BEJ[a]},a.prototype.UEJ=function(a){var b=this.BEJ[a];return b&&b.setValue},a.prototype.VEJ=function(a,b,c){this.FPJ(a);var d=this.BEJ[a];return this.Bg(a),d&&d.setValue&&d.setValue(b,c)},a.prototype.N_J=function(a,b,c,d,e){this.FPJ(a);var f=this.BEJ[a];return this.Bg(a),f&&f.setItemValue&&f.setItemValue(b,c,d,e)},a.prototype.O_J=function(a,b){this.FPJ(a);var c=this.BEJ[a];return c&&c.hasItem&&c.hasItem(b)},a.prototype.P_J=function(a,b,c,d,e){this.FPJ(a);var f=this.BEJ[a];return this.Bg(a),f&&f.insertItem&&f.insertItem(b,c,d,e)},a.prototype._getValueByField=function(a,b){return this.FPJ(a),this.BEJ[a].getValue(b)},a.prototype.Q_J=function(a,b){return this.FPJ(a),this.BEJ[a].getOriginalValue(b)},a.prototype.R_J=function(a){return this.FPJ(a),this.BEJ[a].getRelatedTable()},a.prototype.S_J=function(a){return this.FPJ(a),this.BEJ[a].getRelationMaps()},a.prototype.T_J=function(a){var b,c,d,e=this,f=e.EEJ,g=f.relationships;for(b=0,c=g;b<c.length;b++){if(d=c[b],d.sourceTable===e&&d.sourceFieldName===a)return d.targetTable;if(d.targetTable===e&&d.targetFieldName===a)return d.sourceTable}},a.prototype.U_J=function(a,b){return this.FPJ(a),this.BEJ[a].getHostTableIndexes(b)},a.prototype.FPJ=function(a){this.BEJ[a]||this.TNJ(a)},a.prototype.WDJ=function(a,b,c,d,e){var f={name:b,sourceField:a,targetTable:c,targetField:d,vEJ:e};return this.HL.push(f),f},a.prototype.QJJ=function(a){for(var b=this.HL.length-1;b>=0;b--)this.HL[b].vEJ===a&&this.HL.splice(b,1)},a.prototype.WEJ=function(){var a,b,c=[this],d=this.HL;for(a=0;a<d.length;a++)b=d[a].targetTable,c.indexOf(b)===-1&&c.push(b);return c},a.prototype.XEJ=function(a){var b=this,c=b.HL,d={};return c.forEach(function(c){var e=c.name;d[e]=b._getValueByField(e,a)}),d},a.prototype.bGc=function(a){var b=this.GWJ(a);return b&&b.dataType},a.prototype.GWJ=function(a){var b,c=this,d=c._dataSource.options.schema;return d&&d.columns&&d.columns[a]?b=d.columns[a]:f.isNullOrUndefined(c.columns)||(b=c.columns[a]),b},a.prototype.V_J=function(a){var b,c,d;return 0===a.length?[]:(b=this,c=b.LSb(a[0]),d=c&&c.targetTable?c.targetTable.V_J(a.slice(1)):[],d.unshift(c),d.filter(function(a){return!f.isNullOrUndefined(a)}))},a.prototype.toJSON=function(){var a,b=this.views,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(b[a].toJSON());return{name:this.name,dataSourceOption:w(this._dataSource.options),primaryKey:this.primaryKey(),views:c,columns:this.LWJ(this.columns)}},a.prototype.fromJSON=function(a){var b,c,d,e,f=a.views;for(b=0,c=f;b<c.length;b++)d=c[b],e=this.addView(d.name,d.columns,!1,d.options),e.fromJSON(d);this.columns=a.columns,this.primaryKey(a.primaryKey)},a.prototype.bind=function(a,b){this._dataSource.bind(a,b)},a.prototype.unbind=function(a,b){this._dataSource.unbind(a,b)},a.prototype.Wq=function(a,b){return this._dataSource.Wq(a,b)},a.prototype.s_J=function(a){return this._dataSource.s_J(a)},a.prototype.LWJ=function(a){var b,c;for(b in a)a.hasOwnProperty(b)&&!f.isNullOrUndefined(a[b])&&(c=a[b],c.ny=c.dataType);return a},a.prototype.V6J=function(a,b,c){return this._dataSource.V6J(a,b,c)},a.prototype.W6J=function(a){return this._dataSource.W6J(a)},a.prototype.C6J=function(a,b,c){return this._dataSource.C6J(a,b,c)},a.prototype.c7J=function(){return this._dataSource.w6J()},a.prototype.C7J=function(){return this._dataSource.C7J()},a.prototype.E6J=function(a,b,c,d){return this.d7J()&&this.fhK(),this._dataSource.E6J(a,b,c,d)},a.prototype.d7J=function(){return this._dataSource.isHierarchy()},a.prototype.isHierarchy=function(){return this.d7J()},a.prototype.isHierarchyOptionChanged=function(){return this._dataSource.VlK()},a.prototype.setHierarchyOptionChanged=function(){this._dataSource.WlK()},a.prototype.z6J=function(a){return this._dataSource.z6J(a)},a.prototype.B6J=function(){return this._dataSource.B6J()},a.prototype.getHierarchyRootNode=function(){return this.B6J()},a.prototype.F6J=function(a){this._dataSource.F6J(a),this.fhK()},a.prototype.I6J=function(a,b){this._dataSource.I6J(a,b),this.fhK()},a.prototype.N6J=function(a,b){return this._dataSource.N6J(a,b)},a.prototype.Q6J=function(a,b){return this._dataSource.Q6J(a,b)},a.prototype.R6J=function(a,b){return this._dataSource.R6J(a,b)},a.prototype.T6J=function(a,b){return this._dataSource.T6J(a,b)},a.prototype.Q9J=function(a){return this._dataSource.Q9J(a)},a.prototype.CaK=function(a,b){return this._dataSource.CaK(a,b)},a}(),b.Table=o;function w(a){var b,c,d={data:a.data,remote:a.remote,autoSync:a.autoSync,batch:a.batch,schema:a.schema},e=a.remote;return e&&(b=d.remote={},c=e.read,c&&!f.isFunction(c)&&(b.read=c),c=e.create,c&&!f.isFunction(c)&&(b.create=c),c=e.update,c&&!f.isFunction(c)&&(b.update=c),c=e.delete,c&&!f.isFunction(c)&&(b.delete=c),c=e.batch,c&&!f.isFunction(c)&&(b.batch=c)),d}},"./dist/src/table/tableEvents.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Events=void 0;var d=function(){function a(){}return a.ItemInserting="ItemInserting",a.ItemInserted="ItemInserted",a.ItemUpdating="ItemUpdating",a.ItemUpdated="ItemUpdated",a.ItemResetting="ItemResetting",a.ItemReset="ItemReset",a.ItemSaving="ItemSaving",a.ItemSaved="ItemSaved",a.ItemRemoving="ItemRemoving",a.ItemRemoved="ItemRemoved",a.ChangesSubmitting="ChangesSubmitting",a.ChangesSubmittedRowFailed="ChangesSubmittedRowFailed",a.ChangesSubmitted="ChangesSubmitted",a.ChangesCancelling="ChangesCancelling",a.ChangesCancelled="ChangesCancelled",a}();b.Events=d},"./dist/src/table/tableField.js":function(a,b,c){"use strict";var d,e,f,g;Object.defineProperty(b,"__esModule",{value:!0}),b.TableField=void 0,d=c("./dist/src/dataSource/utils.js"),e=null,f=void 0;function h(a,b,c){return function(e,f,g,h){var i=a.map[e],j=i;return d.isNullOrUndefined(j)&&(i=a.map[e]=[]),f[b.targetField]=c._getValueByField(b.sourceField,e),a.relatedTable.P_J(a.subField,void 0,f,function(a){i.push(a.index),a.index=i.length-1,g&&g(a)},h)}}g=function(){function a(a,b){var c,f=this,g="string"==typeof a?a.split("."):a,i=g[0]&&b.LSb(g[0]);i&&i.targetTable?(this.relatedTable=i.targetTable,this.map=i.YDJ,this.setValue=null,this.map||(i.vEJ.XDJ(),this.map=i.YDJ),this.getRelationMaps=function(){var a=[{name:i.name,relationshipMap:i.vEJ.v_J(i.name)}];if(this.relatedTable)return this.subField?a.concat(this.relatedTable.S_J(this.subField)):a},this.getHostTableIndexes=function(a){var b,c,d,e,f=[a];return this.relatedTable?(this.subField&&(f=this.relatedTable.U_J(this.subField,a)),b=i.vEJ,c=void 0,c=b.targetTable===this.relatedTable?b.targetRelationshipName:b.sourceRelationshipName,d=this.relatedTable.LSb(c),e=d.YDJ,f.reduce(function(a,b){return a.concat(e[b])},[])):f},"object"===i.type?1===g.length?(this.getValue=function(a){var b=f.map[a];return d.isNullOrUndefined(b)?e:f.relatedTable.wEJ(b[0])},this.setValue=function(a){var b=a[g[0]];return b?a[i.sourceField]=b[i.targetField]:a[i.sourceField]=null,a}):(this.subField=g.slice(1).join("."),this.getValue=function(a){var b=f.map[a];return d.isNullOrUndefined(b)?e:f.relatedTable._getValueByField(f.subField,b[0])},this.getOriginalValue=function(a){var b=this.map[a];return d.isNullOrUndefined(b)?e:this.relatedTable.Q_J(this.subField,b[0])},this.setItemValue=function(a,b,c,g){var h=f.map[a];return d.isNullOrUndefined(h)?e:f.relatedTable.N_J(f.subField,h[0],b,c,g)},this.hasItem=function(a){var b=f.map[a];return!d.isNullOrUndefined(b)&&f.relatedTable.O_J(f.subField,b[0])},this.insertItem=h(this,i,b)):1===g.length?this.getValue=function(a){var b=f.map[a];return d.isNullOrUndefined(b)?[]:f.relatedTable.yEJ(b)}:(c=g[1]-1,isNaN(c)?(this.subField=g.slice(1).join("."),this.getValue=function(a){var b=f.map[a];return d.isNullOrUndefined(b)?e:f.relatedTable.zEJ(f.subField,b)},this.getOriginalValue=function(a){var b=this.map[a];return d.isNullOrUndefined(b)?e:this.relatedTable.Q_J(this.subField,b)},this.hasItem=function(a){var b=f.map[a];return b&&b.length>0},this.insertItem=h(this,i,b)):2===g.length?(this.arrayFieldIndex=g[1]-1,this.getValue=function(a){var b=f.map[a],c=b&&b[f.arrayFieldIndex];return d.isNullOrUndefined(c)?e:f.relatedTable.wEJ(c)}):(this.arrayFieldIndex=c,this.subField=g.slice(2).join("."),this.getValue=function(a){var b=f.map[a],c=b&&b[f.arrayFieldIndex];return d.isNullOrUndefined(c)?e:f.relatedTable._getValueByField(f.subField,c)},this.getOriginalValue=function(a){var b=this.map[a],c=b&&b[this.arrayFieldIndex];return d.isNullOrUndefined(c)?e:this.relatedTable.Q_J(this.subField,c)},this.setItemValue=function(a,b,c,e){var g=f.map[a],h=g&&g[f.arrayFieldIndex];if(!d.isNullOrUndefined(h))return f.relatedTable.N_J(f.subField,h,b,c,e)}))):(0===g.length?this.getValue=function(a){return b._dataSource.get(a)}:1===g.length?(this.getValue=function(a){return b._dataSource.getFieldValue(g[0],a)},this.getOriginalValue=function(a){return b._dataSource.getFieldOriginalValue(g[0],a)},this.getRelatedTable=function(){return b},this.setItemValue=function(a,c,d,e){return b.updateItemValue(a,g[0],c,d,e)},this.hasItem=function(a){return b._dataSource.length()>a},this.insertItem=function(a,c,e,f){var g=d.isNullOrUndefined(a)?b.length():a;return b.insertItem(g,c,function(a){a.index=g,e&&e(a)},f)}):this.getValue=function(a){var c,d=b._dataSource.getFieldValue(g[0],a);for(c=1;d&&c<g.length;c++)d=d instanceof Array?d[g[c]-1]:d[g[c]];return d},this.setValue=function(a,b){var c,e=a,f=a,h=g.length;for(c=0;f&&c<h;c++)e=f instanceof Array?f[g[c]-1]:f[g[c]],c!==h-1&&(f=e);return f!==e&&(e!==b||d.isNullOrUndefined(e)&&d.isNullOrUndefined(b))&&(f[g[h-1]]=b),a})}return a.prototype.getValue=function(a){return null},a.prototype.getValues=function(a,b){var c,d,e=[];for(b=b||0,c=b,d=a.length;c<d;c++)e.push(this.getValue(a[c]));return e},a.prototype.setValue=function(a,b){return null},a.prototype.setItemValue=function(a,b,c,d){},a.prototype.hasItem=function(a){},a.prototype.insertItem=function(a,b){},a.prototype.getOriginalValue=function(a){return null},a.prototype.getRelatedTable=function(){if(this.relatedTable)return this.subField?this.relatedTable.R_J(this.subField):this.relatedTable},a.prototype.getRelationMaps=function(){return[]},a.prototype.getHostTableIndexes=function(a){return[a]},a}(),b.TableField=g},"./dist/src/view/view-cross.js":function(a,b,c){"use strict";var d,e,f,g,h,i;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/view/view.js"),f=c("./dist/src/dataSource/utils.js"),g=c("./dist/src/viewField/fieldManager.js"),h=d.Common.j.Ia,i=void 0,h(e.View.prototype,{W_J:function(){var a=this;a.nOJ.setCrossFieldValues(a.fFJ)},X_J:function(){var a=this;a.nOJ&&(a.nOJ.clearCrossFieldData(),a.W_J())},Y_J:function(a,b){var c=this;c.nOJ&&c.nOJ.removeCrossFieldValues(a,b)},Z_J:function(a){var b=this;b.nOJ&&b.nOJ.resetCrossFieldRowValues(a)},$_J:function(a,b){if("string"==typeof a){var c=!0,d=a;f.isNullOrUndefined(this.i6.cross)||(a=this.i6.cross[d],f.isNullOrUndefined(a)||(c=!1)),c&&(a={over:d,attributes:[""]})}return g.isValidCross(this.uDJ,a,b)},__J:function(){return this.a0J()&&f.isNullOrUndefined(this.nOJ)},a0J:function(){return this.aFJ.some(function(a){return a.cross})},b0J:function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this,n=[],o=function(a,b){n.push({newIndex:b,columnInfos:m.aFJ.filter(function(b){return b.c0J===a}),fields:m.nOJ?m.nOJ.getFields(function(b){return b.initialOptionIndex===a}):[]})};for(b=0,c=a;b<c.length;b++)d=c[b],e=d.oldIndex,f=d.newIndex,o(e,f);for(g=function(a,b,c){a.forEach(function(a){return a.c0J=c}),b.forEach(function(a){return a.initialOptionIndex=c})},h=0,i=n;h<i.length;h++)j=i[h],k=j.columnInfos,l=j.fields,f=j.newIndex,g(k,l,f)},d0J:function(){var a=this,b=a.$EJ;return b.map(function(b){return a.e0J(b)})},f0J:function(a,b){var c,d,e,f,g,h,i,j=this,k=j.d0J(),l=j.g0J(k);if(l.length>0&&(a=l[a],b=l[b]),c=j.h0J[a],c&&"string"==typeof c.cross){if(d=j.h0J[a-1]||{},e=j.h0J[a+1]||{},d.cross===c.cross||e.cross===c.cross)return!0;if(f=j.h0J[b],g=j.h0J[a<b?b+1:b-1]||{},f.cross===c.cross||g.cross===c.cross)return!0}return h=function(a,b){return k.indexOf(a)>-1?h(a+b,b):a},i=function(a,b){var c=j.h0J[h(a,-1)]||{},d=j.h0J[h(b,1)]||{};if("string"==typeof c.cross&&c.cross===d.cross)return!0},i(a-1,a+1)||(a<b?i(b,b+1):i(b-1,b))},i0J:function(a){for(var b=this,c=0,d=function(a){return a&&0===a.length?i:a},e=function(){var d=b.aFJ[c];d.c0J===a?(b.pFJ=b.pFJ&&b.pFJ.filter(function(a){return a.field!==d.value}),b.oFJ=b.oFJ&&b.oFJ.filter(function(a){return a.field!==d.value}),b.oXJ=b.oXJ&&b.oXJ.filter(function(a){return a.field!==d.value}),b.pXJ=b.pXJ&&b.pXJ.filter(function(a){return a.field!==d.value}),b.aFJ.splice(c,1),b.nOJ&&b.nOJ.removeFields(c)):c++};c<b.aFJ.length;)e();b.pFJ=d(b.pFJ),b.oFJ=d(b.oFJ),b.oXJ=d(b.oXJ),b.pXJ=d(b.pXJ)},j0J:function(){var a=this;a.h0J.forEach(function(b,c){f.isNullOrUndefined(b.cross)||(f.isNullOrUndefined(b.k0J)&&(b.k0J=c),a.aFJ[c].k0J=b.k0J)})}})},"./dist/src/view/view-event.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/dataSource/utils.js"),f=c("./dist/src/table/tableEvents.js"),g=c("./dist/src/view/view.js"),h=c("./dist/src/view/view-util.js"),i=d.Common.j.Ia,j=null,k=void 0;function l(a){var b,c,d,g,h=[],i=[],j=Object.keys(f.Events);if(e.isArray(a))for(b=function(a){j.some(function(b){return b===a})?h.push(a):i.push(a)},c=0,d=a;c<d.length;c++)g=d[c],b(g);else j.some(function(b){return b===a})&&h.push(a);return[h,i]}i(g.View.prototype,{bind:function(a,b){var c=this,d=l(a),e=d[0],f=d[1];f.length>0&&(c.l0J(f,b),this.uDJ.bind(f,b)),e.length>0&&this.Fu(e,this.m0J(b))},Fu:function(a,b){var c=this,d=c.n0J(b);c.l0J(a,d),c.uDJ.bind(a,d)},unbind:function(a,b){this.uDJ.unbind(a,b)},Wq:function(a,b){return this.uDJ.Wq(a,b)},s_J:function(a){return this.uDJ.s_J(a)},l0J:function(a,b,c){var d,f,g,h,i,j,k,l,m=this;if(b)for(d=(c||m.uDJ).name,f=e.isArray(a)?a:[a],g=0,h=f;g<h.length;g++)i=h[g],j=e.isFunction(b)?b:b[i],j&&(k=m.o0J[d]=m.o0J[d]||{},l=k[i]=k[i]||[],l.push(j))},m0J:function(a){var b=this;return function(c,d){var f,g,h;if(b.p0J(d),e.isArray(a))for(f=0,g=a;f<g.length;f++)h=g[f],h.call(b,c,d);else a&&a.call(b,c,d)}},p0J:function(a){var b=this;a.hasOwnProperty("row")||Object.defineProperty(a,"row",{get:function(){return e.isNumber(a.cj)?a.cj:a.cj=b.kFJ(a.index)}})},n0J:function(a){var b=this;return function(c,d){b.q0J()&&a.call(b,c,d)}},q0J:function(a){return e.isBoolean(a)&&(this.OG=!a),!this.OG},r0J:function(a,b){var c=this;return c.q0J(!1),{success:function(b){c.q0J(!0),a&&a(b)},fail:function(a){c.q0J(!1),b&&b(a)}}},AJ:function(){var a=this;a.Fu(f.Events.ItemInserting,function(b,c){var d=c.index,e=c.data;a.RWJ(e),d===a.length()&&a.AX()&&a.DWJ(e)}),a.Fu(f.Events.ItemInserted,function(b,c){var d=c.index,e=c.data;a.s0J(d,e)}),a.Fu(f.Events.ItemUpdating,function(b,c){var d=c.data,e=c.originalValue;a.t0J(d,e)}),a.Fu(f.Events.ItemUpdated,function(b,c){var d=c.index,e=c.field,f=c.originalValue,g=c.newValue;a.u0J(d,e,f,g)}),a.Fu(f.Events.ItemReset,function(b,c){var d=c.index,e=c.originalData,f=c.dataBeforeChanged;a.v0J(d,e,f)}),a.Fu(f.Events.ItemRemoved,function(b,c){var d=c.index,e=c.count;a.w0J(d,e)}),a.Fu(f.Events.ChangesSubmitted,function(b,c){a.x0J()}),a.Fu(f.Events.ChangesCancelled,function(b,c){a.y0J(c.isDataLengthChanged)})},Lva:function(){var a,b,c,d,e,f,g,h,i=this,j=i.o0J;for(a in j)if(j.hasOwnProperty(a)){b=j[a];for(c in b)if(b.hasOwnProperty(c))for(d=b[c],e=0,f=d;e<f.length;e++)g=f[e],h=i.uDJ.EEJ.tables[a],h.unbind(c,g)}i.o0J={}},D_J:function(a){var b,c,d,e,f,g=this,h=g.o0J,i=a.name,j=h[i];for(b in j)if(j.hasOwnProperty(b))for(c=j[b],d=0,e=c;d<e.length;d++)f=e[d],a.unbind(b,f);h[i]=k},C_J:function(a,b){var c=this,d=c.o0J,e=d[a];delete d[a],d[b]=e},z0J:function(){var a,b,c,d,f,g,i,j,k;if(this.A0J())for(a=this,b=a,c=a.name,d=a.aFJ,f=a.uDJ,g=0,i=d;g<i.length;g++)j=i[g],e.isFunction(j.value)||h.isFormula(j.value)||!h.isRelation(j.value)||(k=f.R_J(j.value),!e.isNullOrUndefined(k)&&e.isNullOrUndefined(k.A_J[c])&&(k.A_J[c]=b,a.B0J(k)))},B0J:function(a){var b=this,c=b.uDJ,d=c.EEJ.relationships.reduce(function(b,d){return d.sourceTable===c&&d.targetTable===a?{relationshipName:d.sourceRelationshipName,relationFieldName:d.sourceFieldName}:d.sourceTable===a&&d.targetTable===c?{relationshipName:d.targetRelationshipName,relationFieldName:d.targetFieldName}:b},{}),g=d.relationshipName,i=d.relationFieldName,j=function(d,j){var l=b.n0J(function(a,d){var l,m,n,o,p,q,r,s=function(a,b){var c=a.value.split(".");return c[c.length-1-b]},t=b.h0J.filter(function(a){return h.isRelation(a.value)&&s(a,1)===g}),u=t;if(d.eventName!==f.Events.ItemUpdating&&d.eventName!==f.Events.ItemUpdated||(u=u.filter(function(a){return s(a,0)===d.field})),l=[k],u.forEach(function(c){var f,g,h,i=!e.isNullOrUndefined(c.cross);i?(g="string"==typeof c.cross?b.i6.cross[c.cross].over:c.cross.over,e.isNullOrUndefined(b.pFJ)||(h=e.findIndex(b.pFJ,function(a){return a.field.indexOf(c.value)>-1&&a.field.indexOf(g)>-1}),h>-1&&(f=b.pFJ[h].field))):b.GPJ(c.value)&&l.push(c.value),j.call(b,c.value,i,f)(a,d)}),d.eventName===f.Events.ItemInserted||d.eventName===f.Events.ItemRemoved||d.eventName===f.Events.ItemUpdated){if(d.eventName===f.Events.ItemUpdated&&(m=i===d.field,n=t.some(function(a){if(!e.isNullOrUndefined(a.cross)){var c=("string"==typeof a.cross?b.i6.cross[a.cross].over:a.cross.over).split(".").pop();if(c===d.field)return!0}return!1}),m||n))for(o=c.U_J(t[0].value,d.index),p=0,q=o;p<q.length;p++)r=q[p],b.Z_J(r);l.forEach(function(a){b.rWJ(k,!0,a,k)})}});b.l0J(d,l,a),a.bind(d,l)},l=function(a,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(b.AX())for(j=f.relatedViewIndexes||c.U_J(a,f.index),k=0,l=j;k<l.length;k++)m=l[k],n=void 0,o=void 0,p=void 0,d?(b.Z_J(m),n=c.L_J(e,m),g={},g[e]=n,o=g,p=b.lFJ(m,(h={},h[e]=!0,h))[e]):(n=c.L_J(a,m),i={},i[a]=n,o=i,p=c._getValueByField(a,m)),q=b.BMJ(m,o).data,b.EWJ(q,n),b.LNJ(m,a,n,p),c.LNJ(m,a,n,p);else if(d)for(j=f.relatedViewIndexes||c.U_J(a,f.index),r=0,s=j;r<s.length;r++)m=s[r],b.Z_J(m)};j(f.Events.ItemRemoving,function(a,b){return function(d,e){b&&(e.relatedViewIndexes=c.U_J(a,e.index))}}),j(f.Events.ItemRemoved,function(a,b,c){return function(d,e){l(a,b,c,e)}}),j(f.Events.ItemInserted,function(a,b,c){return function(d,e){l(a,b,c,e)}}),j(f.Events.ItemUpdating,function(a,d,e){return function(f,g){var h,i,j,k,l,m,n,o,p;if(b.AX())for(j=g.relatedViewIndexes=c.U_J(a,g.index),g.relatedViewValues=[],k=0,l=j;k<l.length;k++)m=l[k],n=void 0,o=void 0,d?(o=b.lFJ(m,(h={},h[e]=!0,h)),n=o[e]):(n=c._getValueByField(a,m),i={},i[a]=n,o=i),p=b.BMJ(m,o).data,g.relatedViewValues[m]=n,b.EWJ(p,n)}}),j(f.Events.ItemUpdated,function(a,d,e){return function(f,g){var h,i,j,k,l,m,n;if(b.AX())for(i=g.relatedViewIndexes||c.U_J(a,g.index),j=0,k=i;j<k.length;j++)l=k[j],m=g.relatedViewValues[l],n=void 0,d?(n=b.lFJ(l,(h={},h[e]=!0,h))[e],a=e):n=c._getValueByField(a,l),b.LNJ(l,a,m,n),c.LNJ(l,a,m,n)}})}})},"./dist/src/view/view-filter.js":function(a,b,c){"use strict";var d,e,f,g,h,i;Object.defineProperty(b,"__esModule",{value:!0}),d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/table/table.js"),f=c("./dist/src/view/view-util.js"),g=c("Common"),h=c("./dist/src/view/view.js"),(i=g.Common.j.Ia)(h.View.prototype,{buildInFilter:function(a){var b,c,d,e,g,h,i,j,k,l,m,n=this.uDJ,o={};if(a.length>1){for(b=[],c=[],d=function(d){var g,h=a[d],i=h.field,j=h.operator,k=h.value,l=h.relation,m=o[i];m||(m=o[i]=n.GWJ(i)),c.push(l),g=e.C0J(i,a[d]),g=f.mapGetValueFunc(m,g),g=f.D0J(e,j,k,g),b.push(function(a,b,c){return g(a,c,b[d])})},e=this,g=0;g<a.length;g++)d(g);return f.E0J(b,c)}return h=a[0],i=h.field,j=h.operator,k=h.value,l=n.GWJ(i),m=this.C0J(i,a[0]),m=f.mapGetValueFunc(l,m),m=f.D0J(this,j,k,m,i),function(a,b,c){return m(a,c,b[0])}},SOJ:function(a){var b=this,c=b.GNJ,d=b.uDJ;return d.GNJ[a]||c[a]},TOJ:function(a,b){var c=this,d=c.uDJ,e=c.aFJ,g,h=[],i=[];a.forEach(function(a){g=e.filter(function(b){return b.value===a})[0],g&&(f.isViewColumn(g)?h.push(a):i.push(a))}),d.TOJ(i,b),c.UOJ(h)},UOJ:function(a){var b,c,d,e=this,f=e.GNJ;for(b=0,c=a;b<c.length;b++)d=c[b],f[d]||(f[d]=this.ONJ(d))},C9J:function(){this.GNJ={}},ONJ:function(a){var b=this.nOJ.getFieldByName(a);return e.generateFilterIndexCache(a,this.length(),this.GWJ(a),function(a){return b.getValue(a)})},KNJ:function(a,b){var c=this,d=c.uDJ,f=d._dataSource.options.schema;e.updateFilterIndexesCacheOnInsert(this.GNJ,a,b,f&&f.columns)},LNJ:function(a,b,c,d){var f=this;e.updateFilterIndexesCacheOnUpdate(f.GNJ,a,b,c,d,f.GWJ(b))},CWJ:function(a,b,c){var e,f,g,h,i=this,j=i.aFJ;if(!d.isNullOrUndefined(b)&&!d.isNullOrUndefined(c))for(e=0,f=j;e<f.length;e++)g=f[e],h=g.value instanceof Function?g.value.name:g.value,i.LNJ(a,h,b[h],c[h])},MNJ:function(a,b){var c=this;e.updateFilterIndexesCacheOnRemove(c.GNJ,a,b)},gFJ:function(a){var b,c,e,g,h,i,j,k,l,m,n;if(a){if(b=this,c=b.fFJ,e=[],g=b.ZEJ,h=g.length,g&&h>0&&(e=c.slice(0,h)),i=h,"function"==typeof a)for(k=h;k<c.length;k++)l=c[k],a(b.getRowData(l,!0))&&(e[i]=l,i++);else if(d.isArray(a)||(a=[a]),f.isFieldListFilter(a))m=a[0].field,n=b.SOJ(m),n||(b.TOJ([m]),n=b.SOJ(m)),f.RNJ(e,i,n,a,c);else for(j=this.buildInFilter(a),k=h;k<c.length;k++){l=c[k];try{j(b.uDJ,a,l)&&(e[i]=l,i++)}catch(a){}}b.fFJ=e}},F0J:function(){var a,b,c,d,e,f=this.fFJ,g=this.ZEJ,h=g.length;for(g&&h>0&&(a=f.slice(0,h)),b=[],c=this.length(),d=0,e=0;e<c;e++)(!a||a.indexOf(e)<0)&&(b[d]=e,d++);a&&a.length>0?this.fFJ=a.concat(b):this.fFJ=b},DWJ:function(a){var b=this,c=b.pFJ;b.AX()&&b.autoFilter&&f.addFilterInfoForFieldValue(c,a,b)},EWJ:function(a,b){var c=this,d=c.pFJ;c.AX()&&c.autoFilter&&f.addFilterInfoForFieldValue(d,a,c,b)},RIJ:function(){var a=this;a.TWJ()&&a.filter(a.pFJ)},TWJ:function(){return this.autoFilter&&this.pFJ},AX:function(){var a=this,b=a.pFJ;return d.isArray(b)&&b.length>0},filter:function(a){var b,c=this;return c.fFJ||c.eFJ(),a?c.e7J(a)?(b=c.f7J(),this.fFJ=a.reduce(function(a,c){return a.push(b[c.D7J]),a},[])):(c.gFJ(a),c.isHierarchy()&&c.g7J()):c.isHierarchy()?c.eFJ():this.F0J(),this.pFJ=a,this.fFJ.length},g7J:function(){var a,b,c,e,f,g,h=this,i=h.fFJ;if(!d.isNullOrUndefined(i)&&0!==i.length){for(a=h.f7J(),b=a.reduce(function(a,b){var c=h.getHierarchyNode(b,!0);return a[c.id]=b,a},{}),c=[],e=0;e<i.length;e++)f=i[e],g=h.getHierarchyNode(f,!0),g.visit=!0,d.bubbleTree(g,function(a){a.isRoot||(a.visit=!0)}),d.traversalTree(g,function(a){a.visit=!0});d.traversalTree(h.getHierarchyRootNode(),function(a){a.visit&&(delete a.visit,c.push(b[a.id]))}),h.fFJ=c}},f7J:function(){var a=this,b=a.fFJ,c,e=a.isHierarchy(),f=a.h7J;return e&&!d.isNullOrUndefined(f)?f:(a.eFJ(),a.sort(a.oFJ),c=a.fFJ,a.fFJ=b,e&&(a.h7J=c),c)},e7J:function(a){var b=this;return!(!b.isHierarchy()||"function"==typeof a)&&(d.isArray(a)||(a=[a]),a.some(function(a){return d.isNumber(a.D7J)}))}})},"./dist/src/view/view-group.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/view/view.js"),f=c("./dist/src/dataSource/utils.js"),g=c("./dist/src/viewField/groupManager.js"),h=c("./dist/src/viewField/fields.js"),i=c("./dist/src/viewField/utils.js"),j=c("./dist/src/view/view-util.js"),k=d.Common.j.Ia,l=null,m=void 0,k(e.View.prototype,{groupBy:function(a){var b,c=this;return 0===arguments.length||!f.isArray(a)||c.hasHierarchyColumn()?c.wOJ:(b=c.aFJ.filter(function(a){return a.isCross}),a=b.length>0?a.filter(function(a){return!b.some(function(b){return b.value===a.field})}):a,0===a.length?c.wOJ:(c.fFJ||c.eFJ(),c.qOJ(a),c.uOJ(),c.tOJ(a),void(this.wOJ=a)))},removeGroupBy:function(){var a=this;a.isHierarchy()||(a.tRJ(),a.PRJ(),a.uOJ(),a.wOJ=l,a.hRJ(),a.QIJ())},tRJ:function(){var a=this;a.VOJ()},PRJ:function(){var a,b,c,d,e,f=this,g=f.uDJ,h=f.pFJ,i=f.GNJ,k=f.getColumnInfos();if(h){for(e=h.length-1;e>=0;e--)a=h[e],b=k.filter(function(b){return b.name===a.field})[0],b.yPJ?(c=j.getColumnName(k[b.APJ]),d=i[a.field],d&&(g.GNJ[c]=i[a.field],delete i[a.field]),a.field=c):b.isGroup&&(h.splice(e,1),delete i[a.field]);f.pFJ=0===h.length?m:h}},hRJ:function(){var a,b,c,d,e=this;if(e.oFJ){for(a=[],b=0,c=e.oFJ;b<c.length;b++)d=c[b],delete d.fRJ,d.$OJ?g.isGroupField(d.field)&&(delete d.$OJ,delete d.YOJ,d.field=g.getGroupFieldName(d.field),a.push(d)):a.push(d);e.oFJ=0===a.length?m:a}e.pXJ=m,e.oXJ=e.oFJ},qOJ:function(a){var b,c,d,e,f,g,h,i;a&&(this.VOJ(),b=this,c=b.fFJ,d=b.nOJ||b.pOJ(),e=b.rOJ||b.qSJ(a),f=d.buildGroupFields(a,c),g=e.groupBy(f,c),h=g.rootNode,i=g.indexMap,b.rQJ=h,b.fFJ=i,d.transposeSliceFields(f))},VOJ:function(){var a,b=this;b.rOJ=null,null===(a=b.nOJ)||void 0===a?void 0:a.reset(),b.rQJ=null},vOJ:function(a){var b=this;b.autoGroup&&b.wOJ&&(!f.isString(a)||b.GPJ(a))&&b.qOJ(b.wOJ)},GPJ:function(a){var b=this;return b.wOJ&&b.wOJ.some(function(b){return b.field===a||b.summaryFields&&b.summaryFields.some(function(b){return b.formula&&b.formula.indexOf(a)>-1||b.slice&&("string"==typeof b.slice?b.slice.indexOf(a)>-1:b.slice.field&&b.slice.field.indexOf(a)>-1)})})},qSJ:function(a){var b=this,c=b.uDJ,d=c.vDJ;return b.rOJ=new g.GroupManager(a,d.oSJ.bind(d)),b.rOJ},uOJ:function(){var a,b,c=this,d=c.getColumnInfos();for(a=d.length-1;a>=0;a--)b=d[a],b.isGroup&&d.splice(a,1),b.wPJ&&(b.wPJ=m,b.APJ=m);c.setColumnInfos(d)},tOJ:function(a){var b,c,d,e,g,k,l,m,n,o,p,q=this,r=[],s=-1,t=-1,u=j.GROUP_COLUMN_WIDTH,v={},w=function(b){var c,d,e,g=q.aFJ[b];for(c=0,d=a;c<d.length;c++)e=d[c],g.value===e.field&&(g.wPJ=!0,v[i.combineName(g.value,f.findIndex(a,function(a){return a.field===g.value}))]={colInfo:g,index:b})};for(b=0;b<q.aFJ.length;b++)w(b);for(c=q.nOJ,d=c.positionOfField,e=function(b,e){var g,k,l=c.getField(d[b]),m=l.name,n=l.extra.caption,o={caption:n,value:m,name:m,isGroup:!0};t=f.findIndex(a,function(a,b){return i.combineName(a.field,b)===m}),t>-1&&(u=j.getGroupColumnWidth(a[t].field,q.aFJ),s=t,o.yPJ=!0,g=v[m],f.isNullOrUndefined(g)||(g.colInfo.APJ=b,o.APJ=g.index+e)),o.YOJ=s,o.width=u,k=l.extra,k&&h.setFieldExtraProperties(function(a){k[a]&&(o[a]=k[a])}),r.push(o)},g=0,k=d.length-c.keysOfBaseField.length;g<k;g++)e(g,k);for(l=q.mPJ,m=q.getColumnInfos(),n=0,o=m;n<o.length;n++)p=o[n],l||(p.visible=!1),r.push(p);q.setColumnInfos(r)},KSb:function(a){var b,c,d,e,g,h,i,j,k,l;if(a){for(b=this,c=b.rQJ,d=[],e=b.aFJ,g=Array.isArray(a)?a:[a],h=[],i=[],j=function(a){var c=g[a],d=e.filter(function(a){return a.value===c.field})[0];d&&f.isNumber(d.YOJ)?(c.$OJ=!0,c.fRJ=b.UMJ([c]),c.YOJ=d.YOJ,h.push(c)):i.push(c)},k=0;k<g.length;k++)j(k);l=b.UMJ(i),i.forEach(function(a){return a.fRJ=l}),b.gRJ(c,d,0,h,i),b.fFJ=d}},gRJ:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o=this,p=a.children;for(p.length>1&&d.length>0&&(h=d.filter(function(a){return a.YOJ===c}),h.length>0&&(i=h[0].fRJ,p.sort(function(a,b){return i(o.uDJ,h,a.key,b.key)}))),j=0,k=p;j<k.length;j++)if(l=k[j],g=l.recordIndexes)for(g.length>1&&e.length>0&&(h=e,i=h[0].fRJ,g.sort(function(a,b){return i(o.uDJ,h,a,b)})),f=b.length,m=0,n=g.length;m<n;m++)b[f+m]=g[m];else o.gRJ(l,b,c+1,d,e)},setGroupSliceColumnSettings:function(a,b){var c=this,d=a[b];a.isGroup&&c.isGroupSliceColumn(a)&&c.getGroupSliceColumns(a).forEach(function(a){return a[b]=d})},isGroupSliceColumn:function(a){return a.isGroup&&g.isGroupSlice(a.value)},getGroupSliceColumns:function(a){var b,c,d=this,e=[],f=a.YOJ,h=d.aFJ;if(a.isGroup)for(b=0;b<h.length;b++)c=h[b],c.YOJ===f&&g.isGroupSlice(c.value)&&e.push(c);return e},updateColumnSettingToGroupOptions:function(a,b){var c,d,e,i=this,j=i.wOJ;if(j&&a.isGroup)switch(c=g.getGroupOptionIndexesFrom(a.value),d=function(a,c){h.setFieldExtraProperties(function(d){(f.isNullOrUndefined(b)||b===d)&&(a[d]=c[d])})},c.length){case 1:d(j[c[0]],a);break;case 2:d(j[c[0]].summaryFields[c[1]],a);break;case 3:e=j[c[0]].summaryFields[c[1]].slice,"string"==typeof e&&(e=j[c[0]].summaryFields[c[1]].slice={field:e}),d(e,a)}},detailColumnsVisible:function(a){var b,c,d,e=this;if(0===arguments.length)return e.mPJ;if(e.mPJ!==a&&(e.mPJ=a,e.rOJ))for(b=e.getColumnInfos(),c=e.nOJ,d=c.positionOfField.length-c.keysOfBaseField.length;d<b.length;d++)b[d].visible=a}})},"./dist/src/view/view-sort.js":function(a,b,c){"use strict";var d,e,f,g,h;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/dataSource/utils.js"),f=c("./dist/src/view/view.js"),g=c("./dist/src/view/view-util.js"),h=d.Common.j.Ia;function i(a){return a.fFJ.reduce(function(b,c){var d=a.getHierarchyNode(c,!0);return e.isNullOrUndefined(d)||(b[d.id]=c),b},{})}function j(a,b){return function(c){e.isNullOrUndefined(a[c.id])||b.push(a[c.id])}}h(f.View.prototype,{TMJ:function(a){var b,c,d={},f=this.C0J(a,d);for(b=0;b<this.fFJ.length;b++)if(c=f(d,b,d),!e.isNullOrUndefined(c))return c;return null},UMJ:function(a,b){var c,d,f,h,i,j,k;if(1===a.length)return b=b||0,
c=a[0],d=this.C0J(c.field,c),f=void 0,c.compare?f=function(a,c,e,f){var g=d(a,e,c[b]),h=d(a,f,c[b]);return c[b].compare(g,h,c[b].ascending)}:(h=this.TMJ(c.field),null===h?f=function(){return 0}:(i=c.ascending,f=function(a,c,e,f){var j=d(a,e,c[b]),k=d(a,f,c[b]);return g.compareValue(i,h,j,k)})),f;for(j=0;j<a.length;j++)c=a[j],k=this.RMJ(c.field),k.isGroup&&e.isNullOrUndefined(c.ascending)&&(c.compare=function(a,b){return a===b?0:1}),c.XOJ=this.UMJ([c],j);return g.multiSort},iFJ:function(a){if(a){var b=this;if(b.isHierarchy())return b.h7J=null,b.oXJ=g.getSortInfos(a),void b.i7J(a);if(b.wOJ)return b.pXJ=g.getSortInfos(a),void b.KSb(a);b.oXJ=g.getSortInfos(a),b.KWJ(a)}},KWJ:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;a&&(b=this,c=b.fFJ,e=b.ZEJ,f=e.length,e&&f>0&&(d=c.slice(0,f),c=c.slice(f)),g=Array.isArray(a)?a:[a],h=b.UMJ(g),i=g[0],j=i.startRow,k=void 0===j?0:j,l=i.endRow,m=void 0===l?b.length():l,n=c.slice(0,k),o=c.slice(k,m),o.sort(function(a,c){return h(b.uDJ,g,a,c)}),p=c.slice(m),q=n.concat(o,p),d&&d.length>0?b.fFJ=d.concat(q):b.fFJ=q)},j7J:function(){var a,b=this,c=b.uDJ.c7J();return!e.isNullOrUndefined(c)&&e.isNullOrUndefined(b.oFJ)?((!b.fFJ||b.fFJ.length<b.length())&&(b.fFJ=b.l7J()),b.fFJ&&b.fFJ.length>0&&(a={field:c,ascending:!0},b.isHierarchy()?b.i7J(a):b.KWJ(a)),!0):e.isNullOrUndefined(c)&&e.isNullOrUndefined(b.oFJ)&&b.isHierarchy()?((!b.fFJ||b.fFJ.length<b.length())&&(b.fFJ=b.l7J()),b.fFJ&&b.fFJ.length>0&&b.R9J(),!0):void 0},i7J:function(a){var b,c,d,f,g,h;a&&(b=this,c=b.getHierarchyRootNode(),d=[],f=Array.isArray(a)?a:[a],g=i(b),h=b.UMJ(f),f.forEach(function(a){return a.fRJ=h}),e.traversalTree(c,j(g,d),{compareFn:function(c,d){return a=f,h=a[0].fRJ,e.isNullOrUndefined(g[c.id])||e.isNullOrUndefined(g[d.id])?0:h(b.uDJ,a,g[c.id],g[d.id])}}),b.fFJ=d)},R9J:function(){var a=this,b=a.getHierarchyRootNode(),c=[],d=i(a);e.traversalTree(b,j(d,c),{field:"sequence",isOrderChildren:!1}),a.fFJ=c},QIJ:function(){var a=this;a.SWJ()&&a.sort(a.oFJ)},SWJ:function(){return this.autoSort&&this.oFJ},sort:function(a){var b=this;b.fFJ||b.eFJ(),b.iFJ(a),this.oFJ=a},qXJ:function(a){var b=this,c=b.autoSort,d=b.oXJ&&b.oXJ.length>0,e=b.pXJ&&b.pXJ.length>0;c&&d&&(b.isHierarchy()?b.i7J(b.oXJ):b.KWJ(b.oXJ)),b.vOJ(a),c&&e&&b.KSb(b.pXJ)}})},"./dist/src/view/view-style.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),d=c("Common"),e=c("./dist/src/view/view.js"),(f=d.Common.j.Ia)(e.View.prototype,{getStyleRules:function(){return this.i6.styleRules},getStyleRule:function(a){var b=this.getStyleRules();return b[a]},addStyleRule:function(a,b,c){var d,e;a&&(d={},b&&(d.style=b),c&&(d.rule=c),e=this.getStyleRules(),e[a]=d)},removeStyleRule:function(a){var b=this.getStyleRules();delete b[a]},clearStyleRules:function(){this.i6.styleRules={}}})},"./dist/src/view/view-util.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=this&&this.__assign||function(){return k=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},k.apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.G0J=b.RNJ=b.mapGetValueFunc=b.E0J=b.removeExtraInfos=b.addFilterInfoForFieldValue=b.isRelation=b.isFormula=b.isFieldListFilter=b.isViewColumn=b.isTableDataReady=b.getColumnName=b.getGroupColumnWidth=b.applyDateTimePicker=b.array_find=b.generatePinnedColumnIndexMap=b.getSortInfos=b.multiSort=b.D0J=b.compareValue=b.GROUP_COLUMN_WIDTH=void 0,d=c("Common"),e=c("./dist/src/dataSource/utils.js"),f=["eq","neq","lt","lte","gt","gte"],g=["startswith","doesnotstartwith","endswith","contains"],h=["doesnotendwith","doesnotcontain"],i=null,j=void 0,b.GROUP_COLUMN_WIDTH=100;function l(a,b,c,d){var f=a?c:d,g=a?d:c;return e.isNullOrUndefined(f)&&e.isNullOrUndefined(g)?0:e.isNullOrUndefined(f)?-1:e.isNullOrUndefined(g)?1:"number"==typeof b||b instanceof Date?f-g:f>g?1:f<g?-1:0}b.compareValue=l;function m(a,b,c,d,e){var i,j;if(c instanceof Date)if(f.indexOf(b)>-1)c=c.getTime(),i=d,d=function(a,b,c){return i(a,b,c)&&i(a,b,c).getTime()};else{if(g.indexOf(b)>-1)return function(){return!1};if(h.indexOf(b)>-1)return function(){return!0}}return j=n(a,b,c,e),function(a,b,c){return j(d(a,b,c))}}b.D0J=m;function n(a,b,c,f){var g,h,k,l,m,n=c+"",r=n&&n.length;switch(e.isString(c)&&(g=d.Common.q.ub(c)),h=a.uDJ,b){case"eq":return k=function(a){return a===c},e.isNullOrUndefined(c)&&(k=function(a){return a===i||a===j}),g?function(a){return RegExp("^"+g+"$").test(a)}:k;case"neq":return l=function(a){return a!==c},e.isNullOrUndefined(c)&&(l=function(a){return a!==i&&a!==j}),g?function(a){return!RegExp("^"+g+"$").test(a)}:l;case"lt":return function(a){return null!==a&&a<c};case"lte":return function(a){return null!==a&&a<=c};case"gt":return function(a){return a>c};case"gte":return function(a){return a>=c};case"startswith":return g?function(a){return RegExp("^"+g).test(a)}:function(a){return(a+"").substr(0,r)===c};case"doesnotstartwith":return g?function(a){return!RegExp("^"+g).test(a)}:function(a){return(a+"").substr(0,r)!==c};case"endswith":return g?function(a){return RegExp(g+"$").test(a)}:function(a){return(a+"").indexOf(c,(a+"").length-r)!==-1};case"doesnotendwith":return g?function(a){return!RegExp(g+"$").test(a)}:function(a){return(a+"").indexOf(c,(a+"").length-r)===-1};case"contains":return g?function(a){return RegExp(g).test(a)}:function(a){return(a+"").indexOf(c)>=0};case"doesnotcontain":return g?function(a){return!RegExp(g).test(a)}:function(a){return(a+"").indexOf(c)<0};case"top":case"bottom":return m=a.SOJ(f),m||(a.TOJ([f]),m=a.SOJ(f)),c=o(Object.keys(m),b,c),function(a){return c.indexOf(a)>-1};case"above":return c=p(h._dataSource._data[f].data,h.GWJ(f)),function(a){return a>c};case"below":return c=p(h._dataSource._data[f].data,h.GWJ(f)),function(a){return a<c};case"quarter":return function(a){return q(c,a)};case"month":return function(a){return(a&&a.getMonth())===c};default:return function(){return!1}}}function o(a,b,c){var d,e,f,g=[];for(d=0,e=a;d<e.length;d++)f=e[d],isNaN(f)||g.push(parseFloat(f));return c>=g.length?g:("top"===b?g=u(g,c):"bottom"===b&&(g=x(g,c)),g)}function p(a,b){var c,d,e,f,g=0;if(!a||0===a.length)return g;for(c=b&&b.dataMap,d=0,e=a;d<e.length;d++)f=e[d],c&&"number"==typeof c[f]&&(f=c[f]),"number"==typeof f&&(g+=f);return g/a.length}function q(a,b){var c=b&&b.getMonth();switch(a){case 0:return c<=2;case 1:return c>=3&&c<=5;case 2:return c>=6&&c<=8;case 3:return c>=9;default:return!1}}function r(a,b,c,d){var e,f,g,h=0;for(e=0,f=b.length;e<f&&(g=b[e],h=g.XOJ(a,b,c,d),0===h);e++);return h}b.multiSort=r;function s(a){return Array.isArray(a)?a:[a]}b.getSortInfos=s;function t(a,b){var c,d;if(0===a.length)return[];for(c=a.slice(0),d=0;d<b;d++)a.indexOf(d)===-1&&c.push(d);return c}b.generatePinnedColumnIndexMap=t;function u(a,b){var c,d,e=v(a.slice(0,b));for(c=b;c<a.length;c++)a[c]>e[0]&&(d=e[0],e[0]=a[c],a[c]=d,v(e));return e}function v(a){var b,c=a.length;for(b=Math.floor(c/2);b>=0;b--)w(a,b,c);return a}function w(a,b,c){var d,e=2*b+1,f=2*b+2,g=b;e<c&&a[e]<a[g]&&(g=e),f<c&&a[f]<a[g]&&(g=f),b!==g&&(d=a[b],a[b]=a[g],a[g]=d,w(a,g,c))}function x(a,b){var c,d,e=y(a.slice(0,b));for(c=b;c<a.length;c++)a[c]<e[0]&&(d=e[0],e[0]=a[c],a[c]=d,y(e));return e}function y(a){var b,c=a.length;for(b=Math.floor(c/2);b>=0;b--)z(a,b,c);return a}function z(a,b,c){var d,e=2*b+1,f=2*b+2,g=b;e<c&&a[e]>a[g]&&(g=e),f<c&&a[f]>a[g]&&(g=f),b!==g&&(d=a[b],a[b]=a[g],a[g]=d,z(a,g,c))}function A(a,b){var c,d,e,f;for(c=0,d=a;c<d.length;c++)if(e=d[c],f=b(e))return f}b.array_find=A;function B(a){var b,c,d,e=a.style;e||(e=a.style={}),b=e.cellButtons,b||(b=e.cellButtons=[]),c=e.dropDowns,c||(c=e.dropDowns=[]),d=A(b,function(a){return"openDateTimePicker"===a.command}),d||b.push({imageType:"dropdown",command:"openDateTimePicker",useButtonStyle:!1,buttonBackColor:"transparent"}),d=A(c,function(a){return"dateTimePicker"===a.type}),d||c.push({type:"dateTimePicker",option:{showTime:!1,calendarPage:"day",startDay:"sunday"}})}b.applyDateTimePicker=B;function C(a,c){var d,f=e.findIndex(c,function(b){return D(b)===a});return f>-1?(d=c[f],d.width||b.GROUP_COLUMN_WIDTH):b.GROUP_COLUMN_WIDTH}b.getGroupColumnWidth=C;function D(a){var b=a.value;return"string"==typeof b?b:"function"==typeof b?b.name:void 0}b.getColumnName=D;function E(a){return!a.DEJ}function F(a){var b,c,d,e,f=E(a);if(f){for(a.B_J++,b=a.WEJ(),c=0,d=b;c<d.length&&(e=d[c],!e||e.B_J||(f=F(e),f));c++);a.B_J--}return f}b.isTableDataReady=F;function G(a){return a.isGroup||a.isCross}b.isViewColumn=G;function H(a){return a[0].operator===j}b.isFieldListFilter=H;function I(a){return a[0].operator!==j&&a[0].HXJ}function J(a){return"="===a[0]}b.isFormula=J;function K(a){return a.indexOf(".")>-1}b.isRelation=K;function L(a,b,c,d){var f,g,h,i={},j=function(f){var g,h,j,l,m,n,o,p,q,r;if(f&&!i[f.field]){if(i[f.field]=!0,g=c.SOJ(f.field),g||(c.TOJ([f.field]),g=c.SOJ(f.field)),h=g&&Object.keys(g),j=b[f.field],l=void 0,j instanceof Date){for(m=new Date(j),m.setHours(0,0,0,0),n=m.toISOString().slice(0,10),l=!0,o=0,p=h;o<p.length;o++)if(q=p[o],q.startsWith(n)){l=!1;break}}else l=e.isNullOrUndefined(j)?h.indexOf("null")===-1&&h.indexOf("undefined")===-1:h.indexOf(j+"")===-1;if(!a.some(function(a){return a.field===f.field&&a.value===j})&&l&&(H(a)?a.push(k(k({},f),{value:j,isAdded:!0})):(I(a)||j===d&&void 0===d)&&a.push(k(k({},f),{value:j,operator:"eq",relation:"or",isAdded:!0}))),h.indexOf(d+"")>-1&&1===g[d].length&&d!==j)for(r=0;r<a.length;r++)if(a[r].value===d&&a[r].isAdded){a.splice(r,1);break}}};for(f=0,g=a;f<g.length;f++)h=g[f],j(h)}b.addFilterInfoForFieldValue=L;function M(a){var b,c,d,f,g;if(!e.isNullOrUndefined(a)){for(b=[],c=0,d=a;c<d.length;c++)f=d[c],g=k({},f),g.getValue&&delete g.getValue,b.push(g);return b}return a}b.removeExtraInfos=M;function N(a,b){var c=function(){var c,d=[],e=[a[0]];for(c=1;c<a.length;c++)"or"===b[c]?(d.push(e),e=[a[c]]):e.push(a[c]);return e.length>0&&d.push(e),d},d=function(a,b,c,d){return d.every(function(d){return d(a,b,c)})},e=c();return function(a,b,c){return e.some(function(e){return d(a,b,c,e)})}}b.E0J=N;function O(a,b){if(a&&a.dataMap){var c=JSON.parse(JSON.stringify(a.dataMap));return function(a,d,e){var f=b(a,d,e);return void 0!==c[f]?c[f]:f}}return b}b.mapGetValueFunc=O;function P(a,b,c,d,e){var f,g,h,k,l,m,n,o,p,q,r,s,t=[],u=!1,v=!1,w=d.map(function(a){var b=a.value;return b===i&&(u=!0),b===j&&(v=!0),a.value});for(u&&!v&&w.push(j),v&&!u&&w.push(i),f=0,g=w;f<g.length;f++)for(h=g[f],k=c&&c[h]||[],l=0,m=k;l<m.length;l++)n=m[l],t[n]=!0;for(o=b,p=a.reduce(function(a,b){return a[b]=!0,a},{}),q=0,r=e;q<r.length;q++)s=r[q],t[s]&&(b>0?p[s]||(a[o]=s,o++):(a[o]=s,o++))}b.RNJ=P;function Q(a,b,c,d,f,g,h){var i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=[],A=d.map(function(a,b){return b}),B=[];if(f&&f.length&&(A=[],i=!1,d.forEach(function(a,b){g.indexOf(b)>-1?(z.push(b),A.push(j)):(z.push(j),A.push(b)),a.isCross&&(i=!0)}),a=f[a],b=f[b],i)){for(k=[],l=[],m=0;m<d.length;m++)d[m].isCross?(k[d[m].c0J]||(k[d[m].c0J]=[],B.push(k[d[m].c0J])),n=k[d[m].c0J],n.push(m)):B.push(m),a===m&&(a=B.length-1),b===m&&(b=B.length-1);for(o=0,p=g;o<p.length;o++)q=p[o],l.push(B.indexOf(q));z=[],A=[],B.forEach(function(a,b){l.indexOf(b)>-1?(z.push(b),A.push(j)):(z.push(j),A.push(b))}),c=1}if(e.swapArrayItems(A,a,b,c),A=A.filter(function(a){return!e.isNullOrUndefined(a)}),f&&f.length){for(m=0;m<z.length;m++)void 0===z[m]&&(z[m]=A.shift());if(B&&B.length){for(r=[],s=0;s<z.length;s++)if(t=z[s],Array.isArray(B[t])){if(u=h[s].cross,"string"==typeof u){for(v=[z[s]];s+1<h.length&&u===h[s+1].cross;)v=v.concat(z[s+1]),s++;for(w=B[v[0]].length,x=[],y=0;y<w;y++)for(m=0;m<v.length;m++)x.push(B[v[m]][y]);r=r.concat(x);continue}r=r.concat(B[t])}else r.push(B[t]);z=r}}else z=A;return z}b.G0J=Q},"./dist/src/view/view.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/view/view.js"),b),e(c("./dist/src/view/view-style.js"),b),e(c("./dist/src/view/view-event.js"),b),e(c("./dist/src/view/view-group.js"),b),e(c("./dist/src/view/view-sort.js"),b),e(c("./dist/src/view/view-filter.js"),b),e(c("./dist/src/view/view-cross.js"),b)},"./dist/src/view/view.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l=this&&this.__assign||function(){return l=Object.assign||function(a){var b,c,d,e;for(c=1,d=arguments.length;c<d;c++){b=arguments[c];for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},l.apply(this,arguments)},m=this&&this.__spreadArrays||function(){var a,b,c,d,e,f,g,h;for(a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(d=Array(a),e=0,b=0;b<c;b++)for(f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d};Object.defineProperty(b,"__esModule",{value:!0}),b.View=void 0,d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/interfaces/interface.js"),f=c("./dist/src/view/view-util.js"),g=c("./dist/src/viewField/fieldManager.js"),h=c("Common"),i=null,j=void 0;function n(a){return a instanceof Date&&!isNaN(a.valueOf())}function o(a){return h.Common.l.Daa(a)}function p(a){var b=h.Common.l.Rka(a);return b&&!n(b)&&(b=h.Common.l.Yb(a)),n(b)?b:null}k=function(){function a(a,b,c,e){void 0===c&&(c=!0),void 0===e&&(e={}),this.YEJ=10,this.ZEJ=[],this.$EJ=[],this._EJ=[],this.GNJ={},this.OG=!1,this.o0J={};var f=this;f.name=a,Object.defineProperty(f,"tableName",{get:function(){var a;return null===(a=f.uDJ)||void 0===a?void 0:a.name}}),b||(b=[]),f.h0J=d.clone(b),f.aFJ=b.map(function(a){return"string"==typeof a?a={name:a,value:a}:a.name||"string"!=typeof a.value||(a.name=a.value),a.value&&"="===a.value[0]&&(a.readonly=!0),a}),f.bFJ=c,f.autoSort=!0,f.autoFilter=!1,f.autoGroup=!0,f.mPJ=!0,f.i6=e,e.styleRules||f.clearStyleRules()}return a.prototype.A0J=function(){var a=this,b=a.uDJ;return f.isTableDataReady(b)},a.prototype.F4J=function(a,b,c){var d=this.uDJ;return d&&d.F4J(a,b,c)},a.prototype.G4J=function(a,b,c){var d=this.jFJ(b),e=this.R0J(c);return this.K9J(a,d,e)},a.prototype.K9J=function(a,b,c){var d=this.uDJ;return d&&d.G4J(a,b,c)},a.prototype.H0J=function(){var a,b,c,e,f=this,g=f.uDJ;if(g){if(f.bFJ&&(a=g.columns,b=f.aFJ,a&&b.length<=0))for(c in a)a.hasOwnProperty(c)&&(e=a[c],b.push(d.clone(e)));f.LMJ(),f.IRJ()}},a.prototype.REJ=function(a){var b=this;return a?(b.uDJ=a,b.z0J(),b.a0J()?b.A0J()&&(b.pOJ(),b.H0J()):b.H0J(),b.A0J()&&(b.w4J(),b.x4J=!0),void b.AJ()):(b.Lva(),void(b.uDJ=a))},a.prototype.LMJ=function(){var a,b,c,e,g,h,i,j,k,l,m,n,o,p=null===(b=null===(a=this.uDJ._dataSource.options)||void 0===a?void 0:a.schema)||void 0===b?void 0:b.columns;if(p)for(c=this.aFJ,e=this.isHierarchy(),g=e&&this.uDJ._dataSource.options.schema.hierarchy.column,h=["caption","width","style","conditionalFormats","validator","isPrimaryKey","readonly","required","defaultValue","headerStyle","visible","headerFit","indexed","allowSort","allowFilterByValue","allowFilterByList","dataMap","lookup"],i=0,j=c;i<j.length;i++)if(k=j[i],"string"==typeof k.value&&(l=p[k.value])){for(m=0,n=h;m<n.length;m++)o=n[m],d.isNullOrUndefined(k[o])&&(k[o]=l[o]);k.dataType=l.dataType,"date"===l.dataType&&f.applyDateTimePicker(k),!e||k.value!==g&&"rowOrder"!==l.dataType||(k.readonly=!0),l.EhK&&"rowOrder"!==l.dataType&&(k.readonly=!1,delete l.EhK)}},a.prototype.IRJ=function(){var a,b,c,e=this.i6.defaultColumnWidth||60,f=this.aFJ;for(a=0,b=f;a<b.length;a++)c=b[a],d.isNullOrUndefined(c.width)&&(c.width=e)},a.prototype.eFJ=function(a){this.j7J()||(this.fFJ=this.l7J(a))},a.prototype.l7J=function(a){var b,c,d=[],e=a||this.length(),f=this.ZEJ,g=f.length;for(g>0&&(d=f.slice(0)),b=g,c=0;c<e;c++)f.indexOf(c)===-1&&(d[b]=c,b++);return d},a.prototype.RMJ=function(a){var b,c,d=this.aFJ;for(b=0;b<d.length;b++)if(c=d[b],c.value===a||c.caption===a)return this.uDJ.columns[c.value]?c.value:f.isViewColumn(c)?{value:c.value,isGroup:c.isGroup,isCross:c.isCross}:{value:c.value};return a===this.uDJ.c7J()?a:i},a.prototype.C0J=function(a,b){var c,e,g=this,h=this.RMJ(a),i=this.uDJ,j=this.nOJ;return b?f.isViewColumn(h)?(b.getValue=j.getFieldByName(h.value),function(a,b,c){return c.getValue.getValue(b)}):h.value?(b.getValue=i.BEJ[h.value],d.isNullOrUndefined(b.getValue)&&(b.getValue={getValue:function(a){return g.uDJ._getValueByField(h.value,a)}}),function(a,b,c){return c.getValue.getValue(b)}):(b.getValue=i._dataSource._data[h].data,function(a,b,c){return c.getValue[b]}):(c=h.value+"",e=h+"",h.value?function(a,b){return a._getValueByField(c,b)}:function(a,b){return a._dataSource._data[e].data[b]})},a.prototype.GWJ=function(a){return j},a.prototype.pOJ=function(){var a=this,b=a.uDJ;return a.fFJ||a.eFJ(),a.nOJ=new g.FieldManager(a.i6,b),a.j0J(),a.aFJ=a.nOJ.prepareFields(a.aFJ),a.W_J(),a.nOJ},a.prototype.getLookup=function(a){return g.getLookupBy(this.uDJ,a)},a.prototype.isLookupField=function(a){return g.isLookupField(this.uDJ,a)},a.prototype.isLookupListField=function(a){return g.isLookupListField(this.uDJ,a)},a.prototype.isLookupRelationField=function(a){return g.isLookupRelationField(this.uDJ,a)},a.prototype.jFJ=function(a){return this.fFJ||this.eFJ(),this.fFJ[a]},a.prototype.kFJ=function(a){return this.fFJ||this.eFJ(),this.fFJ.indexOf(a)},a.prototype.length=function(){return this.uDJ.length()},a.prototype.visibleLength=function(){return this.fFJ||this.eFJ(),this.fFJ.length},a.prototype.getDirtyIndexes=function(){var a=this;return a.uDJ.getDirtyIndexes().map(function(b){return a.kFJ(b)})},a.prototype.isInserted=function(a){var b=this,c=b.jFJ(a);return b.I0J(c)},a.prototype.I0J=function(a){return this.uDJ.isInserted(a)},a.prototype.isUpdated=function(a){var b,c=this,d=c.jFJ(a);return c.OG=!0,b=c.uDJ.isUpdated(d),c.OG=!1,b},a.prototype.getErrorInfo=function(a){var b=this,c=b.jFJ(a);return this.uDJ.getErrorInfo(c)},a.prototype.insertItem=function(a,b,c,d){var e,f=this;return f.isHierarchy()?(e=f.visibleLength(),void(a<e?f.addHierarchyItemBefore(a,b,c,d):f.addHierarchyItemAfter(e-1,b,c,d))):f.m7J(a,b,c,d)},a.prototype.m7J=function(a,b,c,e){var f,g,h,i,j,k,l,m,n,o,p=this,q=p.r0J(c,e),r=q.success,s=q.fail,t=p.visibleLength();return a=a>t?t:a,f=p.jFJ(a),g=p.AMJ(b),p.RWJ(g),d.isNullOrUndefined(f)&&(p.AX()?(f=p.length(),p.DWJ(g)):f=a),h=p.uDJ.c7J(),i=!d.isNullOrUndefined(h),j=p.isHierarchy(),k=f,l=a<t,i&&!j&&(m=void 0,n=void 0,o=!1,l?(m=p.jFJ(a-1),n=k):(n=p.jFJ(a-1),o=!0),g[h]=p.uDJ.C6J(m,n,o)),(i||j)&&(k=p.AX()?p.length():t),p.uDJ.insertItem(k,g,function(b){p.s0J(k,g,l,a),r&&r(b)},s)},a.prototype.s0J=function(a,b,c,e){var f,g,h,i,k,l=this;return c?(f=l.length()-1,l.KNJ(f,b),g=l.autoFilter,h=!d.isNullOrUndefined(l.pFJ),h&&(l.autoFilter=!0),d.isNumber(e)&&!l.SWJ()?l.fFJ.splice(e,0,f):l.fFJ.push(f),l.rWJ(j,!h),void(h&&(l.autoFilter=g))):(l.KNJ(a,b),i=l.length(),k=!l.autoFilter&&!!l.fFJ,k&&l.fFJ.push(i-1),void l.rWJ(i,k))},a.prototype.AMJ=function(a){var b,c,e,f,g,h,i,j={};if(this.isHierarchy())for(b in a)a.hasOwnProperty(b)&&(j[b]=a[b]);for(c=this.aFJ,e=0,f=c;e<f.length;e++)g=f[e],b=g.value instanceof Function?g.value.name:g.value,h=a[b],d.isUndefined(h)||(i=g.value,"string"==typeof i?j[i]=h:i(j,h));return j},a.prototype.J0J=function(a,b,c){var e,f,g,h,i,j=this,k=j.nOJ,l=j.uDJ,m=k.getFieldByPosition(b),n=l.O_J(m.valueRelation,a);if(m.isOneToMany){if(n=n&&d.isNumber(m.getValueIndex(a)),!n&&(g=!1,l.P_J(m.valueRelation,a,(e={},e[m.dimRelationKey]=m.getDimValue(),e),function(b){k.setCrossFieldInsertedIndex(m,a,b.index),g=!0},c),!g))return}else if(n){if(i=!1,l.N_J(m.dimRelationPath,a,m.getDimValue(),function(){i=!0},c),!i)return}else if(h=!1,l.P_J(m.valueRelation,a,(f={},f[m.dimRelationKey]=m.getDimValue(),f),function(){h=!0},c),!h)return;return m.getRelationField(a)},a.prototype.updateItem=function(a,b,c,e,f){var g,h,j,k,l,m=f&&f.hasAddNewRowData,n=f&&f.currentModelIndex,o=this,p=m?n:o.jFJ(a),q=o.BMJ(p,b),r=q.colIndex,s=q.isCross;return s&&(h=o.nOJ,j=h.getFieldByPosition(r),j.isOneToMany||(k=h.getFields(function(a){return a.initialOptionIndex===j.initialOptionIndex&&a.name!==j.name&&!d.isNullOrUndefined(a.getValueIndex(p))}),k.length>0&&(l=k[0].name,o.eBc(a,(g={},g[l]=i,g),i,i,f)))),o.eBc(a,b,c,e,f)},a.prototype.eBc=function(a,b,c,e,f){var g=f&&f.hasAddNewRowData,h=f&&f.currentModelIndex,i=this,j=i.r0J(c,e),k=j.success,l=j.fail,m=g?h:i.jFJ(a),n=i.BMJ(m,b),o=n.data,p=n.originValueOfField,q=n.field,r=n.colIndex,s=n.isCross,t=n.isValueFunction,u=o[q],v=q;if(s){if(i.I0J(m))return void l();if(v=i.J0J(m,r,l),d.isNullOrUndefined(v))return void l()}return t?(i.t0J(o,p),i.uDJ.eBc(m,o,q,p,function(a){i.u0J(m,q,p,o[q]),k(a)},l)):(i.t0J(o,p),i.uDJ.N_J(v,m,u,function(a){i.u0J(m,q,p,o[q]),k(a)},l))},a.prototype.t0J=function(a,b){var c=this;c.RWJ(a),c.EWJ(a,b)},a.prototype.u0J=function(a,b,c,d){var e=this;e.LNJ(a,b,c,d),e.rWJ(j,!0,b,j)},a.prototype.BMJ=function(a,b){var c,e,f,g,h,i,j,k,m,n,o=this.getRowData(a,!0),p=l({},o),q=this.aFJ,r=0,s=0,t=!1,u=!1;for(f=0,g=q;f<g.length;f++){if(h=g[f],i=h.value instanceof Function?h.value.name:h.value,j=b[i],!d.isUndefined(j))if(k=h.value,"string"==typeof k){if(m=h.dataMap)for(n in m)j===m[n]&&(j=isNaN(n)?n:+n);c=p[k],p[k]=j,e=k,s=r,t=h.isCross}else u=!0,k(p,j);r++}return{data:p,originValueOfField:c,field:e,colIndex:s,isCross:t,isValueFunction:u}},a.prototype.resetItem=function(a,b,c){var e=this,f=e.r0J(b,c),g=f.success,h=f.fail,i=e.jFJ(a),j=this.getRowData(i,!0),k=e.zPJ(i);return d.isNullOrUndefined(a)||d.isNullOrUndefined(i)?void h():e.uDJ.resetItem(i,function(a){e.v0J(i,j,k),g(a)},h)},a.prototype.v0J=function(a,b,c){var d=this;d.Z_J(a),d.CWJ(a,b,c),d.rWJ(j,!0,j,j)},a.prototype.saveItem=function(a,b,c){var d=this,e=d.r0J(b,c),f=e.success,g=e.fail,h=d.jFJ(a);return d.uDJ.saveItem(h,function(a){f(a)},g)},a.prototype.getRowData=function(a,b,c){var d=this,e=b?a:d.jFJ(a);return d.lFJ(e,c)},a.prototype.S9J=function(a){return this.isHierarchy()&&this.H7J(a)},a.prototype.H7J=function(a,b){var c=this,e=c.uDJ.c7J(),f=c.isHierarchy(),g=f||!d.isNullOrUndefined(e),h=d.isNullOrUndefined(c.wOJ),i=!(c.ZEJ.length>0)||c.ZEJ.length<a&&(!d.isNumber(b)||c.ZEJ.length<b);return g&&h&&i},a.prototype.I7J=function(){var a=this;return!!d.isNullOrUndefined(a.oFJ)||!!a.oFJ[0].ascending},a.prototype.T9J=function(a,b){var c,d,e=this,f=e.getHierarchyNode(a).parent;if(b){for(d=a+1;d<e.visibleLength();d++)if(e.getHierarchyNode(d).parent===f){c=d;break}}else for(d=a-1;d>=0;d--)if(e.getHierarchyNode(d).parent===f){c=d;break}return c},a.prototype.E6J=function(a,b){var c,d,e,f,g,h,i,k,l,n,o,p=this;if(a!==b&&p.H7J(a,b)){if(c=p.isHierarchy(),d=a<b,e=d?b+1:b-1,c&&1===Math.abs(a-b)&&(b=p.T9J(a,d)),f=p.uDJ.E6J(d,p.jFJ(a),p.jFJ(b),p.jFJ(e))){if(g=p.fFJ,h=p.jFJ(a),i=1,k=[h],c)for(i=p.uDJ.W6J(h),k=[],l=a,n=l+i;l<n;l++)k.push(p.jFJ(l));d?(o=p.uDJ.W6J(p.jFJ(b)),g.splice.apply(g,m([b+o,0],k)),g.splice(a,i)):(g.splice(a,i),g.splice.apply(g,m([b,0],k))),p.h7J=j}return f}},a.prototype.moveUp=function(a){var b=this,c=1;a>0&&b.E6J(a,a-c)},a.prototype.moveDown=function(a){var b=this,c=1;a<b.visibleLength()-1&&b.E6J(a,a+c)},a.prototype.n7J=function(){var a,b,c=this,e=c.uDJ._dataSource.options.schema.hierarchy.outlineColumn,f=c.aFJ,g=-1,h=-1;for(a=0;a<f.length;a++){if(b=f[a],!d.isNullOrEmpty(b.outlineColumn)){g=a;break}h!==-1||b.value!==e&&(d.isNullOrUndefined(e)||b.value!==e.value)||(h=a)}return g!==-1?{index:g,options:f[g].outlineColumn}:{index:h,options:e}},a.prototype.getHierarchyColumnOptions=function(){return this.n7J().options},a.prototype.getHierarchyColumnIndex=function(){return this.n7J().index},a.prototype.hasHierarchyColumn=function(a){var b=this,c=b.isHierarchy(),e=c&&b.getHierarchyColumnIndex();return d.isNumber(a)?c&&e===a:!(!c||e===-1)},a.prototype.isHierarchy=function(){return this.uDJ.d7J()},a.prototype.o7J=function(a){var b=this,c=b.f7J();return b.uDJ.z6J(c[a])},a.prototype.getHierarchyNode=function(a,b){var c,d=this;if(d.isHierarchy())return c=b?a:d.jFJ(a),d.uDJ.z6J(c)},a.prototype.getHierarchyRootNode=function(){var a=this;if(a.isHierarchy())return a.uDJ.B6J()},a.prototype.promoteHierarchyLevel=function(a){var b=this;b.isHierarchy()&&this.uDJ.F6J(this.jFJ(a))},a.prototype.demoteHierarchyLevel=function(a,b){var c=this;c.isHierarchy()&&c.uDJ.I6J(c.jFJ(a),b)},a.prototype.hasRowOrder=function(){var a=this;return!d.isNullOrUndefined(a.uDJ.c7J())},a.prototype.hasHierarchyRowOrder=function(){return this.uDJ.C7J()},a.prototype.addHierarchyItemBefore=function(a,b,c,d){var e,f=this;f.S9J(a)&&(e=f.uDJ.N6J(f.jFJ(a),b),f.OaK(b,e),f.m7J(a,b,c,d))},a.prototype.addHierarchyItemAfter=function(a,b,c,d){var e,f,g=this;if(g.S9J(a))return e=g.uDJ.W6J(g.jFJ(a)),f=g.uDJ.Q6J(g.jFJ(a),b),g.OaK(b,f),g.m7J(a+e,b,c,d),e},a.prototype.addHierarchyItemAbove=function(a,b,c,d){var e,f=this;f.S9J(a)&&(e=f.uDJ.R6J(f.jFJ(a),b),f.OaK(b,e),f.m7J(a,b,c,d))},a.prototype.addHierarchyItemBelow=function(a,b,c,d){var e,f,g=this;if(g.S9J(a))return e=g.uDJ.W6J(g.jFJ(a)),f=g.uDJ.T6J(g.jFJ(a),b),g.OaK(b,f),g.m7J(a+e,b,c,d),e},a.prototype.OaK=function(a,b){var c,e=this,f=e.uDJ.Q9J(b);if(!d.isNullOrUndefined(f))for(c in f)f.hasOwnProperty(c)&&(a[c]=f[c])},a.prototype.CaK=function(a,b){if(this.isHierarchy())return this.uDJ.CaK(a,b)},a.prototype.fetch=function(a){var b,c=this,d=c.uDJ.EEJ.tables,e=Object.keys(d);if(e.length>0)return b=e.map(function(b){var c=d[b];return c&&c.fetch(a)}),Promise.all(b).then(function(a){c.z0J(),c.__J()&&(c.pOJ(),c.H0J()),c.x4J||c.w4J();var b=c;return(b.d9J||b.e9J)&&(b.d9J&&b.d9J(),b.e9J&&b.e9J()),a})},a.prototype.w4J=function(){var a,b,c,e,f,g=this.aFJ;for(a=0,b=g;a<b.length;a++)c=b[a],c.cross||(e=c.lookup,d.isArray(e)?"string"==typeof c.value&&c.value.indexOf(".")===-1&&(e=d.getUniqueArray(e),e.length>0&&(f=c.style,f||(f=c.style={}),f.cellType||(f.cellType={type:"combobox",items:e}))):d.isString(e)&&e?this.y4J(c,e):d.isObject(e)&&this.y4J(c,e.name,e.columns))},a.prototype.y4J=function(a,b,c){var d,g,h,i,j,k,l,m,n=a.style;n||(n=a.style={}),d=n.cellButtons,d||(d=n.cellButtons=[]),g=n.dropDowns,g||(g=n.dropDowns=[]),h=f.array_find(d,function(a){return"openMultiColumn"===a.command}),i=f.array_find(g,function(a){return"multiColumn"===a.type}),h||i||(j=this.z4J(b),k=j.table,l=j.field,k&&l&&k!==this.uDJ&&(m=k.columns,m&&(d.push({imageType:"ellipsis",command:"openMultiColumn",useButtonStyle:!0}),g.push({type:"multiColumn",option:{dataSource:k.views[e.DEFAULT_VIEW_NAME]||k.addView(e.DEFAULT_VIEW_NAME),bindingInfos:this.A4J(m,c),key:l}}))))},a.prototype.z4J=function(a){var b,c,d,e,f,g=this.uDJ.EEJ.relationships;for(d=0,e=g;d<e.length;d++)if(f=e[d],f.sourceRelationshipName===a){b=f.targetTable,c=f.targetFieldName;break}return{table:b,field:c}},a.prototype.A4J=function(a,b){return b?b.map(function(a){return d.isString(a)?{name:a,width:"*"}:(a=a,{name:a.value,width:d.isNullOrUndefined(a.width)?"*":a.width,displayName:a.caption,visible:a.visible})}):Object.keys(a).map(function(b){var c=a[b];return{name:c.value,width:d.isNullOrUndefined(c.width)?"*":c.width,displayName:c.caption,visible:c.visible}})},a.prototype.CXJ=function(){var a,b=this,c=b.uDJ.length(),d=[];for(a=0;a<c;a++)d.push(b.lFJ(a));return d},a.prototype.RWJ=function(a){var b,c,d,e,f,g,h,i=this.aFJ;for(b=0,c=i;b<c.length;b++)if(d=c[b],e=d.dataMap,f=d.value,"string"==typeof f){if(e)for(g in e)a[f]===e[g]&&(a[f]=isNaN(g)?g:+g);a.hasOwnProperty(f)&&(h=this.uDJ.TNJ(f),h&&h.relatedTable&&h.setValue&&h.setValue(a))}},a.prototype.SIJ=function(a,b){var c,d,e=this.ZEJ;if(e&&e.length>0){for(c=0;c<b;c++)d=e.indexOf(a+c),d>-1&&e.splice(d,1);for(c=0;c<e.length;c++)e[c]>a&&(e[c]-=b)}},a.prototype.removeRowData=function(a,b,c,e){var f=this,g=f.r0J(c,e),h=g.success,i=g.fail,j=f.uDJ,k=f.jFJ(a);return d.isNullOrUndefined(a)||d.isNullOrUndefined(k)||d.isNullOrUndefined(b)?void i():void j.remove(k,b,function(c){f.w0J(k,c.removedCount||b,a),h(c)},i)},a.prototype.w0J=function(a,b,c){var e,f,g,h,i=this;for(i.SIJ(a,b),d.isNumber(c)||(c=i.kFJ(a)),e=i.fFJ.slice(c,c+b),f=function(a,b){var c=i.fFJ[a],d=e.reduce(function(a,b){return b<c?a+1:a},0);d>0&&(i.fFJ[a]-=d)},g=0,h=i.fFJ.length;g<h;g++)f(g,h);i.fFJ.splice(c,b),i.Y_J(a,b),i.MNJ(a,b),i.rWJ(void 0,!0)},a.prototype.getChanges=function(){var a,b,c,d=this.uDJ,e=d.getChanges();for(a=0,b=e;a<b.length;a++)c=b[a],c.index=this.kFJ(c.index);return e},a.prototype.isDataLengthChanged=function(){return this.uDJ.isDataLengthChanged()},a.prototype.submitChanges=function(a){var b=this,c=b.r0J(),d=c.success,e=c.fail,f=b.uDJ;return f.submitChanges(function(c,d,e){if(a){var f=b.kFJ(c);a(f,d,e)}}).then(function(){b.x0J(),d()}).catch(e)},a.prototype.x0J=function(){},a.prototype.cancelChanges=function(){var a=this,b=a.r0J(),c=b.success,d=b.fail,e=a.isDataLengthChanged();a.uDJ.cancelChanges(function(){a.y0J(e),c()},d)},a.prototype.y0J=function(a){var b=this;b.C9J(),a&&b.eFJ(),b.X_J(),b.rWJ(j,!0)},a.prototype.K0J=function(a,b){var c,e=this,f=e.f0J(a,b),g=e.h0J.map(function(a,b){return{index:b,option:a}}),h=e.L0J(a,b);return g=h.map(function(a){return g[a]}),e.h0J=g.map(function(a){return a.option}),f?f:(c=[],g.forEach(function(a,b){d.isNullOrUndefined(a.option.cross)||a.index===b||c.push({oldIndex:a.index,newIndex:b})}),void e.b0J(c))},a.prototype.M0J=function(){var a,b=this,c=b.$EJ;return c&&c.length>0?(a=[],c.forEach(function(c,d){a.push(b.aFJ[c].value)}),a):[]},a.prototype.N0J=function(a){var b=this,c=b.aFJ;return d.isNullOrUndefined(a)?[]:a.map(function(a){return d.findIndex(c,function(b){return b.value===a})})},a.prototype.PXJ=function(a,b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q=this;if(q.aFJ.forEach(function(a,b){a.zAc=b}),d=q._EJ,e=f.G0J(a,b,c,q.aFJ,q._EJ,q.$EJ,q.h0J),g=q.$EJ.map(function(a){return q.aFJ[a]}),q.aFJ=e.map(function(a){return q.aFJ[a]}),g&&g.length){for(h=[],i=q.aFJ.length,j=-1,k=0,l=g;k<l.length;k++)m=l[k],n=q.aFJ.indexOf(m),j=Math.max(n,j),h.push(n);for(o=0;o<i;o++)h.indexOf(o)===-1&&h.push(o);q._EJ=h,q.$EJ=h.slice(0,g.length)}return p=q.aFJ.reduce(function(a,b,c){return b.zAc!==c&&a.push({oldIndex:b.zAc,newIndex:c}),delete b.zAc,a},[]),q.aFJ.forEach(function(a){var b,c,d,e,f;for(b=0,c=p;b<c.length;b++)if(d=c[b],e=d.oldIndex,f=d.newIndex,a.APJ===e){a.APJ=f;break}}),q.nOJ&&q.nOJ.moveFieldsByIndexes(p),p.map(function(a){return a.oldIndex=q.O0J(a.oldIndex,d),a.newIndex=q.O0J(a.newIndex),a})},a.prototype.e0J=function(a){var b=this,c=b.aFJ,e=b.h0J,f=c[a];return f.isCross?f.c0J:d.findIndex(e,function(a){return a.value===f.value})},a.prototype.g0J=function(a){var b=this,c=b.$EJ,d=b.h0J;return a=a||c.map(function(a){return b.e0J(a)}),f.generatePinnedColumnIndexMap(a,d.length)},a.prototype.L0J=function(a,b){var c,e,g,h,i,j,k;if(a!==b)return c=this,e=c.$EJ,g=c.h0J.map(function(a,b){return{index:b}}),h=e.map(function(a){return c.e0J(a)}),i=f.generatePinnedColumnIndexMap(h,g.length),i.length>0&&(a=i[a],b=i[b]),j=h.map(function(a){var b=g[a];return b.P0J=!0,b}),d.swapArrayItems(g,a,b,1),k=g.filter(function(a){return!a.P0J}),j.forEach(function(a,b){k.splice(h[b],0,a)}),k.map(function(a){return a.index})},a.prototype.getColumnInfos=function(a,b){var c,e=[],f=this.aFJ,g=this._EJ,h=this.uDJ,i=function(c){var i,k=g.length>0?d.isNullOrUndefined(g[c])?c:g[c]:c,l=f[k];if(h.PEJ(l.value)&&(l.isPrimaryKey=!0),!a||!l.isGroup){if(b&&l.isCross&&(i=l.c0J,l=j.h0J[i],l.c0J=i,e.some(function(a){return a===l})))return"continue";e.push(l)}},j=this;for(c=0;c<f.length;c++)i(c);return e},a.prototype.Q0J=function(a){if(a.indexOf(".")>=0)return!0;var b=this.uDJ.R_J(a);return!d.isNullOrUndefined(b)&&b!==this.uDJ},a.prototype.setColumnInfos=function(a,b){this.aFJ=a,b&&this.H0J()},a.prototype.J9J=function(){var a,b,c,d,e,f,g,h=this.h0J;for(a=h.length-1;a>=0;a--)b=h[a].value,"string"==typeof b&&"="===b[0]&&h.splice(a,1);for(c=this.aFJ,a=0,d=0;a<c.length;)e=c[a],f=h[d],e.isGroup||e.isCross?a++:f&&f.cross?d++:(g=e.value,b=f&&f.value,g===b?(a++,d++):"string"==typeof g&&"="===g[0]?(h.splice(d,0,e),a++,d++):a++)},a.prototype.tDJ=function(a){
var b=this.uDJ;return!!b.UEJ(a)},a.prototype.togglePinnedRows=function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;if(d.isNullOrUndefined(a)||this.hasHierarchyColumn())return this.ZEJ&&this.ZEJ.length;for(b=this.ZEJ,c=this.fFJ,e=a.length,f=[],g=[],h=b.length,i=0;i<e;i++)j=c[a[i]],j>-1&&(k=b.indexOf(j),k>-1?g.push(k):f.push(j));if(l=f.length,m=g.length,b.length-m+l>this.YEJ)return-1;if(m>0)for(g.sort(),i=m-1;i>=0;i--)b.splice(g[i],1);for(i=0;i<l;i++)b.push(f[i]);if(m>0||l>0){for(n=[],o=c.length,p=b.length,p>0&&(n=b.slice(0)),j=p,i=0;i<o;i++)b.indexOf(c[i])===-1&&(n[j]=c[i],j++);if(!this.TWJ()&&!this.SWJ())for(i=0;i<m;i++)q=c[g[i]],r=n.indexOf(q),s=this.LXJ(q,h,n),n.splice(r,1),s=s>r?s-1:s,n.splice(s,0,q),h>p&&h--;this.fFJ=n,this.QIJ(),this.RIJ()}return b.length},a.prototype.togglePinnedColumns=function(a){var b,c,e,g,h,i,j,k,l,m,n,o=this;if(d.isNullOrUndefined(a))return this.$EJ&&this.$EJ.length;for(b=this._EJ,c=b.length>0,a=a.filter(function(a){var d=c?b[a]:a;return!o.aFJ[d].isCross}),e=this.$EJ,g=a.length,h=[],i=[],j=0;j<g;j++)k=c?b[a[j]]:a[j],k>-1&&(l=e.indexOf(k),l>-1?i.push(l):h.push(k));if(m=h.length,n=i.length,e.length-n+m>this.YEJ)return-1;if(n>0)for(i.sort(),j=n-1;j>=0;j--)e.splice(i[j],1);for(j=0;j<m;j++)e.push(h[j]);return(m>0||n>0)&&(this._EJ=f.generatePinnedColumnIndexMap(e,this.aFJ.length)),e.length},a.prototype.R0J=function(a){var b=this,c=b._EJ;return c&&c.length>0?c[a]:a},a.prototype.O0J=function(a,b){var c=this;return b=b||c._EJ,b&&b.length>0?b.indexOf(+a):+a},a.prototype.getRowDataAsync=function(a){var b=this;return b.fetch().then(function(c){var d=b.jFJ(a);return b.lFJ(d)})},a.prototype.LXJ=function(a,b,c){for(var d=b;d<c.length;d++)if(c[d]>a)return d;return c.length},a.prototype.lFJ=function(a,b){var c,e,f,g=this,h=g.aFJ,i={},j=[],k=!!g.rOJ,l=g.uDJ;if(h.forEach(function(c,e){var f,h,m,n,o,p,q=c.value;b&&!b[q]||(c.isCross?i[c.value]=g.nOJ.getFieldByPosition(e).getValue(a):q&&!c.isGroup&&("string"==typeof q?(f=q.indexOf(".")>=0,h="="===q[0],m=l.BEJ&&d.isNullOrUndefined(l.BEJ[q]),(!k||k&&(f||h||m))&&(n=q,o=l._getValueByField(q,a),p=c.dataMap,p&&(o=p[o]||o),i[n]=o)):"function"==typeof q&&j.push({name:q.name,caption:c.caption,value:q})))}),j.length>0&&(c=g.uDJ.XEJ(a),j.forEach(function(a){i[a.name]=a.value(c)})),k){e=this.nOJ.getFieldValues(a);for(f in e)e.hasOwnProperty(f)&&(i[f]=e[f])}return i},a.prototype.zPJ=function(a){var b,c,e,f=this,g=f.aFJ,h={},i=[],j=!!f.rOJ,k=f.uDJ;if(g.forEach(function(b,c){var e,g,l,m,n,o,p=b.value;b.isCross?h[b.value]=f.nOJ.getFieldByPosition(c).getOriginalValue(a):p&&!b.isGroup&&("string"==typeof p?(e=p.indexOf(".")>=0,g="="===p[0],l=k.BEJ&&d.isNullOrUndefined(k.BEJ[p]),(!j||j&&(e||g||l))&&(m=p,n=g?k._getValueByField(p,a):k.Q_J(p,a),o=b.dataMap,o&&(n=o[n]||n),h[m]=n)):"function"==typeof p&&i.push({name:p.name,caption:b.caption,value:p}))}),i.length>0&&(b=f.uDJ.XEJ(a),i.forEach(function(a){h[a.name]=a.value(b)})),j){c=this.nOJ.S0J(a);for(e in c)c.hasOwnProperty(e)&&(h[e]=c[e])}return h},a.prototype.addColumn=function(a){"string"==typeof a?a={name:a,value:a}:a.name||"string"!=typeof a.value||(a.name=a.value),"="===a.value[0]&&(a.readonly=!0),this.aFJ.push(a)},a.prototype.getColumn=function(a){var b=this.getColumnInfos();return d.isNullOrUndefined(a)?b:b[a]},a.prototype.removeColumn=function(a){var b,c,d=this.aFJ;for(b=0;b<d.length;b++)if(c=d[b],c.value===a){d.splice(b,1);break}},a.prototype.rWJ=function(a,b,c,d){b||this.eFJ(a);var e=this.pFJ;e&&this.autoFilter&&this.filter(),this.pFJ=e,this.RIJ(),this.qXJ(c),this.h7J=j},a.prototype.excludeInsertedPinnedRows=function(){var a,b=this,c=b.ZEJ,d=[];for(a=0;a<c.length;a++)b.isInserted(a)||d.push(c[a]);return d},a.prototype.toJSON=function(){var a,b,c,e=this,g={};if(e.pXJ&&(g={sortBefore:f.removeExtraInfos(e.oXJ),sortAfter:f.removeExtraInfos(e.pXJ)}),a=e.h0J,0===a.length)0===e.aFJ.length&&e.H0J(),a=e.h0J=e.aFJ;else for(b=function(b){var c,f,g=a[b].cross;d.isNullOrUndefined(g)&&(c=e.aFJ.filter(function(c){return c.value===a[b].value})[0],c&&(a[b]=c)),f=a[b].validator,f&&"date"===f.type&&(n(f.value1)&&(f.value1=o(f.value1)),n(f.value2)&&(f.value2=o(f.value2)))},c=0;c<a.length;c++)b(c);return l(l({},g),{name:e.name,options:e.i6,columns:e.h0J,indexMap:e.fFJ,columnIndexMap:e._EJ,autoSort:e.autoSort,sortInfo:f.removeExtraInfos(e.oFJ),autoFilter:e.autoFilter,filterInfo:f.removeExtraInfos(e.pFJ),autoGroup:e.autoGroup,groupInfo:e.wOJ,detailColumnsVisible:e.mPJ,pinnedRows:e.excludeInsertedPinnedRows(),pinnedColumns:e.$EJ})},a.prototype.fromJSON=function(a){var b,c,d,e,f,g=this;if(g.fFJ=a.indexMap,b=a.columnIndexMap,c=g.aFJ,b&&c&&b.length>0&&b.length<c.length)for(d=b.length;d<c.length;d++)b[d]=d;for(d=0;d<c.length;d++)e=c[d].validator,e&&"date"===e.type&&("string"==typeof e.value1&&(f=p(e.value1),f&&(e.value1=f)),"string"==typeof e.value2&&(f=p(e.value2),f&&(e.value2=f)));g._EJ=b,g.autoSort=a.autoSort,g.oFJ=a.sortInfo,g.oXJ=a.sortInfo,a.sortAfter&&(g.oXJ=a.sortBefore,g.pXJ=a.sortAfter),g.autoFilter=a.autoFilter,g.pFJ=a.filterInfo,g.autoGroup=a.autoGroup,g.wOJ=a.groupInfo,g.mPJ=a.detailColumnsVisible,g.ZEJ=a.pinnedRows,g.$EJ=a.pinnedColumns},a}(),b.View=k},"./dist/src/viewField/fieldManager.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j=this&&this.__spreadArrays||function(){var a,b,c,d,e,f,g,h;for(a=0,b=0,c=arguments.length;b<c;b++)a+=arguments[b].length;for(d=Array(a),e=0,b=0;b<c;b++)for(f=arguments[b],g=0,h=f.length;g<h;g++,e++)d[e]=f[g];return d};Object.defineProperty(b,"__esModule",{value:!0}),b.isValidCross=b.isLookupRelationField=b.isLookupListField=b.isLookupField=b.getLookupBy=b.FieldManager=void 0,d=c("CalcEngine"),e=c("./dist/src/dataSource/utils.js"),f=c("./dist/src/interfaces/interface.js"),g=c("./dist/src/viewField/utils.js"),h=c("./dist/src/viewField/fields.js");function k(a,b){return function(c,d){var e=a.getField(d),f=e.name;return c[f]=e.getValue(b),c}}i=function(){function a(a,b){this.HL=[],this.positionOfField=[],this.keysOfBaseField=[],this.T0J=a,this.EOJ={},this.sj=b}return a.prototype.cQJ=function(a,b){return this.sj._getValueByField(a,b)},a.prototype.U0J=function(a,b){return this.sj.Q_J(a,b)},a.prototype.V0J=function(a){return this.sj.XEJ(a)},a.prototype.W0J=function(a){return G(this.sj,a)},a.prototype.X0J=function(a){return F(this.sj,a)},a.prototype.Y0J=function(a){return this.sj._dataSource._data[a].data},a.prototype.Z0J=function(a){return!e.isNullOrUndefined(this.sj._dataSource._data[a])},a.prototype.V_J=function(a){return this.sj.V_J(a.split("."))},a.prototype.$0J=function(){return this.sj.vDJ},a.prototype._0J=function(a){return y(this.sj,a)},a.prototype.a1J=function(a){return z(this.sj,a)},a.prototype.b1J=function(a){return A(this.sj,a)},a.prototype.c1J=function(a){return B(this.sj,a)},a.prototype.getField=function(a){return this.HL[a]},a.prototype.getFieldByPosition=function(a){return this.getField(this.positionOfField[a])},a.prototype.getFieldByName=function(a){return this.HL.filter(function(b){return b.name===a})[0]},a.prototype.getFields=function(a){return this.HL.filter(a)},a.prototype.getFieldValues=function(a){var b=this;return b.positionOfField.reduce(k(b,a),{})},a.prototype.S0J=function(a){var b=this;return b.positionOfField.filter(function(a){return b.keysOfBaseField.indexOf(a)===-1}).reduce(k(b,a),{})},a.prototype.moveFields=function(a,b,c){e.swapArrayItems(this.HL,a,b,c)},a.prototype.moveFieldsByIndexes=function(a){var b=this;a.forEach(function(a){a.field=b.HL[a.oldIndex]}),a.forEach(function(a){b.HL[a.newIndex]=a.field})},a.prototype.removeFields=function(a,b){this.HL.splice(a,b||1)},a.prototype.reset=function(){var a=this;a.positionOfField=a.keysOfBaseField.slice(),a.HL=a.HL.reduce(function(b,c){return a.keysOfBaseField.indexOf(c.key)>-1?b.concat(c):b},[])},a.prototype.FOJ=function(a){var b=this,c=b.EOJ,d=c[a],e=b.$0J(),f=e.getCalcService();return d||(d=c[a]=b.fixExpression(f.parse(e,a,0,0))),function(a,b){return e.L$a(a,b),f.evaluateExpression(e,d,{row:0,col:0})}},a.prototype.d1J=function(a,b){var c=this,d=c.EOJ,f=d[a],g=b||c.$0J(),h=g.getCalcService();return f||(f=d[a]=c.fixExpression(h.parse(g,a,0,0))),function(a,b){g.L$a(a,b);var c=h.lh.evaluateExpression(f,g.getEvaluatorContext({row:0,col:0},!1),!1,!0);return e.isNullOrUndefined(c.toArray)?[]:c.toArray()}},a.prototype.fixExpression=function(a){var b,c,e,f,g,h,i=this;if(a.function)for(a.function.isReverseArgs&&a.function.isReverseArgs()&&a.arguments.reverse(),b=0,c=a.arguments;b<c.length;b++)e=c[b],i.fixExpression(e);else for(f=0,g=Object.getOwnPropertyNames(a);f<g.length;f++)h=g[f],a[h]instanceof d.Expression&&i.fixExpression(a[h]);return a},a.prototype.mOJ=function(a){var b=this;return a.key=b.HL.length,b.HL.push(a),a},a.prototype.addDataBaseField=function(a,b,c){var d=this,e=d.addColumnDataField(a,b,c);return d.GOJ(e)},a.prototype.addReaderBaseField=function(a,b,c){var d=this,e=d.addColumnDataReaderField(a,"function"==typeof b?b:function(a){return d.cQJ(b,a)},c);return d.GOJ(e)},a.prototype.GOJ=function(a){var b=this,c=a.key;return b.keysOfBaseField.push(c),b.positionOfField.push(c),a},a.prototype.addColumnDataField=function(a,b,c){return this.mOJ(new h.ColumnDataField(a,b,c))},a.prototype.addColumnDataReaderField=function(a,b,c){return this.mOJ(new h.ColumnDataReaderField(a,b,c))},a.prototype.addDataField=function(a,b){return this.mOJ(new h.DataField(a,b))},a.prototype.addFormulaField=function(a,b){return this.mOJ(this.HOJ(a,b))},a.prototype.HOJ=function(a,b){return new h.FormulaField(a,b,this.FOJ(b))},a.prototype.addCategoryFormulaField=function(a,b){return this.mOJ(this.IOJ(a,b))},a.prototype.IOJ=function(a,b){return new h.CategoryFormulaField(a,b,this.FOJ(b))},a.prototype.addCategoryField=function(a,b){return this.mOJ(this.dNa(a,b))},a.prototype.dNa=function(a,b){return new h.CategoryField(a,b)},a.prototype.addSliceCategoryField=function(a){return this.mOJ(new h.SliceCategoryField(a))},a.prototype.GRJ=function(a,b,c,d,f){var h,i,j,k,l,m,n,o=this,p=a.fieldExtra,q=a.field;for(m=0,n=c.length;m<n;m++)j=c[m],i=j.result,k=j.key,l=a.sliceFields[k],e.isUndefined(l)&&(h=q.getValueByKey(k),l=o.addSliceCategoryField(g.combineName(h,a.sliceKeys.length,b.name)),l.setFieldExtra(p),a.sliceFields[k]=l,a.sliceKeys.push(l.key)),l.setData(i,d,f)},a.prototype.dQJ=function(a,b,c,d){var e=this;return g.isField(a)?e.getFieldByName(a):g.isFormula(a)?e.eQJ(d+"_formula_source",b,a,c):g.isRelated(a)?new h.ColumnDataReaderField(d+"_related_source",function(b){return e.cQJ(a,b)},null):e.getFieldByName(a)},a.prototype.eQJ=function(a,b,c,d){var e=this,f=e.HOJ(g.combineName(a,b),c);return f.evaluateFormulaBy(d),f},a.prototype.buildGroupFields=function(a,b){var c=this,d,f,h=[];return a.forEach(function(a,i){if(!e.isNullOrEmpty(a.field)){f=e.isNullOrUndefined(f)?d={}:f.group={};var j=g.combineName(a.field,i),k=c.dQJ(a.field,j,b,"group_field"),l=c.addCategoryField(j,k);l.setFieldExtra(a),h.push(l.key),f.field=l,e.isNullOrUndefined(a.summaryFields)||a.summaryFields.forEach(function(a,d){var i,k,l,m,n,o,p,q,r;e.isNullOrEmpty(a.formula)||(i=g.combineName(a.formula,d,j),k=c.addCategoryFormulaField(i,a.formula),k.setFieldExtra(a),e.isNullOrUndefined(f.formulas)&&(f.formulas=[]),l=f.formulas.push(k)-1,h.push(k.key),e.isNullOrUndefined(a.slice)||(m=a.slice,n=e.isString(m),o=n?m:m.field,p=g.combineName(o,i),q=c.dQJ(o,p,b,"slice"),q=c.dNa(g.combineName("slice_category",p),q),e.isNullOrUndefined(f.slices)&&(f.slices=[]),r=c.IOJ(g.combineName("slice_formula_result",p),a.formula),f.slices.push({field:q,formula:r,formulaIndex:l,sliceKeys:[],fieldExtra:n?{}:m,sliceFields:{},addSliceField:c.GRJ.bind(c)})))})}}),c.positionOfField=h.concat(c.keysOfBaseField),d},a.prototype.transposeSliceFields=function(a){var b=this,c,d;a.slices&&a.slices.forEach(function(f){var g;c=b.positionOfField.indexOf(a.formulas[f.formulaIndex].key),d=f.sliceKeys,e.isNullOrUndefined(f.fieldExtra.sort)||(d=d.map(function(a){return b.getField(a)}).sort(H(f.fieldExtra.sort)).map(function(a){return a.key})),(g=b.positionOfField).splice.apply(g,j([c+1,0],d))}),a.group&&b.transposeSliceFields(a.group)},a.prototype.prepareFields=function(a){var b,c,d,e,f,g,i,j,k,l,m,n,o,p,r,s,t=this,u=[];for(b=0,c=0;b<a.length;b++,c++)if(d=a[b],e=q(d),f=d.value,g=d.cross,g){if(i=t.e1J(a,b),j=i.crossColumnOptions,k=i.endColIndex,l=j.columns.length,m=t.f1J(j),0===m)continue;for(n=function(d,e){var f,g,i=c+d,j=b+e,k=t.getField(i);k.setFieldExtra(a[j]),f={value:k.name,name:k.name,isCross:!0,c0J:j},k.isReadonly()&&(f.readonly=!0),g=k.extra,g&&h.setFieldExtraProperties(function(a){g[a]&&(f[a]=g[a])}),u.push(f),d++,e++,e>=l&&(e=0),o=d,p=e},r=0,s=0;r<m;)n(r,s),r=o,s=p;b=k,c+=m-1}else t.Z0J(e)?(t.addDataBaseField(e,t.Y0J(e),d),u.push(a[b])):(t.addReaderBaseField(e,f,d),u.push(a[b]));return x(u),u},a.prototype.e1J=function(a,b){var c,d,e=this,f=b,g=a[b],h=g.cross,i=e.g1J(h,[g],f);if("string"==typeof h){for(c=b,d=b;b<a.length&&(d++,!(d<a.length&&h!==a[d].cross));)b++;i=e.g1J(h,a.slice(c,d),f)}return{crossColumnOptions:i,endColIndex:b}},a.prototype.g1J=function(a,b,c){var d="string"==typeof a?this.T0J.cross[a]:a;return{initialOptionIndex:c,crossKeys:b.map(function(a){return a.k0J}),cross:d,columns:b,lookup:this.h1J(d,b)}},a.prototype.h1J=function(a,b){var c=this;return b.every(function(b){return c.isValidCross(a,b.value)})&&this._0J(a.over)},a.prototype.isValidCross=function(a,b){return D(this.sj,a,b)},a.prototype.f1J=function(a){var b=this,c=a.lookup,d=0;return e.isArray(c)?d=b.i1J(a):e.isString(c)?d=b.j1J(a):e.isObject(c)&&(d=b.j1J(a)),d},a.prototype.j1J=function(a){var b,c,d,f,h,i,j,k,l,m,p,q,r,x,y,z,A,B=this,C=a.cross,D=B.T0J.showCrossValueHeader,E=w(C.caption),F=0,G=n(a),H=C.over,I=s(H),J=H,K=C.attributes||[],L=K.length,M=v(K[0],!0),N=B.k1J(B.X0J(J),J),O=N.relationTableName||u(K[0]),P=N.relationTable||B.l1J(O),Q=P.length(),R=N.relationPrimaryKey||B.m1J(O,I),S=C.filter?B.d1J(o(C.filter,M),P.vDJ):null;for(e.isNullOrUndefined(S)||(c=S(null),c.length>0&&(b=c.reduce(function(a,b){var c="object"==typeof b?b[R]:b;return a[c]=!0,a},{}))),d=[],f=0;f<L;f++)h=s(K[f]),i=t(K[f]),d.push({fieldName:h,formatter:i});for(j=0;j<Q;j++)if(k=P._getValueByField(R,j),e.isNullOrUndefined(b)||b[k]){for(l=E.slice(),f=0;f<L;f++)h=d[f].fieldName,m=P._getValueByField(h,j),i=d[f].formatter,e.isNullOrUndefined(i)||(m=e.format(m,i)),l.push(m);for(p=0;p<G.length;p++)q=G[p],r=q.valueRelation,x=q.valueCaption,y=q.valueIndex,z=q.valueCrossKey,A=D?l.concat(x):l,B.n1J({path:A,value:g.combineName(r,k,H,z),valueRelation:r,dimRelationPath:J,dimRelationKey:I,dimTableName:O,dimTableKeyFieldValue:k,initialOptionIndex:y}),F++}return F},a.prototype.i1J=function(a){var b,c,d,e,f,h,i,j,k,l,m=this,o=a.cross,p=a.lookup,q=m.T0J.showCrossValueHeader,r=w(o.caption),t=0,u=n(a),v=o.over,x=s(v),y=v,z=p.length;for(b=0;b<z;b++)for(c=r.slice(),d=p[b],c.push(d),e=0;e<u.length;e++)f=u[e],h=f.valueRelation,i=f.valueCaption,j=f.valueIndex,k=f.valueCrossKey,l=q?c.concat(i):c,m.n1J({path:l,value:g.combineName(h,d,v,k),valueRelation:h,dimRelationPath:y,dimRelationKey:x,dimTableKeyFieldValue:d,initialOptionIndex:j}),t++;return t},a.prototype.setCrossFieldValues=function(a){var b,c,d,e,f,g=this,i=g.HL,j=a.length,k=i.filter(function(a){return a instanceof h.CrossField});if(k.length>0)for(b=0;b<j;b++)for(c=a[b],d={},e=0;e<k.length;e++)f=k[e],g.W_J(f,c,d)},a.prototype.W_J=function(a,b,c){var d,f=this,g=a.dimRelationPath,h=c[g];if(e.isNullOrUndefined(h)&&a.isOneToMany&&(h=c[g]=f.cQJ(g,b)),e.isArray(h))for(d=0;d<h.length;d++)if(a.o1J(h[d],a.dimTableKeyFieldValue)&&e.isNullOrUndefined(a.getValueIndex(b))){a.setValueIndex(b,d);break}},a.prototype.m1J=function(a,b){var c=this,d=c.W0J(function(c){return c.sourceFieldName===b&&c.sourceRelationshipName===a});return d?d.targetFieldName:(d=c.W0J(function(c){return c.targetFieldName===b&&c.targetRelationshipName===a}),d?d.sourceFieldName:void 0)},a.prototype.l1J=function(a){var b=this,c=b.W0J(function(b){return b.sourceRelationshipName===a||b.targetRelationshipName===a})||{},d=c.sourceRelationshipName===a?c.sourceField:c.targetField;return d?d.targetTable:{length:function(){return 0}}},a.prototype.k1J=function(a,b){return C(this.sj,a,b)},a.prototype.p1J=function(a){var b=this,c=new h.CrossField(a,b.cQJ.bind(b),b.U0J.bind(b),b.V0J.bind(b));return b.mOJ(c),b.GOJ(c),c},a.prototype.n1J=function(a){var b,c,d,e=this,f=e.p1J(a);f.isReadonly()||(b=l(e.V_J.bind(e),f),c=b.isOneToMany,d=b.relationTemplate,c&&(f.isOneToMany=c,f.valueArrayRelation=d))},a.prototype.isCrossField=function(a){return a instanceof h.CrossField},a.prototype.clearCrossFieldData=function(){var a,b,c=this,d=c.HL;for(a=0;a<d.length;a++)b=d[a],b instanceof h.CrossField&&b.clearData()},a.prototype.resetCrossFieldRowValues=function(a){var b,c,d=this,e=d.HL,f={};for(b=0;b<e.length;b++)c=e[b],c instanceof h.CrossField&&(c.clearValue(a),d.W_J(c,a,f))},a.prototype.removeCrossFieldValues=function(a,b){var c,d,e=this,f=e.HL;for(c=0;c<f.length;c++)d=f[c],d instanceof h.CrossField&&d.removeData(a,b)},a.prototype.setCrossFieldInsertedIndex=function(a,b,c){var d,f,g=this,i=g.HL,j=v(a.valueRelation,!0);for(d=0;d<i.length;d++)f=i[d],f instanceof h.CrossField&&f.isOneToMany&&a.dimTableKeyFieldValue===f.dimTableKeyFieldValue&&e.isNullOrUndefined(f.getValueIndex(b))&&j===v(f.valueRelation,!0)&&f.setValueIndex(b,c)},a}(),b.FieldManager=i;function l(a,b){var c,d,f=b.valueRelation,h=f.split("."),i=a(f),j="",k=!1,l=!1;for(c=0;c<h.length;c++)d=i[c],e.isNullOrEmpty(h[c])||(j+="."+h[c]),!l&&d&&"array"===d.type&&d.name===h[c]&&(l=!0,k=!0,j+="."+g.RelationTemplateToken);return{isOneToMany:k,relationTemplate:j.slice(1)}}function m(a,b,c,d){var e=s(a),f=b||e;return{valueRelation:a,valueCaption:f,valueIndex:c,valueCrossKey:d}}function n(a){var b,c=a.columns,d=a.crossKeys,e=a.initialOptionIndex,f=[];for(b=0;b<c.length;b++)f.push(m(c[b].value,c[b].caption,e+b,d[b]));return f}function o(a,b){return p(a,b,"")}function p(a,b,c){return!e.isNullOrEmpty(b)&&a.indexOf(b)>=0?(a=a.replace(b,c),p(a,b,c)):a}function q(a){var b=a.value;return"string"==typeof b?b:"function"==typeof b?b.name:void 0}function r(a){var b;return b="string"==typeof a||e.isNullOrUndefined(a)?a:"function"==typeof a?a.name:a.value,(b||"").split(".")}function s(a){var b=r(a);return b[b.length-1]}function t(a){if(!e.isNullOrEmpty(a.formatter))return a.formatter}function u(a){var b=r(a);return b[b.length-2]}function v(a,b){var c=r(a);return b&&c.splice(c.length-1,0,""),c.slice(0,c.length-1).join(".")}function w(a){return"string"==typeof a?[a]:a||[]}function x(a){var b,c,d,f=0,g={};for(b=0;b<a.length;b++)c=a[b].caption,e.isArray(c)?(a[b].caption=c.map(function(a){return null===a||void 0===a?void 0:""+a}),g[b]=c.length,g[b]>f&&(f=g[b])):a[b].caption=null===c||void 0===c?void 0:""+c;for(b in g)if(g[b]<f)for(d=f-g[b],c=a[b].caption;d>0;)c.unshift(),d--;for(b=0;b<a.length;b++)c=a[b].caption,e.isArray(c)&&1===c.length&&(a[b].caption=c[0])}function y(a,b){var c,d,f,g=a.R_J(b);if(!(e.isNullOrUndefined(g)||(c=g._dataSource.options.schema,e.isNullOrUndefined(c)||(d=c.columns,e.isNullOrUndefined(d)||(f=d[s(b)],e.isNullOrUndefined(f))))))return f.lookup}b.getLookupBy=y;function z(a,b){return A(a,b)||B(a,b)}b.isLookupField=z;function A(a,b){return e.isArray(y(a,b))}b.isLookupListField=A;function B(a,b){var c,d,f,g,h=y(a,b);if(e.isObject(h)&&(h=h.name),e.isString(h))return c=a.R_J(b),d=s(b),f=s(h),g=a.EEJ.relationships.find(function(a){return a.sourceTable===c&&a.sourceFieldName===d&&a.sourceRelationshipName===f}),!e.isNullOrUndefined(g)}b.isLookupRelationField=B;function C(a,b,c){var d=s(c),e=G(a,function(a){return a.sourceFieldName===d&&a.sourceTable===b});return e?{relationTable:e.targetTable,relationPrimaryKey:e.targetFieldName,relationTableName:e.sourceRelationshipName}:{}}function D(a,b,c){var d,g,h,i,j,k,l,m,n=b.over,o=b.attributes;return!(e.isNullOrEmpty(n)||e.isNullOrEmpty(c)||c===n||E(a,c))&&(d=r(c),g=A(a,n),h=!g&&(B(a,n)&&o&&o.length>0),!(!g&&!h)&&(i=C(a,F(a,n),n),!(d.indexOf(i.relationTableName)>-1)&&(j=a.S_J(n),k=a.S_J(c),!(!j.every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne})||!k.every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne}))||(l=e.findIndex(j,function(a){return a.relationshipMap===f.RelationshipMap.OneToMany}),m=e.findIndex(k,function(a){return a.relationshipMap===f.RelationshipMap.OneToMany}),l>-1&&l===m&&j[l].name===k[m].name?j.slice(l+1).every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne})&&k.slice(l+1).every(function(a){return a.relationshipMap===f.RelationshipMap.OneToOne}):void 0))))}b.isValidCross=D;function E(a,b){var c=F(a,b),d=s(b);return c.PEJ(d)||G(a,function(a){return a.sourceTable===c&&a.sourceFieldName===d||a.targetTable===c&&a.targetFieldName===d})}function F(a,b){return a.R_J(b)}function G(a,b){return a.EEJ.relationships.find(b)}function H(a){var b=a.ascending,c=a.compare;return c?function(a,d){return c(a.extra.caption,d.extra.caption,b)}:function(a,c){var d=a.extra.caption,e=c.extra.caption,f=b?d:e,g=b?e:d;return f>g?1:f<g?-1:0}}},"./dist/src/viewField/fields.js":function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__extends||function(){var a=function(b,c){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})(b,c)};return function(b,c){a(b,c);function d(){this.constructor=b}b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0}),b.CrossField=b.SliceCategoryField=b.CategoryFormulaField=b.CategoryField=b.FormulaField=b.ColumnDataReaderField=b.ColumnDataField=b.DataField=b.Field=b.setFieldExtraProperties=void 0,d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/viewField/utils.js");function p(a){["caption","width","style","headerStyle","conditionalFormats","validator","headerFit"].forEach(a)}b.setFieldExtraProperties=p,f=function(){function a(a){this.name=a}return a.prototype.setFieldExtra=function(a){var b,c=this;d.isUndefined(c.extra)&&(c.extra={}),p(function(b){c.yOJ(b,a)}),d.isNullOrUndefined(a.caption)&&(b=c.name.indexOf(e.FieldNameDelimiter),b>=0&&(c.extra.caption=c.name.substring(0,b)))},a.prototype.yOJ=function(a,b){var c=this,d=b[a];d&&(c.extra[a]=d)},a.prototype.getValue=function(a){return this.data[a]},a.prototype.getOriginalValue=function(a){return this.getValue(a)},a.prototype.zOJ=function(a,b,c){var d,e,f,g=this;for(g.data||(g.data=[]),c=c||0,e=c,f=a.length;e<f;e++)d=a[e],g.data[d]=b;return g.data},a.prototype.AOJ=function(a,b){var c,d,e,f=this;for(f.data||(f.data=[]),d=0,e=a.length;d<e;d++)c=a[d],f.data[c]=b(c);return f.data},a}(),b.Field=f,g=function(a){o(b,a);function b(b,c){var d=a.call(this,b)||this;return d.data=c||[],d}return b}(f),b.DataField=g,h=function(a){o(b,a);function b(b,c,d){var e=a.call(this,b,c)||this;return e.column=d,e}return b}(g),b.ColumnDataField=h,i=function(a){o(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.column=d,e.getValue=c,e}return b}(f),b.ColumnDataReaderField=i,j=function(a){o(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.formula=c,e.Ik=d,e}return b.prototype.evaluateFormulaBy=function(a){var b=this,c=b.formula,d=b.Ik;return b.AOJ(a,function(a){return q(d(a),c)})[a[0]]},b}(g),b.FormulaField=j;function q(a,b){return a._error||a._code?"Calc Error "+b+":"+a._error+","+a._code:a}k=function(a){o(b,a);function b(b,c){var d=a.call(this,b)||this;return d.BOJ=c,d.COJ={},d.Ey=[],d}return b.prototype.getKey=function(a){return this.COJ[a]},b.prototype.getMap=function(){return this.COJ},b.prototype.getValueByKey=function(a){return this.Ey[a]},b.prototype.DOJ=function(a,b){this.COJ[b]=a,this.Ey[a]=b},b.prototype.getValue=function(a){var b=this;return b.data&&b.data.length>0?b.ge(a):b.BOJ?b.BOJ.getValue(a):void 0},b.prototype.ge=function(a){var b=this;return b.Ey[b.data[a]]},b.prototype.addKey=function(a,b){var c=this,e=c.getKey(a);return d.isUndefined(e)&&(e=b,c.DOJ(e,a)),e},b}(f),b.CategoryField=k,l=function(a){o(b,a);function b(b,c,d){var e=a.call(this,b)||this;return e.Ik=d,e.formula=c,e}return b.prototype.evaluateFormulaBy=function(a,b){var c,d=this;return b=b||0,c=d.Ik(a,b),d.zOJ(a,d.addKey(c,a[b]),b),c},b}(k),b.CategoryFormulaField=l,m=function(a){o(b,a);function b(b){return a.call(this,b)||this}return b.prototype.setData=function(a,b,c){var d=this,e=d.addKey(a,b[c]);d.zOJ(b,e,c)},b}(k),b.SliceCategoryField=m,n=function(a){o(b,a);function b(b,c,d,e){var f=a.call(this,b.value)||this;return f.path=b.path,f.valueRelation=b.valueRelation,f.dimRelationPath=b.dimRelationPath,f.dimRelationKey=b.dimRelationKey,f.dimTableName=b.dimTableName,f.isDateDimValue=b.dimTableKeyFieldValue instanceof Date,f.dimTableKeyFieldValue=f.isDateDimValue?b.dimTableKeyFieldValue.getTime():b.dimTableKeyFieldValue,f.initialOptionIndex=b.initialOptionIndex,f.getValueByField=r(b,e,c),f.getOriginalValueByField=r(b,e,d),f.data=[],f}return b.prototype.setFieldExtra=function(b){a.prototype.setFieldExtra.call(this,b),this.extra.caption=this.path},b.prototype.o1J=function(a,b){var c=this,d=c.isDateDimValue;return d&&a instanceof Date?a.getTime()===b:a===b},b.prototype.q1J=function(a,b){var c=this,d=c.isOneToMany,e=c.dimRelationPath,f=c.dimTableKeyFieldValue;return!d&&c.o1J(b(e,a),f)?a:this.data[a]},b.prototype.getDimValue=function(){var a=this,b=a.isDateDimValue,c=a.dimTableKeyFieldValue;return b?new Date(c):c},b.prototype.getValueIndex=function(a){return this.q1J(a,this.getValueByField)},b.prototype.setValueIndex=function(a,b){this.data[a]=b},b.prototype.clearData=function(){this.data=[]},b.prototype.clearValue=function(a){this.data[a]=void 0},b.prototype.removeData=function(a,b){this.data.splice(a,b)},b.prototype.isReadonly=function(){return e.isFormula(this.valueRelation)||d.isFunction(this.valueRelation)},b.prototype.ge=function(a,b){var c,f=this,g=f.isOneToMany,h=f.valueArrayRelation,i=f.valueRelation,j=f.q1J(a,b);if(d.isNumber(j))return c=void 0,c=g?h.replace(e.RelationTemplateToken,j+1):i,b(c,a)},b.prototype.getValue=function(a){return this.ge(a,this.getValueByField)},b.prototype.getOriginalValue=function(a){return this.ge(a,this.getOriginalValueByField)},b.prototype.getRelationField=function(a){var b=this,c=b.isOneToMany,f=b.valueArrayRelation,g=b.valueRelation,h=b.getValueIndex(a);return c?d.isNumber(h)?f.replace(e.RelationTemplateToken,h+1):void 0:g},b}(f),b.CrossField=n;function r(a,b,c){return d.isFunction(a.valueRelation)?function(a,e){return d.isFunction(a)?a(b(e)):c(a,e)}:c}},"./dist/src/viewField/groupManager.js":function(a,b,c){"use strict";var d,e,f;Object.defineProperty(b,"__esModule",{value:!0}),b.GroupManager=b.getGroupFieldName=b.isGroupField=b.isGroupSlice=b.isGroupSummary=b.isGroupCategory=b.getGroupOptionIndexesFrom=void 0,d=c("./dist/src/dataSource/utils.js"),e=c("./dist/src/viewField/utils.js");function g(a,b){var c,e,f,g,h;if(d.isNullOrUndefined(a)||d.isNullOrUndefined(b))return a===b;if(c=Object.keys(a),e=Object.keys(b),c.length!==e.length)return!1;for(f=0,g=c;f<g.length;f++)if(h=g[f],a[h]!==b[h])return!1;return!0}function h(a){var b,c=[],d=a.split(e.FieldNameDelimiter).reverse();for(b=0;b<d.length;b+=2)c.push(d[b]);return c}b.getGroupOptionIndexesFrom=h;function i(a){return 1===h(a).length}b.isGroupCategory=i;function j(a){return 2===h(a).length}b.isGroupSummary=j;function k(a){return 3===h(a).length}b.isGroupSlice=k;function l(a){return 2===a.split(e.FieldNameDelimiter).length}b.isGroupField=l;function m(a){var b=a.split(e.FieldNameDelimiter);return b[b.length-2]}b.getGroupFieldName=m,f=function(){function a(a,b){this.i6=a,this.oSJ=b}return a.prototype.isGrouped=function(a){return g(a,this.i6)},a.prototype.groupBy=function(a,b){var c=this,d=c.KOJ(a,b);return{rootNode:d,indexMap:c.rSJ(b,function(){return c.LOJ(a,d)})}},a.prototype.rSJ=function(a,b){var c,d=this,e=d.i6;return d.xc={path:[],groupOptions:e,entireScope:a},d.oSJ(d.xc),c=b(),d.xc=null,d.oSJ(d.xc),c},a.prototype.KOJ=function(a,b){var c,d,e,f,g={};for(e=0,f=b.length;e<f;e++)d=b[e],c=g,this.MOJ(c,a,d);return g},a.prototype.MOJ=function(a,b,c){var e=this,f=b.field,g=f.getValue(c),h=f.addKey(g,c),i=e.NOJ(a,h);b.slices&&b.slices.forEach(function(a,b){d.isUndefined(i.slices)&&(i.slices=[]),d.isUndefined(i.slices[b])&&(i.slices[b]={});var f=i.slices[b];e.MOJ(f,a,c)}),b.group?e.MOJ(i,b.group,c):(d.isUndefined(i.recordIndexes)&&(i.recordIndexes=[]),i.recordIndexes.push(c))},a.prototype.NOJ=function(a,b){d.isUndefined(a.children)&&(a.childrenMap={},a.children=[]);var c=a.childrenMap[b];return d.isUndefined(c)&&(a.childrenMap[b]=c=a.children.length,a.children.push({key:b})),a.children[c]},a.prototype.LOJ=function(a,b){var c,d=this,e=b.children,f=[];for(c in e)e.hasOwnProperty(c)&&d.OOJ(e[c],a,f);return f},a.prototype.OOJ=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q=this,r=c.length,s=a.recordIndexes;if(q.sSJ(a),s){for(d=0,e=s.length;d<e;d++)c[r+d]=s[d];q.POJ(b.formulas,c,r)}else{for(f=a.children,g=0,h=f;g<h.length;g++)i=h[g],q.OOJ(i,b.group,c);q.POJ(b.formulas,c,r)}if(a.slices)for(d=0,j=a.slices,k=j.length;d<k;d++){for(l=j[d],m=b.slices[d],n=m.formula,f=l.children,o=0,p=f;o<p.length;o++)i=p[o],i.result=q.QOJ(n,i.recordIndexes);m.addSliceField(m,b.formulas[m.formulaIndex],f,c,r)}q.tSJ()},a.prototype.POJ=function(a,b,c){if(a)for(var d=0,e=a.length;d<e;d++)a[d].evaluateFormulaBy(b,c)},a.prototype.QOJ=function(a,b){if(a)return a.evaluateFormulaBy(b)},a.prototype.sSJ=function(a){this.xc.path.push(a)},a.prototype.tSJ=function(){this.xc.path.pop()},a}(),b.GroupManager=f},"./dist/src/viewField/utils.js":function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isField=b.isRelated=b.isFormula=b.combineName=b.RelationTemplateToken=b.CaptionDelimiter=b.FieldNameDelimiter=void 0,b.FieldNameDelimiter="__",b.CaptionDelimiter="\\",b.RelationTemplateToken="{{}}";function d(){var a,c=[];for(a=0;a<arguments.length;a++)c[a]=arguments[a];return c.join(b.FieldNameDelimiter)}b.combineName=d;function e(a){return"="===a[0]}b.isFormula=e;function f(a){return a.indexOf(".")>-1}b.isRelated=f;function g(a){return a.indexOf(b.FieldNameDelimiter)>-1}b.isField=g},"./dist/src/viewField/viewField.entry.js":function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||b.hasOwnProperty(c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c("./dist/src/viewField/groupManager.js"),b),e(c("./dist/src/viewField/fieldManager.js"),b),e(c("./dist/src/viewField/fields.js"),b),e(c("./dist/src/viewField/utils.js"),b)},"./node_modules/fetch-jsonp/build/fetch-jsonp.js":function(a,b,c){var d,e,f;!function(c,g){var h;e=[b,a],d=g,f="function"==typeof d?d.apply(b,e):d,!(void 0!==f&&(a.exports=f))}(this,function(a,b){"use strict";var c={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function d(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function e(a){try{delete window[a]}catch(b){window[a]=void 0}}function f(a){var b=document.getElementById(a);b&&document.getElementsByTagName("head")[0].removeChild(b)}function g(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=a,h=b.timeout||c.timeout,i=b.jsonpCallback||c.jsonpCallback,j=void 0;return new Promise(function(c,k){var l,m=b.jsonpCallbackFunction||d(),n=i+"_"+m;window[m]=function(a){c({ok:!0,json:function b(){return Promise.resolve(a)}}),j&&clearTimeout(j),f(n),e(m)},g+=g.indexOf("?")===-1?"?":"&",l=document.createElement("script"),l.setAttribute("src",""+g+i+"="+m),b.charset&&l.setAttribute("charset",b.charset),l.id=n,document.getElementsByTagName("head")[0].appendChild(l),j=setTimeout(function(){k(Error("JSONP request to "+a+" timed out")),e(m),f(n),window[m]=function(){e(m)}},h),l.onerror=function(){k(Error("JSONP request to "+a+" failed")),e(m),f(n),j&&clearTimeout(j)}})}b.exports=g})},"./node_modules/whatwg-fetch/fetch.js":function(a,b,c){"use strict";
var d,e,f,g,h,i;c.r(b),c.d(b,"Headers",function(){return n}),c.d(b,"Request",function(){return w}),c.d(b,"Response",function(){return z}),c.d(b,"DOMException",function(){return i}),c.d(b,"fetch",function(){return A}),d={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function j(a){return a&&DataView.prototype.isPrototypeOf(a)}d.arrayBuffer&&(e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(a){return a&&e.indexOf(Object.prototype.toString.call(a))>-1});function k(a){if("string"!=typeof a&&(a+=""),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function l(a){return"string"!=typeof a&&(a+=""),a}function m(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return d.iterable&&(b[Symbol.iterator]=function(){return b}),b}function n(a){this.map={},a instanceof n?a.forEach(function(a,b){this.append(b,a)},this):Array.isArray(a)?a.forEach(function(a){this.append(a[0],a[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}n.prototype.append=function(a,b){a=k(a),b=l(b);var c=this.map[a];this.map[a]=c?c+", "+b:b},n.prototype.delete=function(a){delete this.map[k(a)]},n.prototype.get=function(a){return a=k(a),this.has(a)?this.map[a]:null},n.prototype.has=function(a){return this.map.hasOwnProperty(k(a))},n.prototype.set=function(a,b){this.map[k(a)]=l(b)},n.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)},n.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),m(a)},n.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),m(a)},n.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),m(a)},d.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);function o(a){return a.bodyUsed?Promise.reject(new TypeError("Already read")):void(a.bodyUsed=!0)}function p(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function q(a){var b=new FileReader,c=p(b);return b.readAsArrayBuffer(a),c}function r(a){var b=new FileReader,c=p(b);return b.readAsText(a),c}function s(a){var b,c=new Uint8Array(a),d=Array(c.length);for(b=0;b<c.length;b++)d[b]=String.fromCharCode(c[b]);return d.join("")}function t(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);return b.set(new Uint8Array(a)),b.buffer}function u(){return this.bodyUsed=!1,this.qFJ=function(a){this.rFJ=a,a?"string"==typeof a?this.sFJ=a:d.blob&&Blob.prototype.isPrototypeOf(a)?this.tFJ=a:d.formData&&FormData.prototype.isPrototypeOf(a)?this.uFJ=a:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this.sFJ=""+a:d.arrayBuffer&&d.blob&&j(a)?(this.vFJ=t(a.buffer),this.rFJ=new Blob([this.vFJ])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||f(a))?this.vFJ=t(a):this.sFJ=a=Object.prototype.toString.call(a):this.sFJ="",this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this.tFJ&&this.tFJ.type?this.headers.set("content-type",this.tFJ.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var a=o(this);if(a)return a;if(this.tFJ)return Promise.resolve(this.tFJ);if(this.vFJ)return Promise.resolve(new Blob([this.vFJ]));if(this.uFJ)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this.sFJ]))},this.arrayBuffer=function(){return this.vFJ?o(this)||Promise.resolve(this.vFJ):this.blob().then(q)}),this.text=function(){var a=o(this);if(a)return a;if(this.tFJ)return r(this.tFJ);if(this.vFJ)return Promise.resolve(s(this.vFJ));if(this.uFJ)throw Error("could not read FormData body as text");return Promise.resolve(this.sFJ)},d.formData&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(a){var b=a.toUpperCase();return g.indexOf(b)>-1?b:a}function w(a,b){b=b||{};var c=b.body;if(a instanceof w){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new n(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,c||null==a.rFJ||(c=a.rFJ,a.bodyUsed=!0)}else this.url=a+"";if(this.credentials=b.credentials||this.credentials||"same-origin",!b.headers&&this.headers||(this.headers=new n(b.headers)),this.method=v(b.method||this.method||"GET"),this.mode=b.mode||this.mode||null,this.signal=b.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this.qFJ(c)}w.prototype.clone=function(){return new w(this,{body:this.rFJ})};function x(a){var b=new FormData;return a.trim().split("&").forEach(function(a){var c,d,e;a&&(c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," "),b.append(decodeURIComponent(d),decodeURIComponent(e)))}),b}function y(a){var b=new n,c=a.replace(/\r?\n[\t ]+/g," ");return c.split(/\r?\n/).forEach(function(a){var c,d=a.split(":"),e=d.shift().trim();e&&(c=d.join(":").trim(),b.append(e,c))}),b}u.call(w.prototype);function z(a,b){b||(b={}),this.type="default",this.status=void 0===b.status?200:b.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in b?b.statusText:"OK",this.headers=new n(b.headers),this.url=b.url||"",this.qFJ(a)}u.call(z.prototype),z.prototype.clone=function(){return new z(this.rFJ,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},z.error=function(){var a=new z(null,{status:0,statusText:""});return a.type="error",a},h=[301,302,303,307,308],z.redirect=function(a,b){if(h.indexOf(b)===-1)throw new RangeError("Invalid status code");return new z(null,{status:b,headers:{location:a}})},i=self.DOMException;try{new i}catch(a){i=function(a,b){this.message=a,this.name=b;var c=Error(a);this.stack=c.stack},i.prototype=Object.create(Error.prototype),i.prototype.constructor=i}function A(a,b){return new Promise(function(c,e){var f,g=new w(a,b);if(g.signal&&g.signal.aborted)return e(new i("Aborted","AbortError"));f=new XMLHttpRequest;function h(){f.abort()}f.onload=function(){var a,b={status:f.status,statusText:f.statusText,headers:y(f.getAllResponseHeaders()||"")};b.url="responseURL"in f?f.responseURL:b.headers.get("X-Request-URL"),a="response"in f?f.response:f.responseText,c(new z(a,b))},f.onerror=function(){e(new TypeError("Network request failed"))},f.ontimeout=function(){e(new TypeError("Network request failed"))},f.onabort=function(){e(new i("Aborted","AbortError"))},f.open(g.method,g.url,!0),"include"===g.credentials?f.withCredentials=!0:"omit"===g.credentials&&(f.withCredentials=!1),"responseType"in f&&d.blob&&(f.responseType="blob"),g.headers.forEach(function(a,b){f.setRequestHeader(b,a)}),g.signal&&(g.signal.addEventListener("abort",h),f.onreadystatechange=function(){4===f.readyState&&g.signal.removeEventListener("abort",h)}),f.send(void 0===g.rFJ?null:g.rFJ)})}A.polyfill=!0,self.fetch||(self.fetch=A,self.Headers=n,self.Request=w,self.Response=z)},CalcEngine:function(a,b){a.exports=c("@grapecity/js-calc")},Common:function(a,b){a.exports=c("@grapecity/js-sheets-common")}}),a.exports=d.Data},"./node_modules_local/@grapecity/js-data-manager/index.js":function(a,b,c){a.exports=c("./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js")},"@grapecity/js-calc":function(a,b){a.exports=GC.Spread.CalcEngine},"@grapecity/js-sheets-common":function(a,b){a.exports=GC.Spread}});